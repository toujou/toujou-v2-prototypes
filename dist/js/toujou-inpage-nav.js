import{_ as t}from"./tslib.es6-Br7-PHSQ.js";import{i as e,s as i,x as n}from"./lit-element-DWV00rgf.js";import{e as s}from"./custom-element-DPYutfhb.js";import{n as r}from"./property-BjK_DIN0.js";import"./query-assigned-elements-DqqHV3QO.js";var o,a,c,l,h,u=e(o||(a=[":host {\n    display: var(--toujou-third-party-content-display, flex);\n    -webkit-box-align: var(--toujou-third-party-content-align-items, stretch);\n        -ms-flex-align: var(--toujou-third-party-content-align-items, stretch);\n            align-items: var(--toujou-third-party-content-align-items, stretch);\n    -webkit-box-pack: var(--toujou-third-party-content-justify-content, center);\n        -ms-flex-pack: var(--toujou-third-party-content-justify-content, center);\n            justify-content: var(--toujou-third-party-content-justify-content, center);\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: var(--toujou-third-party-content-flex-direction, column);\n            flex-direction: var(--toujou-third-party-content-flex-direction, column);\n    position: var(--toujou-third-party-content-position, relative);\n    top: var(--toujou-third-party-content-top, 0);\n    left: var(--toujou-third-party-content-left, 0);\n    height: var(--toujou-third-party-content-height, 100%);\n    width: var(--toujou-third-party-content-width, 100%);\n}\n\n:host([contenttype='maps']) {\n    position: var(--toujou-third-party-content-maps-position, absolute);\n}\n\niframe {\n    border: var(--toujou-third-party-content-iframe-border, none);\n    position: var(--toujou-third-party-content-iframe-position, absolute);\n    height: var(--toujou-third-party-content-iframe-height, 100%);\n    width: var(--toujou-third-party-content-iframe-width, 100%);\n}\n\n:host([contenttype='html']) iframe {\n    position: var(--toujou-third-party-content-html-iframe-position, relative);\n}\n"],c||(c=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(c)}}))));function p(t){if(!t)return 0;if(t.classList.contains("inpage-nav__label")){const e=getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);return t.offsetWidth+i}return t.offsetWidth}(h=l||(l={})).CONNECTED="toujou-inpage-nav-connected",h.DISCONNECTED="toujou-inpage-nav-disconnected",h.STUCK_STATE_CHANGE="toujou-inpage-nav-stuck-state-change";let d=class extends i{set _currentSectionID(t){this._navItems&&(t?this._previousCurrentSectionID!==t&&(this._updateLabelVisibility(!!t),this._updateNavItemsState(t)):(this._updateLabelVisibility(!1),this._updateNavItemsState(null)))}render(){return n`
      <slot></slot>
      <slot name="cta" id="cta"></slot>
    `}constructor(){super(),this.isMobile=!1,this.mobileOpen=!1,this.isStuck=!1,this._targetSections=new Map,this.intersectionObserverNumberOfSteps=50,this.stickyObserverCleanup=null,this.mobileBreakpointOffset=this._getMobileBreakpointOffset(),this._currentSectionID=null,this._isCentered=this.hasAttribute("centered"),this._isAuto=this.hasAttribute("is-auto"),this._targetSections=new Map,this._rootMarginsSize=-200,setTimeout((()=>{this._init()}))}connectedCallback(){super.connectedCallback(),this.updateComplete.then((()=>{this._setupStickyStateObserver()})),this.dispatchEvent(new CustomEvent(l.CONNECTED,{bubbles:!0,composed:!0}))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._checkIsMobileState.bind(this)),this._toggle.removeEventListener("click",this._mobileOpenToggle.bind(this)),this.addEventListener("click",this._handleNavClick.bind(this)),this.stickyObserverCleanup&&(this.stickyObserverCleanup(),this.stickyObserverCleanup=null),this.observer&&this.observer.disconnect(),this.dispatchEvent(new CustomEvent(l.DISCONNECTED,{bubbles:!0,composed:!0}))}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),"ismobile"!==t&&"mobileopen"!==t||this._updateAriaAttributes(t)}_setupStickyStateObserver(){this.hasAttribute("is-sticky")&&(this.stickyObserverCleanup=function(t,e,i={}){if(!(t instanceof HTMLElement))throw new TypeError("observeStickyElement expects a valid HTMLElement as the first argument.");if("function"!=typeof e)throw new TypeError("observeStickyElement: callback must be a function");const{threshold:n=1,triggerImmediately:s=!0,rootMargin:r="0px"}=i,o=document.createElement("div");o.className="sticky-sentinel",Object.assign(o.style,{position:"relative",width:"0",height:"0",pointerEvents:"none",opacity:"0"});const a=t.parentElement;if(!a)return console.warn("Sticky element has no parent, cannot observe sticky state"),()=>{};a.insertBefore(o,t);let c=!1,l=!0;const h=t=>{c!==t&&(c=t,e(t))},u=new IntersectionObserver((t=>{if(!l)return;const e=t[0];if(e){const t=!e.isIntersecting;h(t)}}),{threshold:n,rootMargin:r});return u.observe(o),s&&requestAnimationFrame((()=>{if(!l)return;const t=o.getBoundingClientRect().top<0;h(t)})),()=>{l=!1,u.disconnect(),o.parentElement&&o.parentElement.removeChild(o)}}(this,(t=>{this.isStuck=t,this.dispatchEvent(new CustomEvent(l.STUCK_STATE_CHANGE,{detail:{isStuck:t},bubbles:!0,composed:!0}))}),{threshold:.1,triggerImmediately:!0,rootMargin:"-1px 0px 0px 0px"}))}_init(){this._getChildrenElements(),this._navItems?(this._toggle=this.querySelector(".inpage-nav__toggle"),this._checkIsMobileState(),this._addTargetObservers(),window.addEventListener("resize",this._checkIsMobileState.bind(this)),this._toggle.addEventListener("click",this._mobileOpenToggle.bind(this)),this.addEventListener("click",this._handleNavClick.bind(this))):console.error("Could not initialize the inpage-nav. Error: No nav items!!!")}_getChildrenElements(){this._navItems={},this._navLabel=this.querySelector(".inpage-nav__label")||null,this._cta=this.querySelector('[slot="cta"]'),(this.querySelectorAll(".inpage-nav__item")||null).forEach(((t,e)=>{const i=t.querySelector("a").getAttribute("href");this._navItems[e]={item:t,link:i,target:document.querySelector(i)}}))}_checkIsMobileState(){this.isMobile=!1,window.requestAnimationFrame((()=>{this._navBreakpoint=function(t,e,i,n){return function(t){let e=0;return Object.keys(t).forEach((i=>{const n=getComputedStyle(t[i].item),s=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);e+=t[i].item.offsetWidth+s})),e}(t)+p(e)+p(i)*(n?3:1)}(this._navItems,this._navLabel,this._cta,this._isCentered),this.isMobile=this._navBreakpoint>this.offsetWidth-this.mobileBreakpointOffset}))}_addTargetObservers(){const t={rootMargin:`${this._rootMarginsSize}px 0px ${this._rootMarginsSize}px 0px`,threshold:this._createThresholdList(this.intersectionObserverNumberOfSteps)};this.observer=new IntersectionObserver(this._handleObserver.bind(this),t),Object.keys(this._navItems).forEach((t=>{const e=this._navItems[t].target;if(!(e instanceof HTMLElement))return;this._targetSections.set(e,!1);const i=e.hasAttribute("id")?e:e.nextElementSibling;this.observer.observe(i)}))}_createThresholdList(t){return[...Array(t).keys()].map((e=>e/t))}_handleObserver(t){t.forEach((t=>{this._targetSections.set(t.target,t.isIntersecting)})),this._updateSectionsAttributes(),this._updateActiveItemUI()}_updateSectionsAttributes(){let t=!1;this._targetSections.forEach(((e,i)=>{i.toggleAttribute("inpageNavTargetVisible",!t&&e),e&&!t&&(t=e)}))}_updateActiveItemUI(){const t=document.querySelector("*[inpageNavTargetVisible]")||null;t?this._currentSectionID=`#${t.id.toString()}`:!t&&this._navLabel?this._currentSectionID=null:t||this._navLabel||(this._currentSectionID=this._navItems[0].link)}_mobileOpenToggle(){this.mobileOpen=!this.mobileOpen}_handleNavClick(t){t.target.classList.contains("inpage-nav__link")&&(this.mobileOpen=!1)}_updateAriaAttributes(t){"mobileopen"===t?this._toggle.setAttribute("aria-expanded",String(this.mobileOpen)):"ismobile"===t&&this._toggle.setAttribute("aria-hidden",String(!this.isMobile))}_updateLabelVisibility(t){this._navLabel&&(t?this._navLabel.removeAttribute("visible"):this._navLabel.setAttribute("visible",""))}_updateNavItemsState(t){const e=this.querySelector(".inpage-nav__item[active]");e&&(e.removeAttribute("active"),e.removeAttribute("aria-current")),Object.keys(this._navItems).forEach((e=>{this._navItems[e].link===t&&(this._navItems[e].item.setAttribute("active",""),this._navItems[e].item.setAttribute("aria-current","true"))})),this._previousCurrentSectionID=t}_getMobileBreakpointOffset(){const t=getComputedStyle(document.documentElement);return parseInt(t.getPropertyValue("--toujou-inpage-nav-breakpoint-offset")||"180",10)}};d.styles=[u],t([r({type:Boolean,reflect:!0})],d.prototype,"isMobile",void 0),t([r({type:Boolean,reflect:!0})],d.prototype,"mobileOpen",void 0),t([r({type:Boolean,reflect:!0,attribute:"is-stuck"})],d.prototype,"isStuck",void 0),t([r({type:Map})],d.prototype,"_targetSections",void 0),d=t([s("toujou-inpage-nav")],d);
//# sourceMappingURL=toujou-inpage-nav.js.map
