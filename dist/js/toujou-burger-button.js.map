{"version":3,"file":"toujou-burger-button.js","sources":["../../src/components/toujou-burger-button/toujou-burger-button.ts"],"sourcesContent":["import { LitElement, html } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\n\n/**\n * Burger button class which dispatches events on click and listens to media query changes\n */\n@customElement('toujou-burger-button')\nexport class ToujouBurgerButton extends LitElement {\n    /**\n     * Internal state\n     */\n    @property({ type: Boolean })\n    _state: boolean = false;\n\n    // constants\n    stateChangeEventName = 'toujou-burger-button-state-change';\n    targetToggleAttribute = 'open-nav';\n    topbarMqlChangeEventName = 'toujou-topbar-breakpoint-change';\n\n    /**\n     * When the state changes we need to update the UI attributes on the relevant elements\n     * @param value\n     */\n    // @ts-ignore\n    set state(value: boolean): void {\n        this._state = value;\n        this.setAttribute('aria-pressed', String(value));\n        this.setAttribute('aria-expanded', String(value));\n    }\n    \n    // @ts-ignore\n    get state() {\n        return this._state;\n    }\n\n    render() {\n        return html`<slot name=\"content\"></slot>`\n    }\n\n    /**\n     * Add event listeners\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('click', this._handleClickEvent);\n        this.addEventListener('keyup', this._handleKeyUp);\n        window.addEventListener(this.topbarMqlChangeEventName, this._handleMqlChange.bind(this));\n    }\n\n    /**\n     * Remove event listeners\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n\n        this.removeEventListener('click', this._handleClickEvent);\n        this.removeEventListener('keyup', this._handleKeyUp);\n\n        window.removeEventListener(this.topbarMqlChangeEventName, this._handleMqlChange.bind(this));\n    }\n\n    /**\n     * toggle the button state when the button is clicked\n     */\n    _handleClickEvent = () => {\n        this._toggleState();\n    }\n\n    /**\n     * Toggle the button state on keyboard 'space' or 'enter' press\n     * @param event\n     */\n    _handleKeyUp = (event: KeyboardEvent) => {\n        if (event.key === 'Enter' || event.code === 'Enter' || event.code === 'Space' || event.key === ' ') {\n            this._toggleState();\n        }\n    }\n\n    /**\n     * Toggle the button state and dispatch custom event so other elements can react to it\n     */\n    _toggleState = () => {\n        this.state = !this._state;\n\n        this.dispatchEvent(new CustomEvent(this.stateChangeEventName, {\n            bubbles: true,\n            composed: true,\n            detail: { state: this.state }\n        }));\n    }\n\n    /**\n     * Close the button when the window grows to desktop width\n     * @param event\n     */\n    _handleMqlChange(event: Event) {\n        if (!(<CustomEvent>event).detail.state) {\n            this.state = false;\n        }\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'toujou-burger-button': ToujouBurgerButton\n    }\n}\n"],"names":["ToujouBurgerButton","LitElement","event","value","html","__decorateClass","property","customElement"],"mappings":"gWAOa,IAAAA,EAAN,cAAiCC,CAAW,CAA5C,aAAA,CAAA,MAAA,GAAA,SAAA,EAKe,KAAA,OAAA,GAGK,KAAA,qBAAA,oCACC,KAAA,sBAAA,WACG,KAAA,yBAAA,kCA+C3B,KAAA,kBAAoB,IAAM,CACtB,KAAK,aAAa,CAAA,EAOtB,KAAA,aAAgBC,GAAyB,EACjCA,EAAM,MAAQ,SAAWA,EAAM,OAAS,SAAWA,EAAM,OAAS,SAAWA,EAAM,MAAQ,MAC3F,KAAK,aAAa,CACtB,EAMJ,KAAA,aAAe,IAAM,CACZ,KAAA,MAAQ,CAAC,KAAK,OAEnB,KAAK,cAAc,IAAI,YAAY,KAAK,qBAAsB,CAC1D,QAAS,GACT,SAAU,GACV,OAAQ,CAAE,MAAO,KAAK,KAAM,CAC/B,CAAA,CAAC,CAAA,CACN,CAjEA,IAAI,MAAMC,EAAsB,CAC5B,KAAK,OAASA,EACd,KAAK,aAAa,eAAgB,OAAOA,CAAK,CAAC,EAC/C,KAAK,aAAa,gBAAiB,OAAOA,CAAK,CAAC,CACpD,CAGA,IAAI,OAAQ,CACR,OAAO,KAAK,MAChB,CAEA,QAAS,CACE,OAAAC,+BACX,CAKA,mBAAoB,CAChB,MAAM,kBAAkB,EACnB,KAAA,iBAAiB,QAAS,KAAK,iBAAiB,EAChD,KAAA,iBAAiB,QAAS,KAAK,YAAY,EAChD,OAAO,iBAAiB,KAAK,yBAA0B,KAAK,iBAAiB,KAAK,IAAI,CAAC,CAC3F,CAKA,sBAAuB,CACnB,MAAM,qBAAqB,EAEtB,KAAA,oBAAoB,QAAS,KAAK,iBAAiB,EACnD,KAAA,oBAAoB,QAAS,KAAK,YAAY,EAEnD,OAAO,oBAAoB,KAAK,yBAA0B,KAAK,iBAAiB,KAAK,IAAI,CAAC,CAC9F,CAoCA,iBAAiBF,EAAc,CACRA,EAAO,OAAO,QAC7B,KAAK,MAAQ,GAErB,CACJ,EAxFIG,EAAA,CADCC,EAAS,CAAE,KAAM,QAAS,CAAA,EAJlBN,EAKT,UAAA,SAAA,CAAA,EALSA,EAANK,EAAA,CADNE,EAAc,sBAAsB,CAAA,EACxBP,CAAA"}