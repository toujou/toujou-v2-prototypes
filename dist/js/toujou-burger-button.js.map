{"version":3,"file":"toujou-burger-button.js","sources":["../../src/components/toujou-burger-button/toujou-burger-button.ts"],"sourcesContent":["import { LitElement, html } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\n\n/**\n * Burger button class which dispatches events on click and listens to media query changes\n */\n@customElement('toujou-burger-button')\nexport class ToujouBurgerButton extends LitElement {\n    /**\n     * Internal state\n     */\n    @property({ type: Boolean })\n    _state: boolean = false;\n\n    // constants\n    stateChangeEventName = 'toujou-burger-button-state-change';\n    targetToggleAttribute = 'open-nav';\n    topbarMqlChangeEventName = 'toujou-topbar-breakpoint-change';\n\n    /**\n     * When the state changes we need to update the UI attributes on the relevant elements\n     * @param value\n     */\n    // @ts-ignore\n    set state(value: boolean): void {\n        this._state = value;\n        this.setAttribute('aria-pressed', String(value));\n        this.setAttribute('aria-expanded', String(value));\n    }\n    \n    // @ts-ignore\n    get state() {\n        return this._state;\n    }\n\n    render() {\n        return html`<slot name=\"content\"></slot>`\n    }\n\n    /**\n     * Add event listeners\n     */\n    connectedCallback() {\n        super.connectedCallback();\n        this.addEventListener('click', this._handleClickEvent);\n        this.addEventListener('keyup', this._handleKeyUp);\n        window.addEventListener(this.topbarMqlChangeEventName, this._handleMqlChange.bind(this));\n    }\n\n    /**\n     * Remove event listeners\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n\n        this.removeEventListener('click', this._handleClickEvent);\n        this.removeEventListener('keyup', this._handleKeyUp);\n\n        window.removeEventListener(this.topbarMqlChangeEventName, this._handleMqlChange.bind(this));\n    }\n\n    /**\n     * toggle the button state when the button is clicked\n     */\n    _handleClickEvent = () => {\n        this._toggleState();\n    }\n\n    /**\n     * Toggle the button state on keyboard 'space' or 'enter' press\n     * @param event\n     */\n    _handleKeyUp = (event: KeyboardEvent) => {\n        if (event.key === 'Enter' || event.code === 'Enter' || event.code === 'Space' || event.key === ' ') {\n            this._toggleState();\n        }\n    }\n\n    /**\n     * Toggle the button state and dispatch custom event so other elements can react to it\n     */\n    _toggleState = () => {\n        this.state = !this._state;\n\n        this.dispatchEvent(new CustomEvent(this.stateChangeEventName, {\n            bubbles: true,\n            composed: true,\n            detail: { state: this.state }\n        }));\n    }\n\n    /**\n     * Close the button when the window grows to desktop width\n     * @param event\n     */\n    _handleMqlChange(event: Event) {\n        if (!(<CustomEvent>event).detail.state) {\n            this.state = false;\n        }\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'toujou-burger-button': ToujouBurgerButton\n    }\n}\n"],"names":["ToujouBurgerButton","LitElement","constructor","super","arguments","this","_state","stateChangeEventName","targetToggleAttribute","topbarMqlChangeEventName","_handleClickEvent","_toggleState","_handleKeyUp","event","key","code","state","dispatchEvent","CustomEvent","bubbles","composed","detail","value","setAttribute","String","render","html","connectedCallback","addEventListener","window","_handleMqlChange","bind","disconnectedCallback","removeEventListener","__decorateClass","property","type","Boolean","prototype","customElement"],"mappings":"+XAOa,IAAAA,EAAN,cAAiCC,EAAjC,WAAAC,GAAAC,SAAAC,WAKeC,KAAAC,QAAA,EAGKD,KAAAE,qBAAA,oCACCF,KAAAG,sBAAA,WACGH,KAAAI,yBAAA,kCA+C3BJ,KAAAK,kBAAoB,KAChBL,KAAKM,cAAa,EAOtBN,KAAAO,aAAgBC,IACM,UAAdA,EAAMC,KAAkC,UAAfD,EAAME,MAAmC,UAAfF,EAAME,MAAkC,MAAdF,EAAMC,KACnFT,KAAKM,cACT,EAMJN,KAAAM,aAAe,KACNN,KAAAW,OAASX,KAAKC,OAEnBD,KAAKY,cAAc,IAAIC,YAAYb,KAAKE,qBAAsB,CAC1DY,SAAS,EACTC,UAAU,EACVC,OAAQ,CAAEL,MAAOX,KAAKW,SACxB,CACN,CAjEA,SAAIA,CAAMM,GACNjB,KAAKC,OAASgB,EACdjB,KAAKkB,aAAa,eAAgBC,OAAOF,IACzCjB,KAAKkB,aAAa,gBAAiBC,OAAOF,GAC9C,CAGA,SAAIN,GACA,OAAOX,KAAKC,MAChB,CAEA,MAAAmB,GACWC,OAAAA,CAAAA,8BACX,CAKA,iBAAAC,GACIxB,MAAMwB,oBACDtB,KAAAuB,iBAAiB,QAASvB,KAAKK,mBAC/BL,KAAAuB,iBAAiB,QAASvB,KAAKO,cACpCiB,OAAOD,iBAAiBvB,KAAKI,yBAA0BJ,KAAKyB,iBAAiBC,KAAK1B,MACtF,CAKA,oBAAA2B,GACI7B,MAAM6B,uBAED3B,KAAA4B,oBAAoB,QAAS5B,KAAKK,mBAClCL,KAAA4B,oBAAoB,QAAS5B,KAAKO,cAEvCiB,OAAOI,oBAAoB5B,KAAKI,yBAA0BJ,KAAKyB,iBAAiBC,KAAK1B,MACzF,CAoCA,gBAAAyB,CAAiBjB,GACMA,EAAOQ,OAAOL,QAC7BX,KAAKW,OAAQ,EAErB,GAvFAkB,EAAA,CADCC,EAAS,CAAEC,KAAMC,WAJTrC,EAKTsC,UAAA,SAAA,GALStC,EAANkC,EAAA,CADNK,EAAc,yBACFvC"}