{"version":3,"file":"toujou-snackbar.js","sources":["../../src/components/copied/toujou-snackbar/toujou-snackbar.styles.js","../../src/components/copied/toujou-snackbar/toujou-snackbar.js"],"sourcesContent":["import { css } from 'lit';\n\nexport const ToujouSnackbarStyles = css`\n  :host {\n    background-color: var(--toujou-snackbar-bg-color, #2c2c2c);\n    border: var(--toujou-snackbar-border, 1px solid var(--bg-color));\n    display: var(--toujou-snackbar-display, flex);\n    width: var(--toujou-snackbar-width, calc(100% - 2rem));\n    max-width: var(--toujou-snackbar-max-width, 640px);\n    position: var(--toujou-snackbar-position, fixed);\n    bottom: var(--toujou-snackbar-bottom, 1rem);\n    left: var(--toujou-snackbar-left, 1rem);\n    padding: var(--toujou-snackbar-padding, 1rem);\n    border-radius: var(--toujou-snackbar-border-radius, .25rem);\n    z-index: var(--toujou-snackbar-z-index, 100);\n    transform: var(--toujou-snackbar-transform, translateY(calc(100% + 1rem)));\n    opacity: var(--toujou-snackbar-opacity, 0);\n    transition: var(--toujou-snackbar-transition, all .25s ease-out);\n  }\n\n  :host([visible]) {\n    transform: var(--toujou-snackbar-visible-transform, translateY(0));\n    opacity: var(--toujou-snackbar-visible-opacity, 1);\n  }\n\n  .snackbar__message {\n    flex-grow: var(--toujou-snackbar-message-grow, 1);\n    color: var(--toujou-snackbar-message-color, white);\n    margin: var(--toujou-snackbar-message-margin, 0);\n    padding: var(--toujou-snackbar-message-padding, 0 1rem 0 0);\n  }\n\n  .snackbar__button {\n    border: var(--toujou-snackbar-button-border, none);\n    background: var(--toujou-snackbar-button-bg, none);\n    font-size: var(--toujou-snackbar-button-font-size, .875rem);\n    text-transform: var(--toujou-snackbar-button--text-transform, uppercase);\n    color: var(--toujou-snackbar-button-color, var(--primary-color));\n    margin: var(--toujou-snackbar-button-margin, 0);\n    outline: var(--toujou-snackbar-button-outline, none);\n  }\n\n  .snackbar__button:hover {\n    cursor: var(--toujou-snackbar-button-hover-cursor, pointer);\n    opacity: var(--toujou-snackbar-button-hover-opacity, .75);\n  }\n\n  :host([snackbartype='auto']) .snackbar__button {\n    display: none;\n  }\n\n  /* VARIANT SUCCESS */\n  :host([success]) {\n    border: var(--toujou-snackbar-success-border, 1px solid var(--success-color));\n  }\n\n  :host([success]) .snackbar__message {\n    color: var(--toujou-snackbar-success-message-color, var(--success-color));\n  }\n\n  :host([success]) .snackbar__button {\n    color: var(--toujou-snackbar-success-button-color, white);\n  }\n\n  /* VARIANT WARNING */\n  :host([warning]) {\n    border: var(--toujou-snackbar-warning-border, 1px solid var(--warning-color));\n  }\n\n  :host([warning]) .snackbar__message {\n    color: var(--toujou-snackbar-warning-message-color, var(--warning-color));\n  }\n\n  :host([warning]) .snackbar__button {\n    color: var(--toujou-snackbar-warning-button-color, white);\n  }\n\n  /* VARIANT ERROR */\n  :host([error]) {\n    border: var(--toujou-snackbar-error-border, 1px solid var(--error-color));\n  }\n\n  :host([error]) .snackbar__message {\n    color: var(--toujou-snackbar-error-message-color, var(--error-color));\n  }\n\n  :host([error]) .snackbar__button {\n    color: var(--toujou-snackbar-error-button-color, white);\n  }\n\n  /* VARIANT INFO */\n  :host([info]) {\n    border: var(--toujou-snackbar-info-border, 1px solid #81d4fa);\n  }\n\n  :host([info]) .snackbar__message {\n    color: var(--toujou-snackbar-info-message-color, #81d4fa);\n  }\n\n  :host([info]) .snackbar__button {\n    color: var(--toujou-snackbar-info-button-color, white);\n  }\n\n`;\n","import { LitElement, html } from 'lit';\n\nimport { ToujouSnackbarStyles } from \"./toujou-snackbar.styles.js\";\n\n\nclass ToujouSnackbar extends LitElement {\n  static get is() {\n    return 'toujou-snackbar';\n  }\n\n  static styles = [ ToujouSnackbarStyles ];\n\n  render() {\n    return html`\n      <p class=\"snackbar__message\">${this.message}</p>\n      <button class=\"snackbar__button\" @click=\"${this._handleButtonClick}\">${this.buttonText}</button>\n    `;\n  }\n\n  static get styles() {\n    return styles;\n  }\n\n  static get properties() {\n    return {\n      showing: {\n        type: Boolean,\n      },\n      cue: {\n        type: Array,\n      },\n      message: {\n        type: String,\n      },\n      buttonText: {\n        type: String,\n      },\n      snackbarType: {\n        type: String,\n      },\n    };\n  }\n\n  set showing(value) {\n    // eslint-disable-next-line no-unused-expressions\n    value ? this.setAttribute('visible', '') : this.removeAttribute('visible');\n  }\n\n  set snackbarType(value) {\n    this.setAttribute('snackbarType', value);\n  }\n\n  set variant(value) {\n    this.setAttribute(value, '');\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.cue = [];\n    this._animationStart = null;\n    this._possibleVariants = ['success', 'warning', 'error', 'info'];\n\n    window.addEventListener('toujou-add-snackbar', () => { this._removeHiddenState(); }, { once: true });\n    window.addEventListener('toujou-add-snackbar', (event) => { this._handleAddSnackbar(event); });\n  }\n\n  /**\n   * This function fires when the component is appended to the document.\n   */\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.showing = false;\n    this._timer = this._timer.bind(this);\n  }\n\n  /**\n   * This function runs every time one of the element's properties is updated\n   */\n  updated(_changedProperties) {\n    if (_changedProperties.has('cue') && this.cue.length > 0) {\n      this._showSnackbar(this.cue[0]);\n    } else if (_changedProperties.has('cue') && this.cue.length > 1 && this.cue[0].type === 'auto') {\n      this._checkAutoReplacement();\n    } else if (_changedProperties.has('cue') && this.cue.length === 0) {\n      this._resetVisibleValues();\n    }\n  }\n\n  /**\n   * Add a new snackbar to the cue\n   */\n  _handleAddSnackbar(event) {\n    this.cue = [...this.cue, event.detail];\n  }\n\n  /**\n   * Check if we need to set the '_wasReplaced' flag,\n   * so when the current snackbar is 'auto' and a new one comes,\n   * it is immediately replaced without waiting.\n   */\n  _checkAutoReplacement() {\n    if (this.cue.length > 1 && this.cue[0].type === 'auto') {\n      this._wasReplaced = true;\n    }\n  }\n\n  /**\n   * handle the snackbar's button click\n   */\n  _handleButtonClick() {\n    this._hideSnackbar();\n  }\n\n  /**\n   * Hide the snackbar and listen to end of 'hide transition'\n   */\n  _hideSnackbar() {\n    this.showing = false;\n    this.addEventListener('transitionend', this._afterHide);\n  }\n\n  /**\n   * Run after the 'hide transition' is ready.\n   * Remove snackbar from cue and clean up eventListeners\n   */\n  _afterHide() {\n    this._removeSnackbarFromCue();\n    this._removeSnackbarVariantAttribute();\n    this.removeEventListener('transitionend', this._afterHide);\n  }\n\n  /**\n   * Remove a snackbar from the cue\n   */\n  _removeSnackbarFromCue() {\n    this.cue = this.cue.slice(1);\n  }\n\n  /**\n   * Remove variant attribute used for previous snackbar\n   */\n  _removeSnackbarVariantAttribute() {\n    this._possibleVariants.forEach((variantName) => {\n      if (this.hasAttribute(variantName)) this.removeAttribute(variantName);\n    });\n  }\n\n  /**\n   * Reset some of the visible snackbar values to clean up the markup\n   */\n  _resetVisibleValues() {\n    this.message = null;\n    this.buttonText = null;\n  }\n\n  /**\n   * Show snackbar\n   */\n  _showSnackbar() {\n    setTimeout(() => {\n      this._setSnackbarValues(this.cue[0]);\n      if (this.cue[0].type === 'auto') {\n        this._animationStart = Date.now();\n        this._timer(this._animationStart, this._duration);\n      }\n      this.showing = true;\n      this.snackbarType = this.cue[0].type;\n    });\n  }\n\n  /**\n   * Remove hidden state on first time a snackbar is added\n   * (the snackbar has a default hidden state to prevent animation on load in IE and Edge)\n   */\n  _removeHiddenState() {\n    this.removeAttribute('hidden');\n  }\n\n  /**\n   * Timer to auto hide the snackbar\n   */\n  _timer() {\n    const rightNow = Date.now();\n    if (this._wasReplaced) {\n      this._removeSnackbarFromCue();\n      this._wasReplaced = false;\n      cancelAnimationFrame(this._timer);\n      return;\n    }\n    if (rightNow - this._animationStart >= this._duration) {\n      this._hideSnackbar();\n      cancelAnimationFrame(this._timer);\n    } else {\n      requestAnimationFrame(this._timer);\n    }\n  }\n\n  /**\n   * Set the snackbar's values received via 'add'snackbar' custom event\n   */\n  _setSnackbarValues(element) {\n    if (element.message) {\n      this.message = element.message;\n    }\n    if (element.variant && this._possibleVariants.includes(element.variant)) {\n      this.variant = element.variant;\n    }\n\n    this.buttonText = element.buttonText || 'OK';\n    this._duration = element.duration || 2500;\n  }\n}\n\ncustomElements.define(ToujouSnackbar.is, ToujouSnackbar);\n"],"names":["ToujouSnackbarStyles","css","ToujouSnackbar","LitElement","html","value","props","event","_changedProperties","variantName","rightNow","element","__publicField"],"mappings":"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"}