{"version":3,"file":"toujou-estimated-reading-time.js","sources":["../../src/components/toujou-estimated-reading-time/toujou-estimated-reading-time.ts"],"sourcesContent":["import { LitElement, html, PropertyValues } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\n\n@customElement('toujou-estimated-reading-time')\nexport class ToujouEstimatedReadingTime extends LitElement {\n    @property({ type: Number })\n    wordCount: number = 0;\n\n    @property({ type: Number })\n    duration: number = 0;\n\n    @property({ type: String, attribute: 'target-selector'})\n    targetSelector: string = '';\n\n    @property({ type: String, attribute: 'minutes-singular-text' })\n    minutesSingularText: string = \"minute\";\n\n    @property({ type: String, attribute: 'minutes-plural-text' })\n    minutesPluralText: string = \"minutes\"\n\n    @property({ type: String, attribute: 'less-than-text' })\n    lessThanText: string = \"under\";\n\n    @property({ type: Number, attribute: 'reading-speed' })\n    readingSpeed: number = 250;\n\n    get result() {\n        const durationInMinutes = Math.round(this.duration);\n        if (durationInMinutes === 0) {\n            return `${this.lessThanText} 1 ${this.minutesSingularText}`;\n        } else if (durationInMinutes === 1) {\n            return `1 ${this.minutesSingularText}`;\n        } else {\n            return `${durationInMinutes} ${this.minutesPluralText}`\n        }\n    }\n\n    render() {\n        return html`\n            <slot name=\"label\" class=\"label\"></slot>\n            ${this.result}\n        `\n    }\n\n    constructor() {\n        super();\n\n        if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n            setTimeout(this.#init);\n        } else {\n            document.addEventListener(\"DOMContentLoaded\", this.#init);\n        }\n    }\n\n    updated(changed: PropertyValues<this>) {\n        if (changed.has('wordCount')) {\n            this.duration = Math.ceil(this.wordCount / this.readingSpeed);\n        }\n    }\n\n    #init = () => {\n        const targetEl = document.querySelector(`${this.targetSelector}`);\n        if (!targetEl) return;\n\n        this.wordCount += this.#getWordsInElement(targetEl as HTMLElement);\n    }\n\n    #getWordsInElement(el: HTMLElement): number {\n        const textContent = el.textContent;\n        const cleanedUpText = textContent?.replace(/[\\n\\r]+|[\\s]{2,}/g, ' ');\n        const trimmedText = cleanedUpText?.trim();\n        const textWithoutSpaces = trimmedText?.split(\" \");\n        return textWithoutSpaces?.length || 0;\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'toujou-estimated-reading-time': ToujouEstimatedReadingTime\n    }\n}\n"],"names":["ToujouEstimatedReadingTime","_a","LitElement","__privateAdd","_getWordsInElement","_init","__privateSet","targetEl","__privateMethod","getWordsInElement_fn","__privateGet","durationInMinutes","html","changed","el","textContent","cleanedUpText","trimmedText","textWithoutSpaces","__decorateClass","property","customElement"],"mappings":"6uBAIa,IAAAA,GAANC,EAAA,cAAyCC,CAAW,CAwCvD,aAAc,CACJ,QAsBVC,EAAA,KAAAC,GAPAD,EAAA,KAAAE,EAAA,QAtDoB,KAAA,UAAA,EAGD,KAAA,SAAA,EAGM,KAAA,eAAA,GAGK,KAAA,oBAAA,SAGF,KAAA,kBAAA,UAGL,KAAA,aAAA,QAGA,KAAA,aAAA,IAoCvBC,EAAA,KAAAD,EAAQ,IAAM,CACV,MAAME,EAAW,SAAS,cAAc,GAAG,KAAK,gBAAgB,EAC3DA,IAEA,KAAA,WAAaC,EAAA,KAAKJ,EAAAK,GAAL,UAAwBF,GAAuB,GAjB7D,SAAS,aAAe,YAAc,SAAS,aAAe,cAC9D,WAAWG,EAAA,KAAKL,EAAK,EAEZ,SAAA,iBAAiB,mBAAoBK,EAAA,KAAKL,EAAK,CAEhE,CA1BA,IAAI,QAAS,CACT,MAAMM,EAAoB,KAAK,MAAM,KAAK,QAAQ,EAClD,OAAIA,IAAsB,EACf,GAAG,KAAK,kBAAkB,KAAK,sBAC/BA,IAAsB,EACtB,KAAK,KAAK,sBAEV,GAAGA,KAAqB,KAAK,mBAE5C,CAEA,QAAS,CACE,OAAAC;AAAAA;AAAAA,cAED,KAAK;AAAA,SAEf,CAYA,QAAQC,EAA+B,CAC/BA,EAAQ,IAAI,WAAW,IACvB,KAAK,SAAW,KAAK,KAAK,KAAK,UAAY,KAAK,YAAY,EAEpE,CAgBJ,EAdIR,EAAA,YAOAD,EAAA,YAAAK,WAAmBK,EAAyB,CACxC,MAAMC,EAAcD,EAAG,YACjBE,EAAgBD,GAAA,YAAAA,EAAa,QAAQ,oBAAqB,KAC1DE,EAAcD,GAAA,YAAAA,EAAe,OAC7BE,EAAoBD,GAAA,YAAAA,EAAa,MAAM,KAC7C,OAAOC,GAAA,YAAAA,EAAmB,SAAU,CACxC,EArEGjB,GAEHkB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,CAAA,EADjBpB,EAET,UAAA,YAAA,CAAA,EAGAmB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,CAAA,EAJjBpB,EAKT,UAAA,WAAA,CAAA,EAGAmB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,UAAW,kBAAkB,CAAA,EAP9CpB,EAQT,UAAA,iBAAA,CAAA,EAGAmB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,UAAW,wBAAyB,CAAA,EAVrDpB,EAWT,UAAA,sBAAA,CAAA,EAGAmB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,UAAW,sBAAuB,CAAA,EAbnDpB,EAcT,UAAA,oBAAA,CAAA,EAGAmB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,UAAW,iBAAkB,CAAA,EAhB9CpB,EAiBT,UAAA,eAAA,CAAA,EAGAmB,EAAA,CADCC,EAAS,CAAE,KAAM,OAAQ,UAAW,gBAAiB,CAAA,EAnB7CpB,EAoBT,UAAA,eAAA,CAAA,EApBSA,EAANmB,EAAA,CADNE,EAAc,+BAA+B,CAAA,EACjCrB,CAAA"}