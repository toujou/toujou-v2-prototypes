class t{constructor(t){this.navListItems=[],this.listItemSelector=".main-nav__list-item",this.hasSubNavAttribute="has-subnav",this.isOpenAttribute="is-open",this.listItemLevelAttribute="nav-item-level",this.listItemChevronSelector="main-nav__chevron",this._getNavListItems=()=>{this.navListItems=[...this.mainNavEl.querySelectorAll(this.listItemSelector)],this.navListItems?this.navListItems.forEach((t=>{t.hasSubNav=t.hasAttribute(this.hasSubNavAttribute),t.hasSubNav&&(t.isOpen=!1,t.level=t.getAttribute(this.listItemLevelAttribute),t.toggleEl=t.querySelector(".main-nav__chevron"),t.toggleEl.addEventListener("click",(()=>{this._toggleListItemState(t)})),t.addEventListener("keyup",(t=>{this._handleKeyUp(t,t.target)})))})):console.warn("TOUJOU: Main navigation has no list items!")},this._handleKeyUp=(t,e)=>{if(("Enter"===t.key||"Enter"===t.code||"Space"===t.code||" "===t.key)&&e&&e.classList.contains(this.listItemChevronSelector)){const t=e.closest(this.listItemSelector);this._toggleListItemState(t)}"Escape"!==t.key&&"Escape"!==t.code||this._closeAllNavListItems()},this._toggleListItemState=t=>{t.isOpen=!t.isOpen,t.isOpen?(t.setAttribute(this.isOpenAttribute,""),this._closeOtherOpenListItems(t),window.addEventListener("click",this._onWindowClick)):t.removeAttribute(this.isOpenAttribute)},this._closeOtherOpenListItems=t=>{var e;const s=null==(e=t.parentNode)?void 0:e.querySelectorAll(`${this.listItemSelector}[is-open]`);s&&s.forEach((e=>{e.isOpen&&e!==t&&this._toggleListItemState(e)}))},this._closeAllNavListItems=()=>{this.navListItems.forEach((t=>{t.isOpen&&(this._toggleListItemState(t),window.removeEventListener("click",this._onWindowClick))}))},this._onWindowClick=t=>{t.target.closest(".main-nav")||this._closeAllNavListItems()},this.mainNavEl=t,this._getNavListItems(),window.addEventListener("keyup",this._handleKeyUp)}}function e(){const e=document.querySelector(".main-nav");e&&!e.mainNav&&(e.mainNav=new t(e))}export{e as i};
//# sourceMappingURL=main-nav.js.map
