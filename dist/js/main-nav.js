class o{constructor(a){this.navListItems=[],this.listItemSelector=".main-nav__list-item",this.hasSubNavAttribute="has-subnav",this.isOpenAttribute="is-open",this.listItemLevelAttribute="nav-item-level",this.listItemChevronSelector="main-nav__chevron",this._getNavListItems=()=>{if(this.navListItems=[...this.mainNavEl.querySelectorAll(this.listItemSelector)],!this.navListItems){console.warn("TOUJOU: Main navigation has no list items!");return}this.navListItems.forEach(t=>{t.hasSubNav=t.hasAttribute(this.hasSubNavAttribute),t.hasSubNav&&(t.isOpen=!1,t.level=t.getAttribute(this.listItemLevelAttribute),t.toggleEl=t.querySelector(".main-nav__chevron"),t.toggleEl.addEventListener("click",()=>{this._toggleListItemState(t)}),t.addEventListener("keyup",e=>{this._handleKeyUp(e,e.target)}))})},this._handleKeyUp=(t,e)=>{if((t.key==="Enter"||t.code==="Enter"||t.code==="Space"||t.key===" ")&&e&&e.classList.contains(this.listItemChevronSelector)){const s=e.closest(this.listItemSelector);this._toggleListItemState(s)}(t.key==="Escape"||t.code==="Escape")&&this._closeAllNavListItems()},this._toggleListItemState=t=>{t.isOpen=!t.isOpen,t.isOpen?(t.setAttribute(this.isOpenAttribute,""),this._closeOtherOpenListItems(t),window.addEventListener("click",this._onWindowClick)):t.removeAttribute(this.isOpenAttribute)},this._closeOtherOpenListItems=t=>{var s;const e=(s=t.parentNode)==null?void 0:s.querySelectorAll(`${this.listItemSelector}[is-open]`);e&&e.forEach(n=>{n.isOpen&&n!==t&&this._toggleListItemState(n)})},this._closeAllNavListItems=()=>{this.navListItems.forEach(t=>{t.isOpen&&(this._toggleListItemState(t),window.removeEventListener("click",this._onWindowClick))})},this._onWindowClick=t=>{t.target.closest(".main-nav")||this._closeAllNavListItems()},this.mainNavEl=a,this._getNavListItems(),window.addEventListener("keyup",this._handleKeyUp)}}function r(){const i=document.querySelector(".main-nav");!i||i.mainNav||(i.mainNav=new o(i))}export{r as i};
//# sourceMappingURL=main-nav.js.map
