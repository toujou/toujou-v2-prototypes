import{s as t}from"./lit-element-CHDbfp5U.js";class e extends t{constructor(){super(...arguments),this._frameDuration=1e3/60,this._observer=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting&&t.intersectionRatio>=.75&&(this._dispatchCounterEvent("toujou-counter-animation-start"),this._animate(),this._observer.unobserve(this._numberEl))}))}),{threshold:1}),this._init=()=>{this._startNumberVal=parseFloat(this.startNumber),this._endNumberVal=parseFloat(this.endNumber),this._animationDuration=this._getAnimationDuration(),this._totalFrames=Math.round(this._animationDuration/this._frameDuration),this._pageLang=document.documentElement.getAttribute("lang")||"de-DE",this._observer.observe(this._numberEl),this._dispatchCounterEvent("toujou-counter-init")},this._animate=()=>{let t=0;const e=()=>{t++;const n=(i=t/this._totalFrames)*(2-i);var i;const r=this._endNumberVal>=this._startNumberVal?Math.round(this._startNumberVal+(this._endNumberVal-this._startNumberVal)*n):Math.round(this._startNumberVal-(this._startNumberVal-this._endNumberVal)*n);parseFloat(this._numberEl.textContent.replace(/,/g,""))!==r&&(this._numberEl.textContent=new Intl.NumberFormat(this._pageLang).format(r)),t<this._totalFrames?requestAnimationFrame(e):(this._numberEl.textContent=new Intl.NumberFormat(this._pageLang).format(this._endNumberVal),this._dispatchCounterEvent("toujou-counter-animation-end"))};requestAnimationFrame(e)},this._getAnimationDuration=()=>{this._animationSpeedVarName=`--counter-animation-duration-${this.animationSpeed?this.animationSpeed:"medium"}`;const t=getComputedStyle(this);let e=parseInt(t.getPropertyValue(`${this._animationSpeedVarName}`));return e||(console.warn("TOUJOU: could not get the counter animation duration variable. Using fallback value",this),e=3e3),e},this._dispatchCounterEvent=t=>{this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:{counter:this}}))}}static get is(){return"toujou-counter"}createRenderRoot(){return this}firstUpdated(t){super.firstUpdated(t),this.startNumber&&this.endNumber?(this._numberEl=this.querySelector(".counter__number-text"),this._numberEl?(this.animationSpeed||console.warn("TOUJOU: could not get the counter animation speed. Using default value!",this),window.matchMedia("(prefers-reduced-motion: reduce)").matches?this._numberEl.textContent=this.endNumber:this._init()):console.error("TOUJOU: could not get the counter number element!",this)):console.error("TOUJOU: could not get start and end values for the counter animation!",this)}}e.properties={startNumber:{type:String,attribute:"start-number"},endNumber:{type:String,attribute:"end-number"},animationSpeed:{type:String,attribute:"animation-speed"}},customElements.define(e.is,e);
//# sourceMappingURL=toujou-counter.js.map
