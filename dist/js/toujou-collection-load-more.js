import{_ as e}from"./tslib.es6-Br7-PHSQ.js";import{i as t,s as o,y as n}from"./lit-element-BhLV4vUl.js";import{e as i}from"./property-D5hxO1nL.js";import"./query-assigned-elements-CrfAJxAz.js";var s,r,l,c=t(s||(r=[":host {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n"],l||(l=r.slice(0)),s=Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(l)}}))));class a extends o{constructor(){super(...arguments),this.isLoading=!1,this.itemsContainerSelector=""}static get is(){return"toujou-collection-load-more"}render(){return this.isLoading?n`<slot name="spinner"></slot>`:n`<slot @click="${this._handleLoadMoreClick}"></slot>`}_handleLoadMoreClick(e){e.preventDefault();const t=e.target;if(null===t)return;const o=t.getAttribute("href");if(null===o||""===o)throw"Missing or empty href on toujou-collection-load-more link";const n=new URL(o,document.baseURI).href;this.isLoading=!0,fetch(n).then((e=>e.text())).then((e=>{const t=document.createElement("div");return t.innerHTML=e,t})).then((e=>{const t=[].slice.call(e.querySelector(this.itemsContainerSelector).children),o=e.querySelector(a.is);this.parentNode.querySelector(this.itemsContainerSelector).append(...t),o?this.replaceWith(o):this.remove()})).catch((e=>{window.dispatchEvent(new CustomEvent("toujou-collection-load-more-error",{bubbles:!0,composed:!0,detail:e}))})).finally((()=>{this.isLoading=!1,window.dispatchEvent(new CustomEvent("toujou-collection-load-more-done",{bubbles:!0,composed:!0}))}))}}a.styles=[c],e([i({type:Boolean,reflect:!0,attribute:"is-loading"})],a.prototype,"isLoading",void 0),e([i({type:String,attribute:"items-container-selector"})],a.prototype,"itemsContainerSelector",void 0),customElements.define(a.is,a);
//# sourceMappingURL=toujou-collection-load-more.js.map
