{"version":3,"file":"toujou-timeline.js","sources":["../../node_modules/@toujou/toujou-timeline/lib/index.js"],"sourcesContent":["import{__decorate as e}from\"tslib\";import{LitElement as t}from\"lit\";import{customElement as i}from\"lit/decorators.js\";const n=\"toujou-timeline-new-observation\",s=\"toujou-timeline-legend-year-click\";let r=class extends t{constructor(){super(...arguments),this._checkForLocationHash=()=>{const e=window.location.hash;if(!e)return;this.querySelector(`${e}`)&&(this._timelineContainerEl.scrollIntoView({behavior:\"smooth\",block:\"end\",inline:\"nearest\"}),this._scrollToYear(e.substring(1)))}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this._init()}_init(){if(this._years=this.querySelectorAll(\".timeline-item__year\"),!this._years)return;this._timelineContainerEl=this.querySelector(\".timeline__container\"),this._isHorizontalTimeline=\"horizontal\"===this.getAttribute(\"timeline-direction\"),this._isHorizontalTimeline&&this._checkForLocationHash();const e={rootMargin:\"-100px -100px -100px -100px\",threshold:this._createThresholdList(50)};this.observer=new IntersectionObserver(this._handleObserver.bind(this),e),this._years.forEach((e=>{this.observer.observe(e)})),this.dispatchEvent(new CustomEvent(\"toujou-timeline-ready\",{bubbles:!0,composed:!0,detail:this})),this.addEventListener(s,this._onLegendYearClick)}_handleObserver(e){const t=[];e.forEach((e=>{const i=e.target.id;i&&(t.push({yearId:i,isIntersecting:e.isIntersecting}),this.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0,detail:t})))}))}_createThresholdList(e){return[...Array(e).keys()].map((t=>t/e))}_onLegendYearClick(e){const t=e.detail;t&&this._scrollToYear(t)}_scrollToYear(e){const t=this.querySelector(`#${e}`);if(!t)return;const i=t.closest(\".timeline-item\");if(!i)return;const n=i.offsetLeft;this._timelineContainerEl.scrollTo({left:n,behavior:\"smooth\"})}};r=e([i(\"toujou-timeline\")],r);let o=class extends t{constructor(){super(...arguments),this.isActiveAttribute=\"is-active\"}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this._yearLinks=this.querySelectorAll(\".timeline-legend__link\"),this._yearLinks&&this._init()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(n,this._onTimelineObservations.bind(this))}_init(){window.addEventListener(n,this._onTimelineObservations.bind(this)),this._yearLinks.forEach((e=>{e.addEventListener(\"keyup\",this._handleYearLinkKeyUp)})),this._isHorizontalTimeline=!!this.closest('.timeline[timeline-direction=\"horizontal\"]'),this._isHorizontalTimeline&&this._initYearClicks(),this.dispatchEvent(new CustomEvent(\"toujou-timeline-legend-ready\",{bubbles:!0,composed:!0,detail:this}))}_initYearClicks(){this._yearLinks.forEach((e=>{e.addEventListener(\"click\",this._onYearLinkClick)}))}_onTimelineObservations(e){const t=e.detail;t&&t.forEach((e=>{const t=this.querySelector(`.timeline-legend__link[href=\"#${e.yearId}\"]`);t&&(e.isIntersecting?t.setAttribute(this.isActiveAttribute,\"\"):t.removeAttribute(this.isActiveAttribute))}))}_onYearLinkClick(e){let t;const i=e.currentTarget;if(!i)return;const n=i.href;if(!n)return;const r=n.split(\"#\");r.length>1&&(t=r.pop()),t&&(e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent(s,{bubbles:!0,composed:!0,detail:t})))}_handleYearLinkKeyUp(e){if(\"Enter\"===e.key||\"Enter\"===e.code||\"Space\"===e.code||\" \"===e.key){e.preventDefault(),e.stopPropagation();e.currentTarget.click()}}};o=e([i(\"toujou-timeline-legend\")],o);//# sourceMappingURL=index.js.map\n"],"names":["n","s","r","t","constructor","super","arguments","this","_checkForLocationHash","e","window","location","hash","querySelector","_timelineContainerEl","scrollIntoView","behavior","block","inline","_scrollToYear","substring","createRenderRoot","connectedCallback","_init","_years","querySelectorAll","_isHorizontalTimeline","getAttribute","rootMargin","threshold","_createThresholdList","observer","IntersectionObserver","_handleObserver","bind","forEach","observe","dispatchEvent","CustomEvent","bubbles","composed","detail","addEventListener","_onLegendYearClick","i","target","id","push","yearId","isIntersecting","Array","keys","map","closest","offsetLeft","scrollTo","left","o","isActiveAttribute","_yearLinks","disconnectedCallback","removeEventListener","_onTimelineObservations","_handleYearLinkKeyUp","_initYearClicks","_onYearLinkClick","setAttribute","removeAttribute","currentTarget","href","split","length","pop","preventDefault","stopPropagation","key","code","click"],"mappings":"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"}