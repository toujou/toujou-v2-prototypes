{"version":3,"file":"toujou-timeline.js","sources":["../../node_modules/@toujou/toujou-timeline/lib/index.js"],"sourcesContent":["import{__decorate as e}from\"tslib\";import{LitElement as t}from\"lit\";import{customElement as i}from\"lit/decorators.js\";const n=\"toujou-timeline-new-observation\",s=\"toujou-timeline-legend-year-click\";let r=class extends t{constructor(){super(...arguments),this._checkForLocationHash=()=>{const e=window.location.hash;if(!e)return;this.querySelector(`${e}`)&&(this._timelineContainerEl.scrollIntoView({behavior:\"smooth\",block:\"end\",inline:\"nearest\"}),this._scrollToYear(e.substring(1)))}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this._init()}_init(){if(this._years=this.querySelectorAll(\".timeline-item__year\"),!this._years)return;this._timelineContainerEl=this.querySelector(\".timeline__container\"),this._isHorizontalTimeline=\"horizontal\"===this.getAttribute(\"timeline-direction\"),this._isHorizontalTimeline&&this._checkForLocationHash();const e={rootMargin:\"-100px -100px -100px -100px\",threshold:this._createThresholdList(50)};this.observer=new IntersectionObserver(this._handleObserver.bind(this),e),this._years.forEach((e=>{this.observer.observe(e)})),this.dispatchEvent(new CustomEvent(\"toujou-timeline-ready\",{bubbles:!0,composed:!0,detail:this})),this.addEventListener(s,this._onLegendYearClick)}_handleObserver(e){const t=[];e.forEach((e=>{const i=e.target.id;i&&(t.push({yearId:i,isIntersecting:e.isIntersecting}),this.dispatchEvent(new CustomEvent(n,{bubbles:!0,composed:!0,detail:t})))}))}_createThresholdList(e){return[...Array(e).keys()].map((t=>t/e))}_onLegendYearClick(e){const t=e.detail;t&&this._scrollToYear(t)}_scrollToYear(e){const t=this.querySelector(`#${e}`);if(!t)return;const i=t.closest(\".timeline-item\");if(!i)return;const n=i.offsetLeft;this._timelineContainerEl.scrollTo({left:n,behavior:\"smooth\"})}};r=e([i(\"toujou-timeline\")],r);let o=class extends t{constructor(){super(...arguments),this.isActiveAttribute=\"is-active\"}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this._yearLinks=this.querySelectorAll(\".timeline-legend__link\"),this._yearLinks&&this._init()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(n,this._onTimelineObservations.bind(this))}_init(){window.addEventListener(n,this._onTimelineObservations.bind(this)),this._yearLinks.forEach((e=>{e.addEventListener(\"keyup\",this._handleYearLinkKeyUp)})),this._isHorizontalTimeline=!!this.closest('.timeline[timeline-direction=\"horizontal\"]'),this._isHorizontalTimeline&&this._initYearClicks(),this.dispatchEvent(new CustomEvent(\"toujou-timeline-legend-ready\",{bubbles:!0,composed:!0,detail:this}))}_initYearClicks(){this._yearLinks.forEach((e=>{e.addEventListener(\"click\",this._onYearLinkClick)}))}_onTimelineObservations(e){const t=e.detail;t&&t.forEach((e=>{const t=this.querySelector(`.timeline-legend__link[href=\"#${e.yearId}\"]`);t&&(e.isIntersecting?t.setAttribute(this.isActiveAttribute,\"\"):t.removeAttribute(this.isActiveAttribute))}))}_onYearLinkClick(e){let t;const i=e.currentTarget;if(!i)return;const n=i.href;if(!n)return;const r=n.split(\"#\");r.length>1&&(t=r.pop()),t&&(e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent(s,{bubbles:!0,composed:!0,detail:t})))}_handleYearLinkKeyUp(e){if(\"Enter\"===e.key||\"Enter\"===e.code||\"Space\"===e.code||\" \"===e.key){e.preventDefault(),e.stopPropagation();e.currentTarget.click()}}};o=e([i(\"toujou-timeline-legend\")],o);//# sourceMappingURL=index.js.map\n"],"names":["n","s","r","t","e","i","o"],"mappings":"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"}