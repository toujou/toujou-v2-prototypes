{"version":3,"file":"toujou-topbar.js","sources":["../../src/components/toujou-topbar/toujou-topbar.ts"],"sourcesContent":["import { LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\n\n/**\n * Topbar element\n */\n@customElement('toujou-topbar')\nexport class ToujouTopbar extends LitElement {\n    // Constants\n    burgerButtonStateChangeEvent = 'toujou-burger-button-state-change';\n    mqlChangeEventName = 'toujou-topbar-breakpoint-change';\n    openNavBodyAttribute = 'nav-is-open';\n\n    @property({ type: Boolean, reflect: true, attribute: 'open-nav' })\n    _isOpen: boolean = false;\n\n    @property({ type: MediaQueryList })\n    _mql: MediaQueryList = window.matchMedia(\"(max-width: 839px)\");\n\n    @property({ type: Boolean, })\n    _isMobile: boolean = this._mql.matches;\n\n    protected createRenderRoot(): Element | ShadowRoot {\n        return this;\n    }\n\n    /**\n     * Add event listeners\n     */\n    connectedCallback() {\n        super.connectedCallback();\n\n        window.addEventListener(this.burgerButtonStateChangeEvent, this._handleBurgerButtonClick.bind(this));\n        this._mql.addEventListener('change', this._handleMqlChange.bind(this));\n    }\n\n    /**\n     * Remove event listeners\n     */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n\n        window.removeEventListener(this.burgerButtonStateChangeEvent, this._handleBurgerButtonClick.bind(this));\n        this._mql.removeEventListener('change', this._handleMqlChange.bind(this));\n    }\n\n    /**\n     * Set correct isOpen value according to state of burger button click event\n     * Add / remove attribute from the body element, so we can prevent scroll in the background\n     * @param event\n     */\n    _handleBurgerButtonClick(event: Event) {\n        this._isOpen = (<CustomEvent>event).detail.state;\n        this._isOpen\n            ? document.body.setAttribute(this.openNavBodyAttribute, '')\n            : document.body.removeAttribute(this.openNavBodyAttribute);\n    }\n\n    /**\n     * When the window grows to desktop width:\n     *  - dispatch a \"media query change\" event that other elements (burger and navigation) can reacto to\n     *  - set the internal isOpen state to false\n     * @param event\n     */\n    _handleMqlChange(event: MediaQueryListEvent) {\n        const isMobile = event.matches;\n        this.dispatchEvent(new CustomEvent(this.mqlChangeEventName, {\n            bubbles: true,\n            composed: true,\n            detail: { state: isMobile }\n        }));\n\n        if (!isMobile) {\n            this._isOpen = false;\n        }\n    }\n}\n\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'toujou-topbar': ToujouTopbar\n    }\n}\n"],"names":["ToujouTopbar","LitElement","constructor","super","arguments","this","burgerButtonStateChangeEvent","mqlChangeEventName","openNavBodyAttribute","_isOpen","_mql","window","matchMedia","_isMobile","matches","createRenderRoot","connectedCallback","addEventListener","_handleBurgerButtonClick","bind","_handleMqlChange","disconnectedCallback","removeEventListener","event","detail","state","document","body","setAttribute","removeAttribute","isMobile","dispatchEvent","CustomEvent","bubbles","composed","__decorateClass","property","type","Boolean","reflect","attribute","prototype","MediaQueryList","customElement"],"mappings":"mXAOa,IAAAA,EAAN,cAA2BC,EAA3B,WAAAC,GAAAC,SAAAC,WAE4BC,KAAAC,6BAAA,oCACVD,KAAAE,mBAAA,kCACEF,KAAAG,qBAAA,cAGJH,KAAAI,SAAA,EAGIJ,KAAAK,KAAAC,OAAOC,WAAW,sBAGzCP,KAAAQ,UAAqBR,KAAKK,KAAKI,OAAA,CAErB,gBAAAC,GACC,OAAAV,IACX,CAKA,iBAAAW,GACIb,MAAMa,oBAENL,OAAOM,iBAAiBZ,KAAKC,6BAA8BD,KAAKa,yBAAyBC,KAAKd,OAC9FA,KAAKK,KAAKO,iBAAiB,SAAUZ,KAAKe,iBAAiBD,KAAKd,MACpE,CAKA,oBAAAgB,GACIlB,MAAMkB,uBAENV,OAAOW,oBAAoBjB,KAAKC,6BAA8BD,KAAKa,yBAAyBC,KAAKd,OACjGA,KAAKK,KAAKY,oBAAoB,SAAUjB,KAAKe,iBAAiBD,KAAKd,MACvE,CAOA,wBAAAa,CAAyBK,GAChBlB,KAAAI,QAAwBc,EAAOC,OAAOC,MAC3CpB,KAAKI,QACCiB,SAASC,KAAKC,aAAavB,KAAKG,qBAAsB,IACtDkB,SAASC,KAAKE,gBAAgBxB,KAAKG,qBAC7C,CAQA,gBAAAY,CAAiBG,GACb,MAAMO,EAAWP,EAAMT,QACvBT,KAAK0B,cAAc,IAAIC,YAAY3B,KAAKE,mBAAoB,CACxD0B,SAAS,EACTC,UAAU,EACVV,OAAQ,CAAEC,MAAOK,MAGhBA,IACDzB,KAAKI,SAAU,EAEvB,GA7DA0B,EAAA,CADCC,EAAS,CAAEC,KAAMC,QAASC,SAAS,EAAMC,UAAW,cAN5CxC,EAOTyC,UAAA,UAAA,GAGAN,EAAA,CADCC,EAAS,CAAEC,KAAMK,kBATT1C,EAUTyC,UAAA,OAAA,GAGAN,EAAA,CADCC,EAAS,CAAEC,KAAMC,WAZTtC,EAaTyC,UAAA,YAAA,GAbSzC,EAANmC,EAAA,CADNQ,EAAc,kBACF3C"}