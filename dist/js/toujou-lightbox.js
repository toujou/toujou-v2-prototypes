import{s as p}from"./lit-element-9d8fde0b.js";import{e as g}from"./custom-element-73470d87.js";import{e as l}from"./property-1027a1df.js";import"./query-assigned-elements-acf341e1.js";import{P as b,a as d,b as x}from"./index-f6667471.js";var u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,r=(e,t,i,o)=>{for(var s=o>1?void 0:o?c(t,i):t,n=e.length-1,a;n>=0;n--)(a=e[n])&&(s=(o?a(t,i,s):a(s))||s);return o&&s&&u(t,i,s),s};let h=class extends p{constructor(){super(...arguments),this.lightboxItems=[],this.lightboxParents=new Set,this.lightboxes=new Set,this.parentIdAttribute="lightbox-parent-id",this._handleUiRegister=e=>{e.pswp.ui.registerElement({name:"caption",order:9,isButton:!1,appendTo:"root",onInit:t=>{e.pswp.on("change",()=>this._handleChange(t,e))}})},this._handleChange=(e,t)=>{let i="";const o=t.pswp.currSlide.data.element;o&&(i=o.getAttribute("title")),e.textContent=i||""},this._handleLightboxItemsChange=()=>{this.lightboxItems.forEach(e=>{const t=e.closest(`[${this.parentIdAttribute}]`);this.lightboxParents.add(t)}),this._handleLightboxParentsChange()},this._handleLightboxParentsChange=()=>{this.lightboxParents.forEach(e=>{this._initLightbox(e)})},this._initLightbox=e=>{const t=new b({gallery:e,children:"[lightbox-item-id]",pswpModule:d,allowPanToNext:!0,preloaderDelay:0});t.on("uiRegister",()=>this._handleUiRegister(t)),t.videoPlugin=new x(t,{autoplay:!1}),t.init(),this.lightboxes.add(t)}}createRenderRoot(){return this}updated(e){e.has("lightboxItems")&&this._handleLightboxItemsChange()}connectedCallback(){super.connectedCallback(),this.lightboxItems=Array.from(document.querySelectorAll(".lightbox-item"))}};r([l({type:Array})],h.prototype,"lightboxItems",2);r([l({type:Set})],h.prototype,"lightboxParents",2);r([l({type:Set})],h.prototype,"lightboxes",2);h=r([g("toujou-photoswipe-lightbox")],h);
//# sourceMappingURL=toujou-lightbox.js.map
