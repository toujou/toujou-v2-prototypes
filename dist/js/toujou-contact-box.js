import{_ as t}from"./tslib.es6-Br7-PHSQ.js";import{s as e}from"./lit-element-D9Ui1_BQ.js";import{e as s}from"./custom-element-DPYutfhb.js";import{e as o}from"./property-D5hxO1nL.js";import"./query-assigned-elements-CrfAJxAz.js";let n=class extends e{constructor(){super(...arguments),this.openContactBoxBodyAttribute="contact-box-is-open",this.keyCodes={tab:9,escape:27},this.selectors={focusableEls:".contact-box__close, a.contact-box__link",contactStateInput:"#contact-state",closeButton:".contact-box__close"},this._closeButton=null,this._contactStateInput=null,this.state=!1,this._focusableEls=[],this._firstFocusableEl=null,this._lastFocusableEl=null,this._prevContentFocusEl=null}createRenderRoot(){return this}set _state(t){var e;this.state=t,this.state?(this.setAttribute("tabindex","0"),document.body.setAttribute(this.openContactBoxBodyAttribute,""),window.addEventListener("keydown",this._handleKeyDown.bind(this)),this._prevContentFocusEl=document.activeElement,this.focus()):(this.removeAttribute("tabindex"),this._contactStateInput.checked=!1,document.body.removeAttribute(this.openContactBoxBodyAttribute),window.removeEventListener("keydown",this._handleKeyDown),null===(e=this._prevContentFocusEl)||void 0===e||e.focus())}connectedCallback(){this._contactStateInput=document.querySelector(this.selectors.contactStateInput),this._closeButton=this.querySelector(this.selectors.closeButton),this._closeButton&&this._contactStateInput?this._init():console.error("TOUJOU: Could not find the necessary elements for the contact box")}disconnectedCallback(){var t,e;null===(t=this._contactStateInput)||void 0===t||t.removeEventListener("change",this._handleStateInputStateChange),this.removeEventListener("click",this._handleClick),null===(e=this._closeButton)||void 0===e||e.removeEventListener("click",this._handleCloseButtonClick)}_init(){var t,e;this._focusableEls=Array.from(this.querySelectorAll(this.selectors.focusableEls)),this._firstFocusableEl=this._focusableEls[0],this._lastFocusableEl=this._focusableEls[this._focusableEls.length-1],null===(t=this._contactStateInput)||void 0===t||t.addEventListener("change",this._handleStateInputStateChange.bind(this)),this.addEventListener("click",this._handleClick.bind(this)),null===(e=this._closeButton)||void 0===e||e.addEventListener("click",this._handleCloseButtonClick.bind(this))}_handleStateInputStateChange(){var t;this._state=(null===(t=this._contactStateInput)||void 0===t?void 0:t.checked)||!1}_handleClick(t){t.target===this&&this._closeButton&&(this._state=!1)}_handleKeyDown(t){this.state&&("Escape"===t.key||t.keyCode===this.keyCodes.escape?this._handleEscapePress():"Tab"!==t.key&&t.keyCode!==this.keyCodes.tab||this._handleTabPress(t))}_handleEscapePress(){this._state=!1}_handleTabPress(t){var e,s;t.shiftKey?document.activeElement===this._firstFocusableEl&&(t.preventDefault(),null===(e=this._lastFocusableEl)||void 0===e||e.focus()):document.activeElement===this._lastFocusableEl&&(t.preventDefault(),null===(s=this._firstFocusableEl)||void 0===s||s.focus())}_handleCloseButtonClick(){this._state=!1}};t([o({type:HTMLElement})],n.prototype,"_closeButton",void 0),t([o({type:HTMLInputElement})],n.prototype,"_contactStateInput",void 0),t([o({type:Boolean})],n.prototype,"state",void 0),t([o({type:HTMLElement})],n.prototype,"_focusableEls",void 0),t([o({type:HTMLElement})],n.prototype,"_firstFocusableEl",void 0),t([o({type:HTMLElement})],n.prototype,"_lastFocusableEl",void 0),t([o({type:HTMLElement})],n.prototype,"_prevContentFocusEl",void 0),n=t([s("toujou-contact-box")],n);
//# sourceMappingURL=toujou-contact-box.js.map
