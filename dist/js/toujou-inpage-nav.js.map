{"version":3,"file":"toujou-inpage-nav.js","sources":["../../node_modules/@toujou/toujou-inpage-nav/lib/index.js"],"sourcesContent":["import{__decorate as t}from\"tslib\";import{css as e,LitElement as i,html as n}from\"lit\";import{property as r,customElement as s}from\"lit/decorators.js\";var o,a,h,l=e(o||(a=[\":host {\\n    display: var(--toujou-third-party-content-display, flex);\\n    -webkit-box-align: var(--toujou-third-party-content-align-items, stretch);\\n        -ms-flex-align: var(--toujou-third-party-content-align-items, stretch);\\n            align-items: var(--toujou-third-party-content-align-items, stretch);\\n    -webkit-box-pack: var(--toujou-third-party-content-justify-content, center);\\n        -ms-flex-pack: var(--toujou-third-party-content-justify-content, center);\\n            justify-content: var(--toujou-third-party-content-justify-content, center);\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: var(--toujou-third-party-content-flex-direction, column);\\n            flex-direction: var(--toujou-third-party-content-flex-direction, column);\\n    position: var(--toujou-third-party-content-position, relative);\\n    top: var(--toujou-third-party-content-top, 0);\\n    left: var(--toujou-third-party-content-left, 0);\\n    height: var(--toujou-third-party-content-height, 100%);\\n    width: var(--toujou-third-party-content-width, 100%);\\n}\\n\\n:host([contenttype='maps']) {\\n    position: var(--toujou-third-party-content-maps-position, absolute);\\n}\\n\\niframe {\\n    border: var(--toujou-third-party-content-iframe-border, none);\\n    position: var(--toujou-third-party-content-iframe-position, absolute);\\n    height: var(--toujou-third-party-content-iframe-height, 100%);\\n    width: var(--toujou-third-party-content-iframe-width, 100%);\\n}\\n\\n:host([contenttype='html']) iframe {\\n    position: var(--toujou-third-party-content-html-iframe-position, relative);\\n}\\n\"],h||(h=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(h)}}))));function c(t){if(!t)return 0;if(t.classList.contains(\"inpage-nav__label\")){const e=getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);return t.offsetWidth+i}return t.offsetWidth}function u(t,e,i,n){const r=function(t){let e=0;return Object.keys(t).forEach((i=>{const n=getComputedStyle(t[i].item),r=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);e+=t[i].item.offsetWidth+r})),e}(t);return r+c(e)+c(i)*(n?3:1)}let p=class extends i{set _currentSectionID(t){this._navItems&&(t?this._previousCurrentSectionID!==t&&(this._updateLabelVisibility(t),this._updateNavItemsState(t)):(this._updateLabelVisibility(!1),this._updateNavItemsState(null)))}render(){return n`\n      <slot></slot>\n      <slot name=\"cta\" id=\"cta\"></slot>\n    `}constructor(){super(),this.isMobile=!1,this.mobileOpen=!1,this._targetSections=new Map,this.intersectionObserverNumberOfSteps=50,this.mobileBreakpointOffset=this._getMobileBreakpointOffset(),this._currentSectionID=null,this._isCentered=this.hasAttribute(\"centered\"),this._isAuto=this.hasAttribute(\"is-auto\"),this._targetSections=new Map,this._rootMarginsSize=-200,setTimeout((()=>{this._init()}))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(\"resize\",this._checkIsMobileState.bind(this)),this._toggle.removeEventListener(\"click\",this._mobileOpenToggle.bind(this)),this.addEventListener(\"click\",this._handleNavClick.bind(this))}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),\"ismobile\"!==t&&\"mobileopen\"!==t||this._updateAriaAttributes(t)}_init(){this._getChildrenElements(),this._navItems?(this._toggle=this.querySelector(\".inpage-nav__toggle\"),this._checkIsMobileState(),this._addTargetObservers(),window.addEventListener(\"resize\",this._checkIsMobileState.bind(this)),this._toggle.addEventListener(\"click\",this._mobileOpenToggle.bind(this)),this.addEventListener(\"click\",this._handleNavClick.bind(this))):console.error(\"Could not initialize the inpage-nav. Error: No nav items!!!\")}_getChildrenElements(){this._navItems={},this._navLabel=this.querySelector(\".inpage-nav__label\")||null,this._cta=this.querySelector('[slot=\"cta\"]');(this.querySelectorAll(\".inpage-nav__item\")||null).forEach(((t,e)=>{const i=t.querySelector(\"a\").getAttribute(\"href\");this._navItems[e]={item:t,link:i,target:document.querySelector(i)}}))}_checkIsMobileState(){this.isMobile=!1,window.requestAnimationFrame((()=>{this._navBreakpoint=u(this._navItems,this._navLabel,this._cta,this._isCentered),this.isMobile=this._navBreakpoint>this.offsetWidth-this.mobileBreakpointOffset}))}_addTargetObservers(){const t={rootMargin:`${this._rootMarginsSize}px 0px ${this._rootMarginsSize}px 0px`,threshold:this._createThresholdList(this.intersectionObserverNumberOfSteps)};this.observer=new IntersectionObserver(this._handleObserver.bind(this),t),Object.keys(this._navItems).forEach((t=>{const e=this._navItems[t].target;if(!(e instanceof HTMLElement))return;this._targetSections.set(e,!1);const i=e.hasAttribute(\"id\")?e:e.nextElementSibling;this.observer.observe(i)}))}_createThresholdList(t){return[...Array(t).keys()].map((e=>e/t))}_handleObserver(t){t.forEach((t=>{this._targetSections.set(t.target,t.isIntersecting)})),this._updateSectionsAttributes(),this._updateActiveItemUI()}_updateSectionsAttributes(){let t=!1;this._targetSections.forEach(((e,i)=>{i.toggleAttribute(\"inpageNavTargetVisible\",!t&&e),e&&!t&&(t=e)}))}_updateActiveItemUI(){const t=document.querySelector(\"*[inpageNavTargetVisible]\")||null;t?this._currentSectionID=`#${t.id.toString()}`:!t&&this._navLabel?this._currentSectionID=null:t||this._navLabel||(this._currentSectionID=this._navItems[0].link)}_mobileOpenToggle(){this.mobileOpen=!this.mobileOpen}_handleNavClick(t){t.target.classList.contains(\"inpage-nav__link\")&&(this.mobileOpen=!1)}_updateAriaAttributes(t){\"mobileopen\"===t?this._toggle.setAttribute(\"aria-expanded\",String(this.mobileOpen)):\"ismobile\"===t&&this._toggle.setAttribute(\"aria-hidden\",String(!this.isMobile))}_updateLabelVisibility(t){this._navLabel&&(t?this._navLabel.removeAttribute(\"visible\"):this._navLabel.setAttribute(\"visible\",\"\"))}_updateNavItemsState(t){const e=this.querySelector(\".inpage-nav__item[active]\");e&&(e.removeAttribute(\"active\"),e.removeAttribute(\"aria-current\")),Object.keys(this._navItems).forEach((e=>{this._navItems[e].link===t&&(this._navItems[e].item.setAttribute(\"active\",\"\"),this._navItems[e].item.setAttribute(\"aria-current\",\"true\"))})),this._previousCurrentSectionID=t}_getMobileBreakpointOffset(){const t=getComputedStyle(document.documentElement);return parseInt(t.getPropertyValue(\"--toujou-inpage-nav-breakpoint-offset\")||\"180\",10)}};p.styles=[l],t([r({type:Boolean,reflect:!0})],p.prototype,\"isMobile\",void 0),t([r({type:Boolean,reflect:!0})],p.prototype,\"mobileOpen\",void 0),t([r({type:Map})],p.prototype,\"_targetSections\",void 0),p=t([s(\"toujou-inpage-nav\")],p);//# sourceMappingURL=index.js.map\n"],"names":["o","a","h","l","e","slice","Object","freeze","defineProperties","raw","value","c","t","classList","contains","getComputedStyle","i","parseFloat","paddingLeft","paddingRight","offsetWidth","p","_currentSectionID","this","_navItems","_previousCurrentSectionID","_updateLabelVisibility","_updateNavItemsState","render","n","constructor","super","isMobile","mobileOpen","_targetSections","Map","intersectionObserverNumberOfSteps","mobileBreakpointOffset","_getMobileBreakpointOffset","_isCentered","hasAttribute","_isAuto","_rootMarginsSize","setTimeout","_init","disconnectedCallback","window","removeEventListener","_checkIsMobileState","bind","_toggle","_mobileOpenToggle","addEventListener","_handleNavClick","attributeChangedCallback","_updateAriaAttributes","_getChildrenElements","querySelector","_addTargetObservers","console","error","_navLabel","_cta","querySelectorAll","forEach","getAttribute","item","link","target","document","requestAnimationFrame","_navBreakpoint","keys","r","rootMargin","threshold","_createThresholdList","observer","IntersectionObserver","_handleObserver","HTMLElement","set","nextElementSibling","observe","Array","map","isIntersecting","_updateSectionsAttributes","_updateActiveItemUI","toggleAttribute","id","toString","setAttribute","String","removeAttribute","documentElement","parseInt","getPropertyValue","styles","type","Boolean","reflect","prototype","s"],"mappings":"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"}