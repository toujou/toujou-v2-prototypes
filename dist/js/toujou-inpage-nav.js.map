{"version":3,"file":"toujou-inpage-nav.js","sources":["../../node_modules/@toujou/toujou-inpage-nav/lib/index.js"],"sourcesContent":["import{__decorate as t}from\"tslib\";import{css as e,LitElement as i,html as n}from\"lit\";import{property as r,customElement as s}from\"lit/decorators.js\";var o,a,h,l=e(o||(a=[\":host {\\n    display: var(--toujou-third-party-content-display, flex);\\n    -webkit-box-align: var(--toujou-third-party-content-align-items, stretch);\\n        -ms-flex-align: var(--toujou-third-party-content-align-items, stretch);\\n            align-items: var(--toujou-third-party-content-align-items, stretch);\\n    -webkit-box-pack: var(--toujou-third-party-content-justify-content, center);\\n        -ms-flex-pack: var(--toujou-third-party-content-justify-content, center);\\n            justify-content: var(--toujou-third-party-content-justify-content, center);\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: var(--toujou-third-party-content-flex-direction, column);\\n            flex-direction: var(--toujou-third-party-content-flex-direction, column);\\n    position: var(--toujou-third-party-content-position, relative);\\n    top: var(--toujou-third-party-content-top, 0);\\n    left: var(--toujou-third-party-content-left, 0);\\n    height: var(--toujou-third-party-content-height, 100%);\\n    width: var(--toujou-third-party-content-width, 100%);\\n}\\n\\n:host([contenttype='maps']) {\\n    position: var(--toujou-third-party-content-maps-position, absolute);\\n}\\n\\niframe {\\n    border: var(--toujou-third-party-content-iframe-border, none);\\n    position: var(--toujou-third-party-content-iframe-position, absolute);\\n    height: var(--toujou-third-party-content-iframe-height, 100%);\\n    width: var(--toujou-third-party-content-iframe-width, 100%);\\n}\\n\\n:host([contenttype='html']) iframe {\\n    position: var(--toujou-third-party-content-html-iframe-position, relative);\\n}\\n\"],h||(h=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(h)}}))));function c(t){if(!t)return 0;if(t.classList.contains(\"inpage-nav__label\")){const e=getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);return t.offsetWidth+i}return t.offsetWidth}function u(t,e,i,n){const r=function(t){let e=0;return Object.keys(t).forEach((i=>{const n=getComputedStyle(t[i].item),r=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);e+=t[i].item.offsetWidth+r})),e}(t);return r+c(e)+c(i)*(n?3:1)}let p=class extends i{set _currentSectionID(t){this._navItems&&(t?this._previousCurrentSectionID!==t&&(this._updateLabelVisibility(t),this._updateNavItemsState(t)):(this._updateLabelVisibility(!1),this._updateNavItemsState(null)))}render(){return n`\n      <slot></slot>\n      <slot name=\"cta\" id=\"cta\"></slot>\n    `}constructor(){super(),this.isMobile=!1,this.mobileOpen=!1,this._targetSections=new Map,this.intersectionObserverNumberOfSteps=50,this.mobileBreakpointOffset=this._getMobileBreakpointOffset(),this._currentSectionID=null,this._isCentered=this.hasAttribute(\"centered\"),this._isAuto=this.hasAttribute(\"is-auto\"),this._targetSections=new Map,this._rootMarginsSize=-200,setTimeout((()=>{this._init()}))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(\"resize\",this._checkIsMobileState.bind(this)),this._toggle.removeEventListener(\"click\",this._mobileOpenToggle.bind(this)),this.addEventListener(\"click\",this._handleNavClick.bind(this))}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),\"ismobile\"!==t&&\"mobileopen\"!==t||this._updateAriaAttributes(t)}_init(){this._getChildrenElements(),this._navItems?(this._toggle=this.querySelector(\".inpage-nav__toggle\"),this._checkIsMobileState(),this._addTargetObservers(),window.addEventListener(\"resize\",this._checkIsMobileState.bind(this)),this._toggle.addEventListener(\"click\",this._mobileOpenToggle.bind(this)),this.addEventListener(\"click\",this._handleNavClick.bind(this))):console.error(\"Could not initialize the inpage-nav. Error: No nav items!!!\")}_getChildrenElements(){this._navItems={},this._navLabel=this.querySelector(\".inpage-nav__label\")||null,this._cta=this.querySelector('[slot=\"cta\"]');(this.querySelectorAll(\".inpage-nav__item\")||null).forEach(((t,e)=>{const i=t.querySelector(\"a\").getAttribute(\"href\");this._navItems[e]={item:t,link:i,target:document.querySelector(i)}}))}_checkIsMobileState(){this.isMobile=!1,window.requestAnimationFrame((()=>{this._navBreakpoint=u(this._navItems,this._navLabel,this._cta,this._isCentered),this.isMobile=this._navBreakpoint>this.offsetWidth-this.mobileBreakpointOffset}))}_addTargetObservers(){const t={rootMargin:`${this._rootMarginsSize}px 0px ${this._rootMarginsSize}px 0px`,threshold:this._createThresholdList(this.intersectionObserverNumberOfSteps)};this.observer=new IntersectionObserver(this._handleObserver.bind(this),t),Object.keys(this._navItems).forEach((t=>{const e=this._navItems[t].target;if(!(e instanceof HTMLElement))return;this._targetSections.set(e,!1);const i=e.hasAttribute(\"id\")?e:e.nextElementSibling;this.observer.observe(i)}))}_createThresholdList(t){return[...Array(t).keys()].map((e=>e/t))}_handleObserver(t){t.forEach((t=>{this._targetSections.set(t.target,t.isIntersecting)})),this._updateSectionsAttributes(),this._updateActiveItemUI()}_updateSectionsAttributes(){let t=!1;this._targetSections.forEach(((e,i)=>{i.toggleAttribute(\"inpageNavTargetVisible\",!t&&e),e&&!t&&(t=e)}))}_updateActiveItemUI(){const t=document.querySelector(\"*[inpageNavTargetVisible]\")||null;t?this._currentSectionID=`#${t.id.toString()}`:!t&&this._navLabel?this._currentSectionID=null:t||this._navLabel||(this._currentSectionID=this._navItems[0].link)}_mobileOpenToggle(){this.mobileOpen=!this.mobileOpen}_handleNavClick(t){t.target.classList.contains(\"inpage-nav__link\")&&(this.mobileOpen=!1)}_updateAriaAttributes(t){\"mobileopen\"===t?this._toggle.setAttribute(\"aria-expanded\",String(this.mobileOpen)):\"ismobile\"===t&&this._toggle.setAttribute(\"aria-hidden\",String(!this.isMobile))}_updateLabelVisibility(t){this._navLabel&&(t?this._navLabel.removeAttribute(\"visible\"):this._navLabel.setAttribute(\"visible\",\"\"))}_updateNavItemsState(t){const e=this.querySelector(\".inpage-nav__item[active]\");e&&(e.removeAttribute(\"active\"),e.removeAttribute(\"aria-current\")),Object.keys(this._navItems).forEach((e=>{this._navItems[e].link===t&&(this._navItems[e].item.setAttribute(\"active\",\"\"),this._navItems[e].item.setAttribute(\"aria-current\",\"true\"))})),this._previousCurrentSectionID=t}_getMobileBreakpointOffset(){const t=getComputedStyle(document.documentElement);return parseInt(t.getPropertyValue(\"--toujou-inpage-nav-breakpoint-offset\")||\"180\",10)}};p.styles=[l],t([r({type:Boolean,reflect:!0})],p.prototype,\"isMobile\",void 0),t([r({type:Boolean,reflect:!0})],p.prototype,\"mobileOpen\",void 0),t([r({type:Map})],p.prototype,\"_targetSections\",void 0),p=t([s(\"toujou-inpage-nav\")],p);//# sourceMappingURL=index.js.map\n"],"names":["o","a","h","l","e","c","u","n","t","i","r","p","s"],"mappings":"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"}