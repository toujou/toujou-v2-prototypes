{"version":3,"file":"toujou-counter.js","sources":["../../node_modules/@toujou/toujou-counter/lib/index.js"],"sourcesContent":["import{LitElement as t}from\"lit\";const e=.75,n=1,i=3e3,r=\"medium\",a=\"de-DE\",s=\"toujou-counter-init\",o=\"toujou-counter-animation-start\",u=\"toujou-counter-animation-end\";class m extends t{constructor(){super(...arguments),this._frameDuration=1e3/60,this._observer=new IntersectionObserver(((t,n)=>{t.forEach((t=>{t.isIntersecting&&t.intersectionRatio>=e&&(this._dispatchCounterEvent(o),this._animate(),this._observer.unobserve(this._numberEl))}))}),{threshold:n}),this._init=()=>{this._startNumberVal=parseFloat(this.startNumber),this._endNumberVal=parseFloat(this.endNumber),this._animationDuration=this._getAnimationDuration(),this._totalFrames=Math.round(this._animationDuration/this._frameDuration),this._pageLang=document.documentElement.getAttribute(\"lang\")||a,this._observer.observe(this._numberEl),this._dispatchCounterEvent(s)},this._animate=()=>{let t=0;const e=()=>{t++;const n=(i=t/this._totalFrames)*(2-i);var i;const r=this._endNumberVal>=this._startNumberVal?Math.round(this._startNumberVal+(this._endNumberVal-this._startNumberVal)*n):Math.round(this._startNumberVal-(this._startNumberVal-this._endNumberVal)*n);parseFloat(this._numberEl.textContent.replace(/,/g,\"\"))!==r&&(this._numberEl.textContent=new Intl.NumberFormat(this._pageLang).format(r)),t<this._totalFrames?requestAnimationFrame(e):(this._numberEl.textContent=new Intl.NumberFormat(this._pageLang).format(this._endNumberVal),this._dispatchCounterEvent(u))};requestAnimationFrame(e)},this._getAnimationDuration=()=>{this._animationSpeedVarName=`--counter-animation-duration-${this.animationSpeed?this.animationSpeed:r}`;const t=getComputedStyle(this);let e=parseInt(t.getPropertyValue(`${this._animationSpeedVarName}`));return e||(console.warn(\"TOUJOU: could not get the counter animation duration variable. Using fallback value\",this),e=i),e},this._dispatchCounterEvent=t=>{this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0,detail:{counter:this}}))}}static get is(){return\"toujou-counter\"}createRenderRoot(){return this}firstUpdated(t){super.firstUpdated(t),this.startNumber&&this.endNumber?(this._numberEl=this.querySelector(\".counter__number-text\"),this._numberEl?(this.animationSpeed||console.warn(\"TOUJOU: could not get the counter animation speed. Using default value!\",this),window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches?this._numberEl.textContent=this.endNumber:this._init()):console.error(\"TOUJOU: could not get the counter number element!\",this)):console.error(\"TOUJOU: could not get start and end values for the counter animation!\",this)}}m.properties={startNumber:{type:String,attribute:\"start-number\"},endNumber:{type:String,attribute:\"end-number\"},animationSpeed:{type:String,attribute:\"animation-speed\"}},customElements.define(m.is,m);//# sourceMappingURL=index.js.map\n"],"names":["m","t","constructor","super","arguments","this","_frameDuration","_observer","IntersectionObserver","n","forEach","isIntersecting","intersectionRatio","_dispatchCounterEvent","_animate","unobserve","_numberEl","threshold","_init","_startNumberVal","parseFloat","startNumber","_endNumberVal","endNumber","_animationDuration","_getAnimationDuration","_totalFrames","Math","round","_pageLang","document","documentElement","getAttribute","observe","e","i","r","textContent","replace","Intl","NumberFormat","format","requestAnimationFrame","_animationSpeedVarName","animationSpeed","getComputedStyle","parseInt","getPropertyValue","console","warn","dispatchEvent","CustomEvent","bubbles","composed","detail","counter","is","createRenderRoot","firstUpdated","querySelector","window","matchMedia","matches","error","properties","type","String","attribute","customElements","define"],"mappings":"8CAAwK,MAAMA,UAAUC,EAAE,WAAAC,GAAcC,SAASC,WAAWC,KAAKC,eAAe,IAAI,GAAGD,KAAKE,UAAU,IAAIC,sBAAsB,CAACP,EAAEQ,KAAKR,EAAES,SAAST,IAAIA,EAAEU,gBAAgBV,EAAEW,mBAAlS,MAAyTP,KAAKQ,sBAAjQ,kCAA0RR,KAAKS,WAAWT,KAAKE,UAAUQ,UAAUV,KAAKW,WAAS,GAAG,GAAK,CAACC,UAAjZ,IAA+ZZ,KAAKa,MAAM,KAAKb,KAAKc,gBAAgBC,WAAWf,KAAKgB,aAAahB,KAAKiB,cAAcF,WAAWf,KAAKkB,WAAWlB,KAAKmB,mBAAmBnB,KAAKoB,wBAAwBpB,KAAKqB,aAAaC,KAAKC,MAAMvB,KAAKmB,mBAAmBnB,KAAKC,gBAAgBD,KAAKwB,UAAUC,SAASC,gBAAgBC,aAAa,SAA9qB,QAAyrB3B,KAAKE,UAAU0B,QAAQ5B,KAAKW,WAAWX,KAAKQ,sBAA3tB,sBAAkvB,EAAGR,KAAKS,SAAS,KAAK,IAAIb,EAAE,EAAE,MAAMiC,EAAE,KAAKjC,IAAI,MAAMQ,GAAG0B,EAAElC,EAAEI,KAAKqB,eAAe,EAAES,GAAG,IAAIA,EAAE,MAAMC,EAAE/B,KAAKiB,eAAejB,KAAKc,gBAAgBQ,KAAKC,MAAMvB,KAAKc,iBAAiBd,KAAKiB,cAAcjB,KAAKc,iBAAiBV,GAAGkB,KAAKC,MAAMvB,KAAKc,iBAAiBd,KAAKc,gBAAgBd,KAAKiB,eAAeb,GAAGW,WAAWf,KAAKW,UAAUqB,YAAYC,QAAQ,KAAK,OAAOF,IAAI/B,KAAKW,UAAUqB,YAAY,IAAIE,KAAKC,aAAanC,KAAKwB,WAAWY,OAAOL,IAAInC,EAAEI,KAAKqB,aAAagB,sBAAsBR,IAAI7B,KAAKW,UAAUqB,YAAY,IAAIE,KAAKC,aAAanC,KAAKwB,WAAWY,OAAOpC,KAAKiB,eAAejB,KAAKQ,sBAAtvC,gCAA6wC,EAAI6B,sBAAsBR,EAAC,EAAG7B,KAAKoB,sBAAsB,KAAKpB,KAAKsC,uBAAuB,gCAAgCtC,KAAKuC,eAAevC,KAAKuC,eAAh/C,WAAmgD,MAAM3C,EAAE4C,iBAAiBxC,MAAM,IAAI6B,EAAEY,SAAS7C,EAAE8C,iBAAiB,GAAG1C,KAAKsC,2BAA2B,OAAOT,IAAIc,QAAQC,KAAK,sFAAsF5C,MAAM6B,EAAjuD,KAAsuDA,CAAAA,EAAG7B,KAAKQ,sBAAsBZ,IAAII,KAAK6C,cAAc,IAAIC,YAAYlD,EAAE,CAACmD,SAAQ,EAAGC,UAAS,EAAGC,OAAO,CAACC,QAAQlD,QAAO,CAAE,CAAC,aAAWmD,GAAK,MAAM,gBAAgB,CAAC,gBAAAC,GAAmB,OAAOpD,IAAI,CAAC,YAAAqD,CAAazD,GAAGE,MAAMuD,aAAazD,GAAGI,KAAKgB,aAAahB,KAAKkB,WAAWlB,KAAKW,UAAUX,KAAKsD,cAAc,yBAAyBtD,KAAKW,WAAWX,KAAKuC,gBAAgBI,QAAQC,KAAK,0EAA0E5C,MAAMuD,OAAOC,WAAW,oCAAoCC,QAAQzD,KAAKW,UAAUqB,YAAYhC,KAAKkB,UAAUlB,KAAKa,SAAS8B,QAAQe,MAAM,oDAAoD1D,OAAO2C,QAAQe,MAAM,wEAAwE1D,KAAK,EAAEL,EAAEgE,WAAW,CAAC3C,YAAY,CAAC4C,KAAKC,OAAOC,UAAU,gBAAgB5C,UAAU,CAAC0C,KAAKC,OAAOC,UAAU,cAAcvB,eAAe,CAACqB,KAAKC,OAAOC,UAAU,oBAAoBC,eAAeC,OAAOrE,EAAEwD,GAAGxD","x_google_ignoreList":[0]}