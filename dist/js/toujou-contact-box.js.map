{"version":3,"file":"toujou-contact-box.js","sources":["../../node_modules/@toujou/toujou-contact-box/lib/index.js"],"sourcesContent":["import{__decorate as t}from\"tslib\";import{LitElement as e}from\"lit\";import{property as s,customElement as o}from\"lit/decorators.js\";let n=class extends e{constructor(){super(...arguments),this.openContactBoxBodyAttribute=\"contact-box-is-open\",this.keyCodes={tab:9,escape:27},this.selectors={focusableEls:\".contact-box__close, a.contact-box__link\",contactStateInput:\"#contact-state\",closeButton:\".contact-box__close\"},this._closeButton=null,this._contactStateInput=null,this.state=!1,this._focusableEls=[],this._firstFocusableEl=null,this._lastFocusableEl=null,this._prevContentFocusEl=null}createRenderRoot(){return this}set _state(t){var e;this.state=t,this.state?(this.setAttribute(\"tabindex\",\"0\"),document.body.setAttribute(this.openContactBoxBodyAttribute,\"\"),window.addEventListener(\"keydown\",this._handleKeyDown.bind(this)),this._prevContentFocusEl=document.activeElement,this.focus()):(this.removeAttribute(\"tabindex\"),this._contactStateInput.checked=!1,document.body.removeAttribute(this.openContactBoxBodyAttribute),window.removeEventListener(\"keydown\",this._handleKeyDown),null===(e=this._prevContentFocusEl)||void 0===e||e.focus())}connectedCallback(){this._contactStateInput=document.querySelector(this.selectors.contactStateInput),this._closeButton=this.querySelector(this.selectors.closeButton),this._closeButton&&this._contactStateInput?this._init():console.error(\"TOUJOU: Could not find the necessary elements for the contact box\")}disconnectedCallback(){var t,e;null===(t=this._contactStateInput)||void 0===t||t.removeEventListener(\"change\",this._handleStateInputStateChange),this.removeEventListener(\"click\",this._handleClick),null===(e=this._closeButton)||void 0===e||e.removeEventListener(\"click\",this._handleCloseButtonClick)}_init(){var t,e;this._focusableEls=Array.from(this.querySelectorAll(this.selectors.focusableEls)),this._firstFocusableEl=this._focusableEls[0],this._lastFocusableEl=this._focusableEls[this._focusableEls.length-1],null===(t=this._contactStateInput)||void 0===t||t.addEventListener(\"change\",this._handleStateInputStateChange.bind(this)),this.addEventListener(\"click\",this._handleClick.bind(this)),null===(e=this._closeButton)||void 0===e||e.addEventListener(\"click\",this._handleCloseButtonClick.bind(this))}_handleStateInputStateChange(){var t;this._state=(null===(t=this._contactStateInput)||void 0===t?void 0:t.checked)||!1}_handleClick(t){t.target===this&&this._closeButton&&(this._state=!1)}_handleKeyDown(t){this.state&&(\"Escape\"===t.key||t.keyCode===this.keyCodes.escape?this._handleEscapePress():\"Tab\"!==t.key&&t.keyCode!==this.keyCodes.tab||this._handleTabPress(t))}_handleEscapePress(){this._state=!1}_handleTabPress(t){var e,s;t.shiftKey?document.activeElement===this._firstFocusableEl&&(t.preventDefault(),null===(e=this._lastFocusableEl)||void 0===e||e.focus()):document.activeElement===this._lastFocusableEl&&(t.preventDefault(),null===(s=this._firstFocusableEl)||void 0===s||s.focus())}_handleCloseButtonClick(){this._state=!1}};t([s({type:HTMLElement})],n.prototype,\"_closeButton\",void 0),t([s({type:HTMLInputElement})],n.prototype,\"_contactStateInput\",void 0),t([s({type:Boolean})],n.prototype,\"state\",void 0),t([s({type:HTMLElement})],n.prototype,\"_focusableEls\",void 0),t([s({type:HTMLElement})],n.prototype,\"_firstFocusableEl\",void 0),t([s({type:HTMLElement})],n.prototype,\"_lastFocusableEl\",void 0),t([s({type:HTMLElement})],n.prototype,\"_prevContentFocusEl\",void 0),n=t([o(\"toujou-contact-box\")],n);//# sourceMappingURL=index.js.map\n"],"names":["n","e","constructor","super","arguments","this","openContactBoxBodyAttribute","keyCodes","tab","escape","selectors","focusableEls","contactStateInput","closeButton","_closeButton","_contactStateInput","state","_focusableEls","_firstFocusableEl","_lastFocusableEl","_prevContentFocusEl","createRenderRoot","_state","t","setAttribute","document","body","window","addEventListener","_handleKeyDown","bind","activeElement","focus","removeAttribute","checked","removeEventListener","connectedCallback","querySelector","_init","console","error","disconnectedCallback","_handleStateInputStateChange","_handleClick","_handleCloseButtonClick","Array","from","querySelectorAll","length","target","key","keyCode","_handleEscapePress","_handleTabPress","s","shiftKey","preventDefault","type","HTMLElement","prototype","HTMLInputElement","Boolean","o"],"mappings":"oOAAoI,IAAIA,EAAE,cAAcC,EAAE,WAAAC,GAAoBC,SAAGC,WAAWC,KAAKC,4BAA4B,sBAAsBD,KAAKE,SAAS,CAACC,IAAI,EAAEC,OAAO,IAAIJ,KAAKK,UAAU,CAACC,aAAa,2CAA2CC,kBAAkB,iBAAiBC,YAAY,uBAAuBR,KAAKS,aAAa,KAAKT,KAAKU,mBAAmB,KAAKV,KAAKW,OAAM,EAAGX,KAAKY,cAAc,GAAGZ,KAAKa,kBAAkB,KAAKb,KAAKc,iBAAiB,KAAKd,KAAKe,oBAAoB,IAAI,CAAC,gBAAAC,GAA0B,OAAAhB,IAAI,CAAC,UAAIiB,CAAOC,GAAOtB,IAAAA,EAAOI,KAAAW,MAAMO,EAAElB,KAAKW,OAAOX,KAAKmB,aAAa,WAAW,KAAKC,SAASC,KAAKF,aAAanB,KAAKC,4BAA4B,IAAIqB,OAAOC,iBAAiB,UAAUvB,KAAKwB,eAAeC,KAAKzB,OAAOA,KAAKe,oBAAoBK,SAASM,cAAc1B,KAAK2B,UAAU3B,KAAK4B,gBAAgB,YAAY5B,KAAKU,mBAAmBmB,SAAQ,EAAGT,SAASC,KAAKO,gBAAgB5B,KAAKC,6BAA6BqB,OAAOQ,oBAAoB,UAAU9B,KAAKwB,gBAAgB,QAAQ5B,EAAEI,KAAKe,2BAAsB,IAASnB,GAAGA,EAAE+B,QAAQ,CAAC,iBAAAI,GAAyB/B,KAAAU,mBAAmBU,SAASY,cAAchC,KAAKK,UAAUE,mBAAmBP,KAAKS,aAAaT,KAAKgC,cAAchC,KAAKK,UAAUG,aAAaR,KAAKS,cAAcT,KAAKU,mBAAmBV,KAAKiC,QAAQC,QAAQC,MAAM,oEAAoE,CAAC,oBAAAC,GAAuB,IAAIlB,EAAEtB,EAAU,QAAAsB,EAAElB,KAAKU,0BAAqB,IAASQ,GAAGA,EAAEY,oBAAoB,SAAS9B,KAAKqC,8BAA8BrC,KAAK8B,oBAAoB,QAAQ9B,KAAKsC,cAAc,QAAQ1C,EAAEI,KAAKS,oBAAe,IAASb,GAAGA,EAAEkC,oBAAoB,QAAQ9B,KAAKuC,wBAAwB,CAAC,KAAAN,GAAQ,IAAIf,EAAEtB,EAAEI,KAAKY,cAAc4B,MAAMC,KAAKzC,KAAK0C,iBAAiB1C,KAAKK,UAAUC,eAAeN,KAAKa,kBAAkBb,KAAKY,cAAc,GAAGZ,KAAKc,iBAAiBd,KAAKY,cAAcZ,KAAKY,cAAc+B,OAAO,GAAG,QAAQzB,EAAElB,KAAKU,0BAAqB,IAASQ,GAAGA,EAAEK,iBAAiB,SAASvB,KAAKqC,6BAA6BZ,KAAKzB,OAAOA,KAAKuB,iBAAiB,QAAQvB,KAAKsC,aAAab,KAAKzB,OAAO,QAAQJ,EAAEI,KAAKS,oBAAe,IAASb,GAAGA,EAAE2B,iBAAiB,QAAQvB,KAAKuC,wBAAwBd,KAAKzB,MAAM,CAAC,4BAAAqC,GAAmC,IAAAnB,EAAOlB,KAAAiB,QAAQ,QAAQC,EAAElB,KAAKU,0BAAqB,IAASQ,OAAE,EAAOA,EAAEW,WAAU,CAAE,CAAC,YAAAS,CAAapB,GAAGA,EAAE0B,SAAS5C,MAAMA,KAAKS,eAAeT,KAAKiB,QAAO,EAAG,CAAC,cAAAO,CAAeN,GAAQlB,KAAAW,QAAQ,WAAWO,EAAE2B,KAAK3B,EAAE4B,UAAU9C,KAAKE,SAASE,OAAOJ,KAAK+C,qBAAqB,QAAQ7B,EAAE2B,KAAK3B,EAAE4B,UAAU9C,KAAKE,SAASC,KAAKH,KAAKgD,gBAAgB9B,GAAG,CAAC,kBAAA6B,GAAqB/C,KAAKiB,QAAO,CAAE,CAAC,eAAA+B,CAAgB9B,GAAG,IAAItB,EAAEqD,EAAE/B,EAAEgC,SAAS9B,SAASM,gBAAgB1B,KAAKa,oBAAoBK,EAAEiC,iBAAiB,QAAQvD,EAAEI,KAAKc,wBAAmB,IAASlB,GAAGA,EAAE+B,SAASP,SAASM,gBAAgB1B,KAAKc,mBAAmBI,EAAEiC,iBAAiB,QAAQF,EAAEjD,KAAKa,yBAAoB,IAASoC,GAAGA,EAAEtB,QAAQ,CAAC,uBAAAY,GAA0BvC,KAAKiB,QAAO,CAAE,GAAGC,EAAE,CAAC+B,EAAE,CAACG,KAAKC,eAAe1D,EAAE2D,UAAU,oBAAe,GAAQpC,EAAE,CAAC+B,EAAE,CAACG,KAAKG,oBAAoB5D,EAAE2D,UAAU,0BAAqB,GAAQpC,EAAE,CAAC+B,EAAE,CAACG,KAAKI,WAAW7D,EAAE2D,UAAU,aAAQ,GAAQpC,EAAE,CAAC+B,EAAE,CAACG,KAAKC,eAAe1D,EAAE2D,UAAU,qBAAgB,GAAQpC,EAAE,CAAC+B,EAAE,CAACG,KAAKC,eAAe1D,EAAE2D,UAAU,yBAAoB,GAAQpC,EAAE,CAAC+B,EAAE,CAACG,KAAKC,eAAe1D,EAAE2D,UAAU,wBAAmB,GAAQpC,EAAE,CAAC+B,EAAE,CAACG,KAAKC,eAAe1D,EAAE2D,UAAU,2BAAsB,GAAQ3D,EAAEuB,EAAE,CAACuC,EAAE,uBAAuB9D","x_google_ignoreList":[0]}