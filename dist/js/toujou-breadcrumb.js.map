{"version":3,"file":"toujou-breadcrumb.js","sources":["../../src/components/toujou-breadcrumb/toujou-breadcrumb.styles.ts","../../src/components/toujou-breadcrumb/toujou-breadcrumb.ts"],"sourcesContent":["import { css } from \"lit\";\n\n// Internal styles for the <toujou-breadcrumb> element\nexport const toujouBreadcrumbStyles = css`\n  :host {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .breadcrumb__fake-list {\n    display: none;\n    list-style: none;\n    position: relative;\n    border-radius: var(--breadcrumb-fake-list-border-radius);\n  }\n  \n  .breadcrumb__fake-list::before {\n    content: \"\";\n    width: 0;\n    height: 0;\n    position: absolute;\n    top: 0;\n    left: var(--spacing-s);\n    border-left: var(--breadcrumb-fake-list-triangle-size) solid transparent;\n    border-right: var(--breadcrumb-fake-list-triangle-size) solid transparent;\n    border-bottom: var(--breadcrumb-fake-list-triangle-size) solid var(--breadcrumb-mobile-menu-bg-color);\n    transform: translateY(-100%);\n  }\n  \n  .breadcrumb__fake-list .breadcrumb__link {\n    color: var(--breadcrumb-link-color);\n    font-size: var(--breadcrumb-font-size);\n    font-family: var(--breadcrumb-font-family);\n    text-decoration: var(--breadcrumb-link-text-decoration);\n  }\n  \n  :host([ismobile][mobilemenuisopen]) .breadcrumb__fake-list {\n    display: flex;\n    flex-direction: column-reverse;\n    gap: var(--breadcrumb-mobile-menu-list-gap);\n    padding: var(--breadcrumb-mobile-menu-padding);\n    position: absolute;\n    top: var(--breadcrumb-mobile-menu-top);\n    left: 0;\n    background-color: var(--breadcrumb-mobile-menu-bg-color);\n    box-shadow: var(--breadcrumb-mobile-menu-shadow);\n  }\n\n  .breadcrumb__fake-list .breadcrumb__link:focus {\n    color: var(--breadcrumb-link-color-active, var(--color-primary));\n  }\n  \n  @media (hover: hover) {\n    .breadcrumb__fake-list .breadcrumb__link:hover {\n      color: var(--breadcrumb-link-color-active, var(--color-primary));\n    }\n  }\n`;","import { html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\nimport { toujouBreadcrumbStyles } from \"./toujou-breadcrumb.styles.js\";\n\nconst IS_MOBILE_BUFFER_PER_ITEM = 16;\n\n@customElement('toujou-breadcrumb')\nexport class ToujouBreadcrumb extends LitElement {\n    static styles = [toujouBreadcrumbStyles];\n\n    @property({ type: Number }) breakpoint: number = 0;\n    @property({ type: Boolean, reflect: true }) isMobile = false;\n    @property({ type: HTMLOListElement }) list: HTMLOListElement | null = null;\n    @property({ type: Array }) listItems: HTMLLIElement[] | null = [];\n    @property({ type: Array }) toggleButtons: HTMLButtonElement[] | null = [];\n    @property({ type: Boolean, reflect: true }) mobileMenuIsOpen: Boolean = false;\n\n    private _mql: MediaQueryList | undefined;\n\n    render() {\n        return html`\n            <slot name=\"toggle-buttons\" @click=\"${this._handleToggleClick}\"></slot>\n            <slot name=\"list\"></slot>\n            <div class=\"breadcrumb__fake-list\"></div>\n        `\n    }\n\n    constructor() {\n        super();\n\n        this._handleToggleClick = this._handleToggleClick.bind(this);\n    }\n\n    firstUpdated() {\n        this.list = this.querySelector('.breadcrumb__list');\n        this.listItems = Array.from(this.querySelectorAll('.breadcrumb__item'));\n\n        this._calculateBreakpoint();\n\n        if (this.breakpoint > 0) {\n            this._mql = window.matchMedia(`(max-width: ${this.breakpoint}px)`);\n            this._mql.addEventListener('change', (event) => {\n                this.isMobile = event.matches\n\n                if (!event.matches) {\n                    this.mobileMenuIsOpen = false;\n                }\n            });\n\n            this.isMobile = this._mql.matches;\n        }\n\n        this._populateFakeList()\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.toggleButtons = Array.from(this.querySelectorAll('.breadcrumb__toggle'));\n        this.dispatchEvent(new Event('toujou-breadcrumb-connected'));\n    }\n\n    /**\n     * Calculate at which width the breakpoint between \"mobile\" and \"normal\" mode is\n     */\n    _calculateBreakpoint() {\n        let itemsWidth = 0;\n\n        this.listItems!.forEach((item) => {\n            itemsWidth += item.getBoundingClientRect().width;\n            // @ts-ignore\n            itemsWidth += parseInt(window.getComputedStyle(item)['margin-right']);\n            itemsWidth += IS_MOBILE_BUFFER_PER_ITEM;\n        });\n\n        this.breakpoint = Math.ceil(itemsWidth);\n    }\n\n    /**\n     * Toggle the mobile menu open / close\n     */\n    _handleToggleClick() {\n        this.mobileMenuIsOpen = !this.mobileMenuIsOpen;\n    }\n\n    /**\n     * Get clones of all the nav list items and copy them into the fake list element\n     */\n    _populateFakeList() {\n        const fakeList = this.shadowRoot!.querySelector('.breadcrumb__fake-list');\n\n        this.listItems?.forEach((listItem, i) => {\n            if (i < this.listItems!.length - 1) {\n                const newListItem = listItem.cloneNode(true);\n                fakeList!.appendChild(newListItem);\n            }\n        })\n    }\n}\n\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'toujou-breadcrumb': ToujouBreadcrumb\n    }\n}\n"],"names":["toujouBreadcrumbStyles","css","ToujouBreadcrumb","LitElement","constructor","this","breakpoint","isMobile","list","listItems","toggleButtons","mobileMenuIsOpen","_handleToggleClick","bind","render","html","firstUpdated","querySelector","Array","from","querySelectorAll","_calculateBreakpoint","_mql","window","matchMedia","addEventListener","event","matches","_populateFakeList","connectedCallback","super","dispatchEvent","Event","itemsWidth","forEach","item","getBoundingClientRect","width","parseInt","getComputedStyle","Math","ceil","fakeList","shadowRoot","_a","listItem","i","length","newListItem","cloneNode","appendChild","styles","__decorateClass","property","type","Number","prototype","Boolean","reflect","HTMLOListElement","customElement"],"mappings":"sMAGO,MAAMA,EAAyBC,CAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kMCIzB,IAAAC,EAAN,cAA+BC,EAoBlC,WAAAC,WAjBiDC,KAAAC,WAAA,EACMD,KAAAE,UAAA,EACeF,KAAAG,KAAA,KAC3CH,KAAAI,UAAoC,GACpCJ,KAAAK,cAA4C,GACCL,KAAAM,kBAAA,EAepEN,KAAKO,mBAAqBP,KAAKO,mBAAmBC,KAAKR,KAC3D,CAZA,MAAAS,GACWC,OAAAA,CAAAA;kDACmCV,KAAKO;;;SAInD,CAQA,YAAAI,GACSX,KAAAG,KAAOH,KAAKY,cAAc,qBAC/BZ,KAAKI,UAAYS,MAAMC,KAAKd,KAAKe,iBAAiB,sBAElDf,KAAKgB,uBAEDhB,KAAKC,WAAa,IAClBD,KAAKiB,KAAOC,OAAOC,WAAW,eAAenB,KAAKC,iBAClDD,KAAKiB,KAAKG,iBAAiB,UAAWC,IAClCrB,KAAKE,SAAWmB,EAAMC,QAEjBD,EAAMC,UACPtB,KAAKM,kBAAmB,EAC5B,IAGCN,KAAAE,SAAWF,KAAKiB,KAAKK,SAG9BtB,KAAKuB,mBACT,CAEA,iBAAAC,GACIC,MAAMD,oBAENxB,KAAKK,cAAgBQ,MAAMC,KAAKd,KAAKe,iBAAiB,wBACtDf,KAAK0B,cAAc,IAAIC,MAAM,+BACjC,CAKA,oBAAAX,GACI,IAAIY,EAAa,EAEZ5B,KAAAI,UAAWyB,SAASC,IACPF,GAAAE,EAAKC,wBAAwBC,MAE3CJ,GAAcK,SAASf,OAAOgB,iBAAiBJ,GAAM,iBACvCF,GApEQ,EAoER,IAGb5B,KAAAC,WAAakC,KAAKC,KAAKR,EAChC,CAKA,kBAAArB,GACSP,KAAAM,kBAAoBN,KAAKM,gBAClC,CAKA,iBAAAiB,SACI,MAAMc,EAAWrC,KAAKsC,WAAY1B,cAAc,0BAEhD,OAAA2B,EAAAvC,KAAKI,YAALmC,EAAgBV,SAAQ,CAACW,EAAUC,KAC/B,GAAIA,EAAIzC,KAAKI,UAAWsC,OAAS,EAAG,CAC1B,MAAAC,EAAcH,EAASI,WAAU,GACvCP,EAAUQ,YAAYF,EAC1B,IAER,GA1FS9C,EACFiD,OAAS,CAACnD,GAEWoD,EAAA,CAA3BC,EAAS,CAAEC,KAAMC,UAHTrD,EAGmBsD,UAAA,aAAA,GACgBJ,EAAA,CAA3CC,EAAS,CAAEC,KAAMG,QAASC,SAAS,KAJ3BxD,EAImCsD,UAAA,WAAA,GACNJ,EAAA,CAArCC,EAAS,CAAEC,KAAMK,oBALTzD,EAK6BsD,UAAA,OAAA,GACXJ,EAAA,CAA1BC,EAAS,CAAEC,KAAMpC,SANThB,EAMkBsD,UAAA,YAAA,GACAJ,EAAA,CAA1BC,EAAS,CAAEC,KAAMpC,SAPThB,EAOkBsD,UAAA,gBAAA,GACiBJ,EAAA,CAA3CC,EAAS,CAAEC,KAAMG,QAASC,SAAS,KAR3BxD,EAQmCsD,UAAA,mBAAA,GARnCtD,EAANkD,EAAA,CADNQ,EAAc,sBACF1D"}