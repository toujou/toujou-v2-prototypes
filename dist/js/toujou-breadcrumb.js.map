{"version":3,"file":"toujou-breadcrumb.js","sources":["../../src/components/toujou-breadcrumb/toujou-breadcrumb.styles.ts","../../src/components/toujou-breadcrumb/toujou-breadcrumb.ts"],"sourcesContent":["import { css } from \"lit\";\n\n// Internal styles for the <toujou-breadcrumb> element\nexport const toujouBreadcrumbStyles = css`\n  :host {\n    position: relative;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .breadcrumb__fake-list {\n    display: none;\n    list-style: none;\n    position: relative;\n    border-radius: var(--breadcrumb-fake-list-border-radius);\n  }\n  \n  .breadcrumb__fake-list::before {\n    content: \"\";\n    width: 0;\n    height: 0;\n    position: absolute;\n    top: 0;\n    left: var(--spacing-s);\n    border-left: var(--breadcrumb-fake-list-triangle-size) solid transparent;\n    border-right: var(--breadcrumb-fake-list-triangle-size) solid transparent;\n    border-bottom: var(--breadcrumb-fake-list-triangle-size) solid var(--breadcrumb-mobile-menu-bg-color);\n    transform: translateY(-100%);\n  }\n  \n  .breadcrumb__fake-list .breadcrumb__link {\n    color: var(--breadcrumb-link-color);\n    font-size: var(--breadcrumb-font-size);\n    font-family: var(--breadcrumb-font-family);\n    text-decoration: var(--breadcrumb-link-text-decoration);\n  }\n  \n  :host([ismobile][mobilemenuisopen]) .breadcrumb__fake-list {\n    display: flex;\n    flex-direction: column-reverse;\n    gap: var(--breadcrumb-mobile-menu-list-gap);\n    padding: var(--breadcrumb-mobile-menu-padding);\n    position: absolute;\n    top: var(--breadcrumb-mobile-menu-top);\n    left: 0;\n    background-color: var(--breadcrumb-mobile-menu-bg-color);\n    box-shadow: var(--breadcrumb-mobile-menu-shadow);\n  }\n`;","import { html, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\nimport { toujouBreadcrumbStyles } from \"./toujou-breadcrumb.styles.js\";\n\nconst IS_MOBILE_BUFFER_PER_ITEM = 16;\n\n@customElement('toujou-breadcrumb')\nexport class ToujouBreadcrumb extends LitElement {\n    static styles = [toujouBreadcrumbStyles];\n\n    @property({ type: Number }) breakpoint: number = 0;\n    @property({ type: Boolean, reflect: true }) isMobile = false;\n    @property({ type: HTMLOListElement }) list: HTMLOListElement | null = null;\n    @property({ type: Array }) listItems: HTMLLIElement[] | null = [];\n    @property({ type: Array }) toggleButtons: HTMLButtonElement[] | null = [];\n    @property({ type: Boolean, reflect: true }) mobileMenuIsOpen: Boolean = false;\n\n    private _mql: MediaQueryList | undefined;\n\n    render() {\n        return html`\n            <slot name=\"toggle-buttons\" @click=\"${this._handleToggleClick}\"></slot>\n            <slot name=\"list\"></slot>\n            <div class=\"breadcrumb__fake-list\"></div>\n        `\n    }\n\n    constructor() {\n        super();\n\n        this._handleToggleClick = this._handleToggleClick.bind(this);\n    }\n\n    firstUpdated() {\n        this.list = this.querySelector('.breadcrumb__list');\n        this.listItems = Array.from(this.querySelectorAll('.breadcrumb__item'));\n\n        this._calculateBreakpoint();\n\n        if (this.breakpoint > 0) {\n            this._mql = window.matchMedia(`(max-width: ${this.breakpoint}px)`);\n            this._mql.addEventListener('change', (event) => {\n                this.isMobile = event.matches\n\n                if (!event.matches) {\n                    this.mobileMenuIsOpen = false;\n                }\n            });\n\n            this.isMobile = this._mql.matches;\n        }\n\n        this._populateFakeList()\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.toggleButtons = Array.from(this.querySelectorAll('.breadcrumb__toggle'));\n        this.dispatchEvent(new Event('toujou-breadcrumb-connected'));\n    }\n\n    /**\n     * Calculate at which width the breakpoint between \"mobile\" and \"normal\" mode is\n     */\n    _calculateBreakpoint() {\n        let itemsWidth = 0;\n\n        this.listItems!.forEach((item) => {\n            itemsWidth += item.getBoundingClientRect().width;\n            // @ts-ignore\n            itemsWidth += parseInt(window.getComputedStyle(item)['margin-right']);\n            itemsWidth += IS_MOBILE_BUFFER_PER_ITEM;\n        });\n\n        this.breakpoint = Math.ceil(itemsWidth);\n    }\n\n    /**\n     * Toggle the mobile menu open / close\n     */\n    _handleToggleClick() {\n        this.mobileMenuIsOpen = !this.mobileMenuIsOpen;\n    }\n\n    /**\n     * Get clones of all the nav list items and copy them into the fake list element\n     */\n    _populateFakeList() {\n        const fakeList = this.shadowRoot!.querySelector('.breadcrumb__fake-list');\n\n        this.listItems?.forEach((listItem, i) => {\n            if (i < this.listItems!.length - 1) {\n                const newListItem = listItem.cloneNode(true);\n                fakeList!.appendChild(newListItem);\n            }\n        })\n    }\n}\n\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'toujou-breadcrumb': ToujouBreadcrumb\n    }\n}\n"],"names":["css","LitElement","html","property","customElement"],"mappings":"iKAGO,KAAM,GAAyBA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,kMCCtC,KAAM,GAA4B,GAG3B,GAAA,GAAA,aAA+BC,EAAW,CAoB7C,aAAc,CACJ,QAlBuC,KAAA,WAAA,EACM,KAAA,SAAA,GACe,KAAA,KAAA,KAC3C,KAAA,UAAoC,GACpC,KAAA,cAA4C,GACC,KAAA,iBAAA,GAepE,KAAK,mBAAqB,KAAK,mBAAmB,KAAK,IAAI,CAC/D,CAZA,QAAS,CACE,MAAAC;AAAAA,kDACmC,KAAK;AAAA;AAAA;AAAA,SAInD,CAQA,cAAe,CACN,KAAA,KAAO,KAAK,cAAc,mBAAmB,EAClD,KAAK,UAAY,MAAM,KAAK,KAAK,iBAAiB,mBAAmB,CAAC,EAEtE,KAAK,qBAAqB,EAEtB,KAAK,WAAa,GAClB,MAAK,KAAO,OAAO,WAAW,eAAe,KAAK,eAAe,EACjE,KAAK,KAAK,iBAAiB,SAAU,AAAC,GAAU,CAC5C,KAAK,SAAW,EAAM,QAEjB,EAAM,SACP,MAAK,iBAAmB,GAC5B,CACH,EAEI,KAAA,SAAW,KAAK,KAAK,SAG9B,KAAK,kBAAkB,CAC3B,CAEA,mBAAoB,CAChB,MAAM,kBAAkB,EAExB,KAAK,cAAgB,MAAM,KAAK,KAAK,iBAAiB,qBAAqB,CAAC,EAC5E,KAAK,cAAc,GAAI,OAAM,6BAA6B,CAAC,CAC/D,CAKA,sBAAuB,CACnB,GAAI,GAAa,EAEZ,KAAA,UAAW,QAAQ,AAAC,GAAS,CAChB,GAAA,EAAK,sBAAwB,EAAA,MAE3C,GAAc,SAAS,OAAO,iBAAiB,CAAI,EAAE,eAAe,EACtD,GAAA,CAAA,CACjB,EAEI,KAAA,WAAa,KAAK,KAAK,CAAU,CAC1C,CAKA,oBAAqB,CACZ,KAAA,iBAAmB,CAAC,KAAK,gBAClC,CAKA,mBAAoB,OAChB,KAAM,GAAW,KAAK,WAAY,cAAc,wBAAwB,EAExE,QAAK,YAAL,QAAgB,QAAQ,CAAC,EAAU,IAAM,CACrC,GAAI,EAAI,KAAK,UAAW,OAAS,EAAG,CAC1B,KAAA,GAAc,EAAS,UAAU,EAAI,EAC3C,EAAU,YAAY,CAAW,CACrC,CAAA,EAER,CACJ,EA1FW,EAAA,OAAS,CAAC,CAAsB,EAEX,EAAA,CAA5BC,EAAU,CAAE,KAAM,OAAQ,CAAA,EAAE,EAAA,UAAA,aAAA,CAAA,EACgB,EAAA,CAA5CA,EAAU,CAAE,KAAM,QAAS,QAAS,GAAM,CAAA,EAAE,EAAA,UAAA,WAAA,CAAA,EACN,EAAA,CAAtCA,EAAU,CAAE,KAAM,iBAAkB,CAAA,EAAE,EAAA,UAAA,OAAA,CAAA,EACX,EAAA,CAA3BA,EAAU,CAAE,KAAM,MAAO,CAAA,EAAE,EAAA,UAAA,YAAA,CAAA,EACA,EAAA,CAA3BA,EAAU,CAAE,KAAM,MAAO,CAAA,EAAE,EAAA,UAAA,gBAAA,CAAA,EACiB,EAAA,CAA5CA,EAAU,CAAE,KAAM,QAAS,QAAS,GAAM,CAAA,EAAE,EAAA,UAAA,mBAAA,CAAA,EARzC,EAAA,EAAA,CADNC,EAAc,mBAAmB,CAAA,EAC3B,CAAA"}