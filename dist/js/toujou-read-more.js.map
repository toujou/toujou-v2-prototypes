{"version":3,"file":"toujou-read-more.js","sources":["../../node_modules/@toujou/toujou-read-more/lib/index.js"],"sourcesContent":["import{css as t,LitElement as e,html as o}from\"lit\";class s extends e{static get is(){return\"toujou-read-more\"}constructor(){super(),this.maxLines=3,this.hasClampedText=!0,this.showButton=!1}firstUpdated(){var t;this.style.setProperty(\"--toujou-read-more-max-lines\",this.maxLines.toString()),requestAnimationFrame((()=>this._checkOverflow()));const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(\"slot:not([name])\");e&&e.addEventListener(\"slotchange\",(()=>{const t=e.assignedElements({flatten:!0});if(t.length>0){t.forEach((t=>t instanceof HTMLElement?t.style.marginBottom=\"\":null));const e=t[t.length-1];e&&(e.style.marginBottom=\"0\")}})),this._setupSlotListeners(),this._setupButtonAccessibility(),this.dispatchEvent(new CustomEvent(\"toujou-read-more-ready\",{bubbles:!0,composed:!0}))}disconnectedCallback(){super.disconnectedCallback()}updated(t){t.has(\"maxLines\")&&(this.style.setProperty(\"--toujou-read-more-max-lines\",this.maxLines.toString()),requestAnimationFrame((()=>this._checkOverflow()))),(t.has(\"hasClampedText\")||t.has(\"showButton\"))&&this.updateComplete.then((()=>{this._setupButtonAccessibility()}))}_setupSlotListeners(){var t,e;const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector('slot[name=\"open-button\"]'),s=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector('slot[name=\"close-button\"]');o&&o.addEventListener(\"slotchange\",(()=>{requestAnimationFrame((()=>this._setupButtonAccessibility()))})),s&&s.addEventListener(\"slotchange\",(()=>{requestAnimationFrame((()=>this._setupButtonAccessibility()))}))}_setupButtonAccessibility(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(\".content\"),o=Array.from(this.querySelectorAll('[slot=\"open-button\"]')),s=Array.from(this.querySelectorAll('[slot=\"close-button\"]'));o.forEach((t=>{t.setAttribute(\"aria-controls\",(null==e?void 0:e.id)||\"read-more-content\"),this.hasClampedText&&this.showButton?(t.setAttribute(\"aria-expanded\",\"false\"),t.removeAttribute(\"aria-hidden\"),t.removeAttribute(\"tabindex\")):(t.setAttribute(\"aria-hidden\",\"true\"),t.setAttribute(\"tabindex\",\"-1\"))})),s.forEach((t=>{t.setAttribute(\"aria-controls\",(null==e?void 0:e.id)||\"read-more-content\"),!this.hasClampedText&&this.showButton?(t.setAttribute(\"aria-expanded\",\"true\"),t.removeAttribute(\"aria-hidden\"),t.removeAttribute(\"tabindex\")):(t.setAttribute(\"aria-hidden\",\"true\"),t.setAttribute(\"tabindex\",\"-1\"))}))}async _checkOverflow(){var t;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(\".content\");if(!e)return void console.warn(\"toujou-read-more: .content not found\");this.hasClampedText=!1,await this.updateComplete;const o=e.scrollHeight;this.hasClampedText=!0,await this.updateComplete;const s=e.clientHeight;this.showButton=o>s,this.hasClampedText=this.showButton}_toggleClamp(){this.hasClampedText=!this.hasClampedText,this.dispatchEvent(new CustomEvent(\"toujou-read-more-toggle\",{detail:{isClamped:this.hasClampedText},bubbles:!0,composed:!0}))}render(){return o`\n      <div id=\"read-more-content\" class=\"content\" role=\"region\" aria-label=\"Expandable content\" part=\"content\">\n        <slot></slot>\n      </div>\n\n      ${this.showButton?o`\n          <div class=\"buttons\" @click=${this._toggleClamp} part=\"buttons\">\n            ${this.hasClampedText?o`<slot name=\"open-button\"></slot>`:o`<slot name=\"close-button\"></slot>`}\n          </div>\n        `:\"\"}\n    `}}s.properties={maxLines:{type:Number,attribute:\"max-lines\"},hasClampedText:{type:Boolean,reflect:!0,attribute:\"has-clamped-text\"},showButton:{type:Boolean,state:!0}},s.styles=t`\n    :host {\n      display: block;\n    }\n\n    :host([has-clamped-text]) .content {\n      -webkit-line-clamp: var(--toujou-read-more-max-lines, 3);\n    }\n\n    :host(:not([has-clamped-text])) .content {\n      -webkit-line-clamp: unset;\n    }\n\n    .content {\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n    }\n\n    .buttons {\n      margin-top: var(--spacing-normal);\n      display: inline-block;\n    }\n  `,customElements.define(s.is,s);export{s as ToujouReadMore};//# sourceMappingURL=index.js.map\n"],"names":["s","e","is","constructor","super","this","maxLines","hasClampedText","showButton","firstUpdated","t","style","setProperty","toString","requestAnimationFrame","_checkOverflow","shadowRoot","querySelector","addEventListener","assignedElements","flatten","length","forEach","HTMLElement","marginBottom","_setupSlotListeners","_setupButtonAccessibility","dispatchEvent","CustomEvent","bubbles","composed","disconnectedCallback","updated","has","updateComplete","then","o","Array","from","querySelectorAll","setAttribute","id","removeAttribute","console","warn","scrollHeight","clientHeight","_toggleClamp","detail","isClamped","render","properties","type","Number","attribute","Boolean","reflect","state","styles","customElements","define"],"mappings":"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","x_google_ignoreList":[0]}