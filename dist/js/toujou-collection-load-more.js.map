{"version":3,"file":"toujou-collection-load-more.js","sources":["../../node_modules/@toujou/toujou-collection-load-more/lib/index.js"],"sourcesContent":["import{__decorate as e}from\"tslib\";import{css as t,LitElement as o,html as n}from\"lit\";import{property as i}from\"lit/decorators.js\";var r,s,l,c=t(r||(s=[\":host {\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -webkit-box-pack: center;\\n        -ms-flex-pack: center;\\n            justify-content: center;\\n}\\n\"],l||(l=s.slice(0)),r=Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(l)}}))));class a extends o{constructor(){super(...arguments),this.isLoading=!1,this.itemsContainerSelector=\"\"}static get is(){return\"toujou-collection-load-more\"}render(){return this.isLoading?n`<slot name=\"spinner\"></slot>`:n`<slot @click=\"${this._handleLoadMoreClick}\"></slot>`}_handleLoadMoreClick(e){let t;e.preventDefault();const o=e.target;if(null===o)return;const n=o.getAttribute(\"href\");if(null===n||\"\"===n)throw\"Missing or empty href on toujou-collection-load-more link\";const i=new URL(n,document.baseURI).href;this.isLoading=!0,fetch(i).then((e=>e.text())).then((e=>{const t=document.createElement(\"div\");return t.innerHTML=e,t})).then((e=>{const o=[].slice.call(e.querySelector(this.itemsContainerSelector).children),n=o[0];t=null==n?void 0:n.querySelector(\"a\");const i=e.querySelector(a.is);document.querySelector(this.itemsContainerSelector).append(...o),i?this.replaceWith(i):this.remove()})).catch((e=>{window.dispatchEvent(new CustomEvent(\"toujou-collection-load-more-error\",{bubbles:!0,composed:!0,detail:e}))})).finally((()=>{this.isLoading=!1,t&&requestAnimationFrame((()=>{t.focus()})),window.dispatchEvent(new CustomEvent(\"toujou-collection-load-more-done\",{bubbles:!0,composed:!0}))}))}}a.styles=[c],e([i({type:Boolean,reflect:!0,attribute:\"is-loading\"})],a.prototype,\"isLoading\",void 0),e([i({type:String,attribute:\"items-container-selector\"})],a.prototype,\"itemsContainerSelector\",void 0),customElements.define(a.is,a);export{a as ToujouCollectionLoadMore};//# sourceMappingURL=index.js.map\n"],"names":["r","s","l","c","t","slice","Object","freeze","defineProperties","raw","value","a","o","constructor","super","arguments","this","isLoading","itemsContainerSelector","is","render","n","_handleLoadMoreClick","e","preventDefault","target","getAttribute","i","URL","document","baseURI","href","fetch","then","text","createElement","innerHTML","call","querySelector","children","append","replaceWith","remove","catch","window","dispatchEvent","CustomEvent","bubbles","composed","detail","finally","requestAnimationFrame","focus","styles","type","Boolean","reflect","attribute","prototype","String","customElements","define"],"mappings":"iMAAoI,IAAIA,EAAEC,EAAEC,EAAEC,EAAEC,EAAEJ,IAAIC,EAAE,CAAC,+LAA+LC,IAAIA,EAAED,EAAEI,MAAM,IAAIL,EAAEM,OAAOC,OAAOD,OAAOE,iBAAiBP,EAAE,CAACQ,IAAI,CAACC,MAAMJ,OAAOC,OAAOL,SAAS,MAAMS,UAAUC,EAAE,WAAAC,GAAcC,SAASC,WAAWC,KAAKC,WAAU,EAAGD,KAAKE,uBAAuB,EAAE,CAAC,aAAWC,GAAW,MAAA,6BAA6B,CAAC,MAAAC,GAAS,OAAOJ,KAAKC,UAAUI,CAAgCA,+BAAAA,CAAAA,iBAAkBL,KAAKM,+BAA+B,CAAC,oBAAAA,CAAqBC,GAAO,IAAAnB,EAAEmB,EAAEC,iBAAiB,MAAMZ,EAAEW,EAAEE,OAAO,GAAG,OAAOb,EAAE,OAAaS,MAAAA,EAAET,EAAEc,aAAa,QAAQ,GAAG,OAAOL,GAAG,KAAKA,EAAO,KAAA,4DAA4D,MAAMM,EAAE,IAAIC,IAAIP,EAAEQ,SAASC,SAASC,KAAKf,KAAKC,WAAU,EAAGe,MAAML,GAAGM,MAAMV,GAAGA,EAAEW,SAASD,MAAMV,IAAUnB,MAAAA,EAAEyB,SAASM,cAAc,OAAc/B,OAAAA,EAAEgC,UAAUb,EAAEnB,CAAAA,IAAK6B,MAAMV,IAAI,MAAMX,EAAE,GAAGP,MAAMgC,KAAKd,EAAEe,cAActB,KAAKE,wBAAwBqB,UAAUlB,EAAET,EAAE,GAAGR,EAAE,MAAMiB,OAAE,EAAOA,EAAEiB,cAAc,KAAK,MAAMX,EAAEJ,EAAEe,cAAc3B,EAAEQ,IAAIU,SAASS,cAActB,KAAKE,wBAAwBsB,UAAU5B,GAAGe,EAAEX,KAAKyB,YAAYd,GAAGX,KAAK0B,QAAM,IAAMC,OAAOpB,IAAIqB,OAAOC,cAAc,IAAIC,YAAY,oCAAoC,CAACC,SAAQ,EAAGC,UAAS,EAAGC,OAAO1B,IAAG,IAAK2B,SAAS,KAAKlC,KAAKC,WAAU,EAAGb,GAAG+C,uBAAuB,KAAK/C,EAAEgD,OAAK,IAAMR,OAAOC,cAAc,IAAIC,YAAY,mCAAmC,CAACC,SAAQ,EAAGC,UAAS,IAAI,GAAI,EAAErC,EAAE0C,OAAO,CAAClD,GAAGoB,EAAE,CAACI,EAAE,CAAC2B,KAAKC,QAAQC,SAAQ,EAAGC,UAAU,gBAAgB9C,EAAE+C,UAAU,iBAAY,GAAQnC,EAAE,CAACI,EAAE,CAAC2B,KAAKK,OAAOF,UAAU,8BAA8B9C,EAAE+C,UAAU,8BAAyB,GAAQE,eAAeC,OAAOlD,EAAEQ,GAAGR","x_google_ignoreList":[0]}