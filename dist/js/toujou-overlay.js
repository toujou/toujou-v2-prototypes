import{s as c}from"./lit-element-a6bf029f.js";import{n as _}from"./query-assigned-elements-caae21e2.js";import{e as n}from"./property-19bdaa8a.js";var u=Object.defineProperty,E=Object.getOwnPropertyDescriptor,i=(t,e,l,r)=>{for(var s=r>1?void 0:r?E(e,l):e,h=t.length-1,a;h>=0;h--)(a=t[h])&&(s=(r?a(e,l,s):a(s))||s);return r&&s&&u(e,l,s),s};let o=class extends c{constructor(){super(),this._overlayId=null,this._warningEl=null,this._closeButton=null,this._buttons=[],this._overlayCookie=!1,this._state="open",this.COOKIE_STATES={ACCEPTED:"accepted",REJECTED:"rejected"},this.STATE={OPEN:"open",CLOSED:"closed"},this._handleButtonClick=this._handleButtonClick.bind(this),this._handleCloseButtonClick=this._handleCloseButtonClick.bind(this)}createRenderRoot(){return this}set state(t){this._state=t,this._state===this.STATE.OPEN?this._showOverlay():this._hideOverlay()}get state(){return this._state}connectedCallback(){super.connectedCallback(),this._getElements(),this._overlayCookie=this._checkCookie("toujou-overlay-"+this._overlayId),location.hash==="#aaa"&&this._setCookie(this.COOKIE_STATES.ACCEPTED),this._buttons.length&&this._buttons.forEach(t=>{t.addEventListener("click",this._handleButtonClick)}),this._closeButton&&this._closeButton.addEventListener("click",this._handleCloseButtonClick),this._overlayCookie?this._overlayCookie===this.COOKIE_STATES.REJECTED?this.state=this.STATE.OPEN:this._overlayCookie===this.COOKIE_STATES.ACCEPTED&&(this.state=this.STATE.CLOSED):this.state=this.STATE.OPEN}disconnectedCallback(){super.disconnectedCallback(),this._buttons.length&&this._buttons.forEach(t=>{t.removeEventListener("click",this._handleButtonClick)}),this._closeButton&&this._closeButton.removeEventListener("click",this._handleCloseButtonClick)}_handleCloseButtonClick(){this.state=this.STATE.CLOSED}_handleButtonClick(t){t.preventDefault();const e=t==null?void 0:t.target,l=e.getAttribute("data-overlay-value")||null;l==="no"?(this.state=this.STATE.OPEN,this._showWarning()):l==="yes"&&(this.state=this.STATE.CLOSED),e.blur()}_getElements(){this._overlayId=this.getAttribute("id")||null,this._warningEl=this.querySelector(".overlay__warning"),this._closeButton=this.querySelector(".overlay__close-button"),this._buttons=Array.from(this.querySelectorAll(".overlay__buttons .button"))}_setCookie(t){document.cookie=`toujou-overlay-${this._overlayId}=${t};path=/;`}_checkCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:!1}_showOverlay(){this.style.display="flex",document.body.setAttribute("overlay-open","")}_hideOverlay(){this.style.display="none",document.body.removeAttribute("overlay-open")}_showWarning(){this.setAttribute("warning-visible","")}};i([n({type:String})],o.prototype,"_overlayId",2);i([n({type:HTMLElement})],o.prototype,"_warningEl",2);i([n({type:HTMLElement})],o.prototype,"_closeButton",2);i([n({type:Array})],o.prototype,"_buttons",2);i([n({type:String})],o.prototype,"_overlayCookie",2);i([n({type:String})],o.prototype,"_state",2);o=i([_("toujou-overlay")],o);
//# sourceMappingURL=toujou-overlay.js.map
