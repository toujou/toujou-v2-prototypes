import{s as h}from"./lit-element-9d8fde0b.js";import{e as c}from"./property-1027a1df.js";import"./query-assigned-elements-acf341e1.js";var l=Object.defineProperty,p=Object.getOwnPropertyDescriptor,u=(r,e,s,i)=>{for(var t=i>1?void 0:i?p(e,s):e,a=r.length-1,n;a>=0;a--)(n=r[a])&&(t=(i?n(e,s,t):n(t))||t);return i&&t&&l(e,s,t),t};class o extends h{constructor(){super(),this.navListItems=[],this.listItemSelector=".main-nav__list-item",this.hasSubNavAttribute="has-subnav",this.isOpenAttribute="is-open",this.listItemLevelAttribute="nav-item-level",this._getNavListItems=()=>{if(this.navListItems=[...this.querySelectorAll(this.listItemSelector)],!this.navListItems){console.warn("TOUJOU: Main navigation has no list items!");return}this.navListItems.forEach(e=>{e.hasSubNav=e.hasAttribute(this.hasSubNavAttribute),e.hasSubNav&&(e.isOpen=!1,e.level=e.getAttribute(this.listItemLevelAttribute),e.toggleEl=e.querySelector(".main-nav__chevron"),e.toggleEl.addEventListener("click",()=>{this._toggleListItemState(e)}),e.addEventListener("keyup",()=>{this._handleKeyUp(event,e)}))})},this._handleKeyUp=(e,s)=>{(e.key==="Enter"||e.code==="Enter"||e.code==="Space"||e.key===" ")&&this._toggleListItemState(s),(e.key==="Escape"||e.code==="Escape")&&this._closeAllNavListItems()}}connectedCallback(){super.connectedCallback(),this._getNavListItems(),window.addEventListener("keyup",this._handleKeyUp)}createRenderRoot(){return this}_toggleListItemState(e){e.isOpen=!e.isOpen,e.isOpen?(e.setAttribute(this.isOpenAttribute,""),this._closeOtherOpenListItems(e)):e.removeAttribute(this.isOpenAttribute)}_closeOtherOpenListItems(e){var i;const s=(i=e.parentNode)==null?void 0:i.querySelectorAll(`${this.listItemSelector}[is-open]`);s&&s.forEach(t=>{t.isOpen&&t!==e&&this._toggleListItemState(t)})}_closeAllNavListItems(){this.navListItems.forEach(e=>{e.isOpen&&this._toggleListItemState(e)})}}u([c({type:Array})],o.prototype,"navListItems",2);customElements.define("toujou-main-nav",o,{extends:"nav"});
//# sourceMappingURL=toujou-main-nav.js.map
