class n extends HTMLElement{constructor(){super(),this.startingActiveLevel=1,this.maximalLevel=3,this._backButtonEl=null,this._mainNavEl=null,this._subtitleEl=null,this._subtitleText="",this._activeLevel=null,this._chevrons=[],this._currentOpenItems=[],this.ATTRIBUTES={NAV_OPEN_LEVEL:"open-level",LI_OPEN_ITEM:"is-open"}}set activeLevel(t){console.log("setting active level",t),this._activeLevel=t,this._updateUI()}get activeLevel(){return this._activeLevel}connectedCallback(){var t;this._getElements(),this.activeLevel=this.startingActiveLevel,(t=this._backButtonEl)==null||t.addEventListener("click",this._handleBackButtonClick.bind(this)),this._chevrons.forEach(e=>{e.addEventListener("click",this._handleChevronClick.bind(this))})}_getElements(){this._backButtonEl=this.querySelector(".main-nav__back-button"),this._mainNavEl=this.querySelector(".main-nav__list"),this._subtitleEl=this.querySelector(".main-nav__subtitle"),this._chevrons=Array.from(this.querySelectorAll(".main-nav__chevron"))}_updateUI(){!this.activeLevel||(this._subtitleEl.textContent=this._subtitleText,this.setAttribute(this.ATTRIBUTES.NAV_OPEN_LEVEL,String(this.activeLevel)))}_handleBackButtonClick(){if(this.activeLevel>1){this.activeLevel=this.activeLevel-1;const t=this.querySelectorAll(".main-nav__list-item[is-open]");if(!t.length)return;t.forEach(e=>{parseInt(e.getAttribute("nav-item-level"))>=this.activeLevel&&e.removeAttribute(this.ATTRIBUTES.LI_OPEN_ITEM)})}}_handleChevronClick(t){var s;const i=t.target.closest(".main-nav__list-item");i.setAttribute(this.ATTRIBUTES.LI_OPEN_ITEM,"");const l=((s=i.querySelector(".main-nav__link > .main-nav__text"))==null?void 0:s.textContent)||null;this._subtitleText=l||"",this.activeLevel<this.maximalLevel&&(this.activeLevel=this.activeLevel+1)}}customElements.define("toujou-sliding-nav",n,{extends:"nav"});
