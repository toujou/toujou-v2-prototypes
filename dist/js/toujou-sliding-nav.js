class l extends HTMLElement{constructor(){super(...arguments),this.navAttributes={navOpenLevel:"open-level",liOpenItem:"is-open"},this.startingActiveLevel=1,this.maximalLevel=3,this.topbarMqlChangeEventName="toujou-topbar-breakpoint-change",this.burgerButtonStateChangeEvent="toujou-burger-button-state-change",this._backButtonEl=null,this._mainNavEl=null,this._subtitleEl=null,this._subtitleText="",this._activeLevel=null,this._chevrons=[]}set activeLevel(t){this._activeLevel=t,this._updateUI()}get activeLevel(){return this._activeLevel}connectedCallback(){var t;this._getElements(),this.activeLevel=this.startingActiveLevel,(t=this._backButtonEl)==null||t.addEventListener("click",this._handleBackButtonClick.bind(this)),this._chevrons.forEach(e=>{e.addEventListener("click",this._handleChevronClick.bind(this))}),window.addEventListener(this.topbarMqlChangeEventName,this._handleMqlChange.bind(this)),window.addEventListener(this.burgerButtonStateChangeEvent,this._handleBurgerButtonClick.bind(this))}disconnectedCallback(){var t;(t=this._backButtonEl)==null||t.removeEventListener("click",this._handleBackButtonClick.bind(this)),this._chevrons.forEach(e=>{e.removeEventListener("click",this._handleChevronClick.bind(this))}),window.removeEventListener(this.topbarMqlChangeEventName,this._handleMqlChange.bind(this)),window.removeEventListener(this.burgerButtonStateChangeEvent,this._handleBurgerButtonClick.bind(this))}_getElements(){this._backButtonEl=this.querySelector(".main-nav__back-button"),this._mainNavEl=this.querySelector(".main-nav__list"),this._subtitleEl=this.querySelector(".main-nav__subtitle"),this._chevrons=Array.from(this.querySelectorAll(".main-nav__chevron"))}_updateUI(){!this.activeLevel||(this._subtitleEl.textContent=this._subtitleText,this.setAttribute(this.navAttributes.navOpenLevel,String(this.activeLevel)))}_handleBackButtonClick(){if(this.activeLevel>1){this.activeLevel=this.activeLevel-1;const t=this.querySelectorAll(".main-nav__list-item[is-open]");if(!t.length)return;t.forEach(e=>{parseInt(e.getAttribute("nav-item-level"))>=this.activeLevel&&e.removeAttribute(this.navAttributes.liOpenItem)})}}_handleChevronClick(t){var n;const i=t.target.closest(".main-nav__list-item");i.setAttribute(this.navAttributes.liOpenItem,"");const s=((n=i.querySelector(".main-nav__link > .main-nav__text"))==null?void 0:n.textContent)||null;this._subtitleText=s||"",this.activeLevel<this.maximalLevel&&(this.activeLevel=this.activeLevel+1)}_handleMqlChange(t){t.detail.state||this._stateReset()}_handleBurgerButtonClick(t){console.log("eeee"),t.detail.state||this._stateReset()}_stateReset(){this.activeLevel=this.startingActiveLevel;const t=this.querySelectorAll(".main-nav__list-item[is-open]");!t.length||t.forEach(e=>{e.removeAttribute(this.navAttributes.liOpenItem)})}}customElements.define("toujou-sliding-nav",l,{extends:"nav"});
//# sourceMappingURL=toujou-sliding-nav.js.map
