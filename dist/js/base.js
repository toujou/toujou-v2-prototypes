var t=Object.defineProperty;import{i as e}from"./main-nav.js";import{i as n,s as o,y as i,Z as r}from"./lit-element-7f3592a7.js";import{_ as a,a as s}from"./tslib.es6-410d8908.js";import{e as c}from"./custom-element-ff9a146d.js";import{e as l}from"./property-67fa6154.js";import"./query-assigned-elements-66edff90.js";import{a as u,d}from"./redux-2802c44f.js";function h(){e()}!function(){var t=function(t,e){var n=function(t){for(var e=0,n=t.length;e<n;e++)o(t[e])},o=function(t){var e=t.target,n=t.attributeName,o=t.oldValue;e.attributeChangedCallback(n,o,e.getAttribute(n))};return function(i,r){var a=i.constructor.observedAttributes;return a&&t(r).then((function(){new e(n).observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:a});for(var t=0,r=a.length;t<r;t++)i.hasAttribute(a[t])&&o({target:i,attributeName:a[t],oldValue:null})})),i}};function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function n(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==o.return||o.return()}finally{if(c)throw a}}}}var o=!0,i=!1,r="querySelectorAll",a="querySelectorAll",s=self,c=s.document,l=s.Element,u=s.MutationObserver,d=s.Set,h=s.WeakMap,m=function(t){return a in t},p=[].filter,f=function(t){var e=new h,s=function(n,o){var i;if(o)for(var r,a=function(t){return t.matches||t.webkitMatchesSelector||t.msMatchesSelector}(n),s=0,c=g.length;s<c;s++)a.call(n,r=g[s])&&(e.has(n)||e.set(n,new d),(i=e.get(n)).has(r)||(i.add(r),t.handle(n,o,r)));else e.has(n)&&(i=e.get(n),e.delete(n),i.forEach((function(e){t.handle(n,o,e)})))},f=function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,o=t.length;n<o;n++)s(t[n],e)},g=t.query,b=t.root||c,v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MutationObserver,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["*"],c=function e(i,a,s,c,l,u){var d,h=n(i);try{for(h.s();!(d=h.n()).done;){var m=d.value;(u||r in m)&&(l?s.has(m)||(s.add(m),c.delete(m),t(m,l)):c.has(m)||(c.add(m),s.delete(m),t(m,l)),u||e(m[r](a),a,s,c,l,o))}}catch(p){h.e(p)}finally{h.f()}},l=new a((function(t){if(s.length){var e,r=s.join(","),a=new Set,l=new Set,u=n(t);try{for(u.s();!(e=u.n()).done;){var d=e.value,h=d.addedNodes,m=d.removedNodes;c(m,r,a,l,i,i),c(h,r,a,l,o,i)}}catch(p){u.e(p)}finally{u.f()}}})),u=l.observe;return(l.observe=function(t){return u.call(l,t,{subtree:o,childList:o})})(e),l}(s,b,u,g),y=l.prototype.attachShadow;return y&&(l.prototype.attachShadow=function(t){var e=y.call(this,t);return v.observe(e),e}),g.length&&f(b[a](g)),{drop:function(t){for(var n=0,o=t.length;n<o;n++)e.delete(t[n])},flush:function(){for(var t=v.takeRecords(),e=0,n=t.length;e<n;e++)f(p.call(t[e].removedNodes,m),!1),f(p.call(t[e].addedNodes,m),!0)},observer:v,parse:f}},g=self,b=g.document,v=g.Map,y=g.MutationObserver,w=g.Object,k=g.Set,S=g.WeakMap,_=g.Element,E=g.HTMLElement,T=g.Node,j=g.Error,x=g.TypeError,C=g.Reflect,O=w.defineProperty,A=w.keys,I=w.getOwnPropertyNames,M=w.setPrototypeOf,R=!self.customElements,N=function(t){for(var e=A(t),n=[],o=new k,i=e.length,r=0;r<i;r++){n[r]=t[e[r]];try{delete t[e[r]]}catch(a){o.add(r)}}return function(){for(var r=0;r<i;r++)o.has(r)||(t[e[r]]=n[r])}};if(R){var L=function(){var t=this.constructor;if(!P.has(t))throw new x("Illegal constructor");var e=P.get(t);if(U)return $(U,e);var n=z.call(b,e);return $(M(n,t.prototype),e)},z=b.createElement,P=new v,B=new v,D=new v,F=new v,H=[],q=f({query:H,handle:function(t,e,n){var o=D.get(n);if(e&&!o.isPrototypeOf(t)){var i=N(t);U=M(t,o);try{new o.constructor}finally{U=null,i()}}var r="".concat(e?"":"dis","connectedCallback");r in o&&t[r]()}}).parse,U=null,W=function(t){if(!B.has(t)){var e,n=new Promise((function(t){e=t}));B.set(t,{$:n,_:e})}return B.get(t).$},$=t(W,y);self.customElements={define:function(t,e){if(F.has(t))throw new j('the name "'.concat(t,'" has already been used with this registry'));P.set(e,t),D.set(t,e.prototype),F.set(t,e),H.push(t),W(t).then((function(){q(b.querySelectorAll(t))})),B.get(t)._(e)},get:function(t){return F.get(t)},whenDefined:W},O(L.prototype=E.prototype,"constructor",{value:L}),self.HTMLElement=L,b.createElement=function(t,e){var n=e&&e.is,o=n?F.get(n):F.get(t);return o?new o:z.call(b,t)},"isConnected"in T.prototype||O(T.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(R=!self.customElements.get("extends-br"))try{var V=function t(){return self.Reflect.construct(HTMLBRElement,[],t)};V.prototype=HTMLLIElement.prototype;var G="extends-br";self.customElements.define("extends-br",V,{extends:"br"}),R=b.createElement("br",{is:G}).outerHTML.indexOf(G)<0;var Y=self.customElements,J=Y.get,X=Y.whenDefined;self.customElements.whenDefined=function(t){var e=this;return X.call(this,t).then((function(n){return n||J.call(e,t)}))}}catch(yt){}if(R){var K=function(t){var e=it.get(t);mt(e.querySelectorAll(this),t.isConnected)},Q=self.customElements,Z=b.createElement,tt=Q.define,et=Q.get,nt=Q.upgrade,ot=(C||{construct:function(t){return t.call(this)}}).construct,it=new S,rt=new k,at=new v,st=new v,ct=new v,lt=new v,ut=[],dt=[],ht=function(t){return lt.get(t)||et.call(Q,t)},mt=f({query:dt,handle:function(t,e,n){var o=ct.get(n);if(e&&!o.isPrototypeOf(t)){var i=N(t);vt=M(t,o);try{new o.constructor}finally{vt=null,i()}}var r="".concat(e?"":"dis","connectedCallback");r in o&&t[r]()}}).parse,pt=f({query:ut,handle:function(t,e){it.has(t)&&(e?rt.add(t):rt.delete(t),dt.length&&K.call(dt,t))}}).parse,ft=_.prototype.attachShadow;ft&&(_.prototype.attachShadow=function(t){var e=ft.call(this,t);return it.set(this,e),e});var gt=function(t){if(!st.has(t)){var e,n=new Promise((function(t){e=t}));st.set(t,{$:n,_:e})}return st.get(t).$},bt=t(gt,y),vt=null;I(self).filter((function(t){return/^HTML.*Element$/.test(t)})).forEach((function(t){var e=self[t];function n(){var t=this.constructor;if(!at.has(t))throw new x("Illegal constructor");var n=at.get(t),o=n.is,i=n.tag;if(o){if(vt)return bt(vt,o);var r=Z.call(b,i);return r.setAttribute("is",o),bt(M(r,t.prototype),o)}return ot.call(this,e,[],t)}O(n.prototype=e.prototype,"constructor",{value:n}),O(self,t,{value:n})})),b.createElement=function(t,e){var n=e&&e.is;if(n){var o=lt.get(n);if(o&&at.get(o).tag===t)return new o}var i=Z.call(b,t);return n&&i.setAttribute("is",n),i},Q.get=ht,Q.whenDefined=gt,Q.upgrade=function(t){var e=t.getAttribute("is");if(e){var n=lt.get(e);if(n)return void bt(M(t,n.prototype),e)}nt.call(Q,t)},Q.define=function(t,e,n){if(ht(t))throw new j("'".concat(t,"' has already been defined as a custom element"));var o,i=n&&n.extends;at.set(e,i?{is:t,tag:i}:{is:"",tag:t}),i?(o="".concat(i,'[is="').concat(t,'"]'),ct.set(o,e.prototype),lt.set(t,e),dt.push(o)):(tt.apply(Q,arguments),ut.push(o=t)),gt(t).then((function(){i?(mt(b.querySelectorAll(o)),rt.forEach(K,[o])):pt(b.querySelectorAll(o))})),st.get(t)._(e)}}}(),"loading"!==document.readyState?setTimeout((()=>{h()})):document.addEventListener("DOMContentLoaded",(()=>{h()}));var m=!1;if("undefined"!=typeof window){var p={get passive(){m=!0}};window.addEventListener("testPassive",null,p),window.removeEventListener("testPassive",null,p)}var f,g="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),b=[],v=!1,y=-1,w=void 0,k=void 0,S=void 0,_=function(t){return b.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},E=function(t){var e=t||window.event;return!!_(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},T=function(){void 0!==S&&(document.body.style.paddingRight=S,S=void 0),void 0!==w&&(document.body.style.overflow=w,w=void 0)},j=function(){if(void 0!==k){var t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10);document.body.style.position=k.position,document.body.style.top=k.top,document.body.style.left=k.left,window.scrollTo(e,t),k=void 0}},x=function(t,e){if(t){if(!b.some((function(e){return e.targetElement===t}))){var n={targetElement:t,options:e||{}};b=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(b),[n]),g?window.requestAnimationFrame((function(){if(void 0===k){k={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,e=t.scrollY,n=t.scrollX,o=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-e,document.body.style.left=-n,setTimeout((function(){return window.requestAnimationFrame((function(){var t=o-window.innerHeight;t&&e>=o&&(document.body.style.top=-(e+t))}))}),300)}})):function(t){if(void 0===S){var e=!!t&&!0===t.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;if(e&&n>0){var o=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);S=document.body.style.paddingRight,document.body.style.paddingRight=o+n+"px"}}void 0===w&&(w=document.body.style.overflow,document.body.style.overflow="hidden")}(e),g&&(t.ontouchstart=function(t){1===t.targetTouches.length&&(y=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var n=t.targetTouches[0].clientY-y;!_(t.target)&&(e&&0===e.scrollTop&&n>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&n<0?E(t):t.stopPropagation())}(e,t)},v||(document.addEventListener("touchmove",E,m?{passive:!1}:void 0),v=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},C={};f={get exports(){return C},set exports(t){C=t}},console.info("\nIFRAME-RESIZER\n\nIframe-Resizer 5 is now available via the following two packages:\n\n * @iframe-resizer/parent\n * @iframe-resizer/child\n\nAdditionally their are also new versions of iframe-resizer for React, Vue, and jQuery.\n\nVersion 5 of iframe-resizer has been extensively rewritten to use modern browser APIs, which has enabled significantly better performance and greater accuracy in the detection of content resizing events.\n\nPlease see https://iframe-resizer.com/upgrade for more details.\n"),function(t){if("undefined"!=typeof window){var e,n,o=0,i=!1,r=!1,a=7,s="[iFrameSizer]",c=s.length,l=null,u=window.requestAnimationFrame,d=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),h={},m=null,p=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,license:"1jqr0si6pnt",log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){E("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}}),g={};window.jQuery!==t&&((n=window.jQuery).fn?n.fn.iFrameResize||(n.fn.iFrameResize=function(t){return this.filter("iframe").each((function(e,n){B(n,t)})).end()}):_("","Unable to bind to jQuery, it is not fully loaded.")),"function"==typeof t&&t.amd?t([],U):f.exports=U(),window.iFrameResize=window.iFrameResize||U()}function b(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function v(t,e,n){t.addEventListener(e,n,!1)}function y(t,e,n){t.removeEventListener(e,n,!1)}function w(t){return s+"["+function(t){var e="Host page: "+t;return window.top!==window.self&&(e=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+t:"Nested host page: "+t),e}(t)+"]"}function k(t){return h[t]?h[t].log:i}function S(t,e){T("log",t,e,k(t))}function _(t,e){T("info",t,e,k(t))}function E(t,e){T("warn",t,e,!0)}function T(t,e,n,o){!0===o&&"object"==typeof window.console&&console[t](w(e),n)}function j(t){function e(){i("Height"),i("Width"),L((function(){N(H),I(q),b("onResized",H)}),H,"init")}function n(t){return"border-box"!==t.boxSizing?0:(t.paddingTop?parseInt(t.paddingTop,10):0)+(t.paddingBottom?parseInt(t.paddingBottom,10):0)}function o(t){return"border-box"!==t.boxSizing?0:(t.borderTopWidth?parseInt(t.borderTopWidth,10):0)+(t.borderBottomWidth?parseInt(t.borderBottomWidth,10):0)}function i(t){var e=Number(h[q]["max"+t]),n=Number(h[q]["min"+t]),o=t.toLowerCase(),i=Number(H[o]);S(q,"Checking "+o+" is in range "+n+"-"+e),i<n&&(i=n,S(q,"Set "+o+" to min value")),i>e&&(i=e,S(q,"Set "+o+" to max value")),H[o]=""+i}function r(t){return F.slice(F.indexOf(":")+a+t)}function u(t,e){var n,o,i;n=function(){var n,o;z("Send Page Info","pageInfo:"+(n=document.body.getBoundingClientRect(),o=H.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:o.height,iframeWidth:o.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(o.top-n.top,10),offsetLeft:parseInt(o.left-n.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),t,e)},o=32,g[i=e]||(g[i]=setTimeout((function(){g[i]=null,n()}),o))}function d(t){var e=t.getBoundingClientRect();return A(q),{x:Math.floor(Number(e.left)+Number(l.x)),y:Math.floor(Number(e.top)+Number(l.y))}}function m(t){var e=t?d(H.iframe):{x:0,y:0},n={x:Number(H.width)+e.x,y:Number(H.height)+e.y};S(q,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top===window.self?(l=n,p(),S(q,"--")):window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](n.x,n.y):E(q,"Unable to scroll to requested position, window.parentIFrame not found")}function p(){!1===b("onScroll",l)?M():I(q)}function f(t){var e={};if(0===Number(H.width)&&0===Number(H.height)){var n=r(9).split(":");e={x:n[1],y:n[0]}}else e={x:H.width,y:H.height};b(t,{iframe:H.iframe,screenX:Number(e.x),screenY:Number(e.y),type:H.type})}function b(t,e){return x(q,t,e)}var w,k,T,j,C,B,D,F=t.data,H={},q=null;"[iFrameResizerChild]Ready"===F?function(){for(var t in h)z("iFrame requested init",P(t),h[t].iframe,t)}():s===(""+F).slice(0,c)&&F.slice(c).split(":")[0]in h?(j=F.slice(c).split(":"),C=j[1]?parseInt(j[1],10):0,B=h[j[0]]&&h[j[0]].iframe,D=getComputedStyle(B),H={iframe:B,id:j[0],height:C+n(D)+o(D),width:j[2],type:j[3]},q=H.id,h[q]&&(h[q].loaded=!0),(T=H.type in{true:1,false:1,undefined:1})&&S(q,"Ignoring init message from meta parent page"),!T&&(k=!0,h[w=q]||(k=!1,E(H.type+" No settings for "+w+". Message was: "+F)),k)&&(S(q,"Received: "+F),function(){var t=!0;return null===H.iframe&&(E(q,"IFrame ("+H.id+") not found"),t=!1),t}()&&function(){var e,n=t.origin,o=h[q]&&h[q].checkOrigin;if(o&&""+n!="null"&&!(o.constructor===Array?function(){var t=0,e=!1;for(S(q,"Checking connection is from allowed list of origins: "+o);t<o.length;t++)if(o[t]===n){e=!0;break}return e}():(e=h[q]&&h[q].remoteHost,S(q,"Checking connection is from: "+e),n===e)))throw new Error("Unexpected message received from: "+n+" for "+H.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(h[q]&&h[q].firstRun&&h[q]&&(h[q].firstRun=!1),H.type){case"close":O(H.iframe);break;case"message":a=r(6),S(q,"onMessage passed: {iframe: "+H.iframe.id+", message: "+a+"}"),b("onMessage",{iframe:H.iframe,message:JSON.parse(a)}),S(q,"--");break;case"mouseenter":f("onMouseEnter");break;case"mouseleave":f("onMouseLeave");break;case"autoResize":h[q].autoResize=JSON.parse(r(9));break;case"scrollTo":m(!1);break;case"scrollToOffset":m(!0);break;case"pageInfo":u(h[q]&&h[q].iframe,q),function(){function t(t,o){function i(){h[n]?u(h[n].iframe,n):e()}["scroll","resize"].forEach((function(e){S(n,t+e+" listener for sendPageInfo"),o(window,e,i)}))}function e(){t("Remove ",y)}var n=q;t("Add ",v),h[n]&&(h[n].stopPageInfo=e)}();break;case"pageInfoStop":h[q]&&h[q].stopPageInfo&&(h[q].stopPageInfo(),delete h[q].stopPageInfo);break;case"inPageLink":n=r(9).split("#")[1]||"",o=decodeURIComponent(n),(i=document.getElementById(o)||document.getElementsByName(o)[0])?(t=d(i),S(q,"Moving to in page link (#"+n+") at x: "+t.x+" y: "+t.y),l={x:t.x,y:t.y},p(),S(q,"--")):window.top===window.self?S(q,"In page link #"+n+" not found"):window.parentIFrame?window.parentIFrame.moveToAnchor(n):S(q,"In page link #"+n+" not found and window.parentIFrame not found");break;case"reset":R(H);break;case"init":e(),b("onInit",H.iframe);break;default:0===Number(H.width)&&0===Number(H.height)?E("Unsupported message received ("+H.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):e()}var t,n,o,i,a}())):_(q,"Ignored: "+F)}function x(t,e,n){var o=null,i=null;if(h[t]){if("function"!=typeof(o=h[t][e]))throw new TypeError(e+" on iFrame["+t+"] is not a function");i=o(n)}return i}function C(t){var e=t.id;delete h[e]}function O(t){var n=t.id;if(!1!==x(n,"onClose",n)){S(n,"Removing iFrame: "+n);try{t.parentNode&&t.parentNode.removeChild(t)}catch(o){E(o)}x(n,"onClosed",n),S(n,"--"),C(t),e&&(e.disconnect(),e=null)}else S(n,"Close iframe cancelled by onClose event")}function A(e){null===l&&S(e,"Get page position: "+(l={x:window.pageXOffset===t?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===t?document.documentElement.scrollTop:window.pageYOffset}).x+","+l.y)}function I(t){null!==l&&(window.scrollTo(l.x,l.y),S(t,"Set page position: "+l.x+","+l.y),M())}function M(){l=null}function R(t){S(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),A(t.id),L((function(){N(t),z("reset","reset",t.iframe,t.id)}),t,"reset")}function N(t){function e(e){r||"0"!==t[e]||(r=!0,S(o,"Hidden iFrame detected, creating visibility listener"),function(){function t(){function t(t){function e(e){return"0px"===(h[t]&&h[t].iframe.style[e])}function n(t){return null!==t.offsetParent}h[t]&&n(h[t].iframe)&&(e("height")||e("width"))&&z("Visibility change","resize",h[t].iframe,t)}Object.keys(h).forEach((function(e){t(e)}))}function e(e){S("window","Mutation observed: "+e[0].target+" "+e[0].type),D(t,16)}function n(){var t=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new o(e).observe(t,n)}var o=b();o&&n()}())}function n(n){!function(e){t.id?(t.iframe.style[e]=t[e]+"px",S(t.id,"IFrame ("+o+") "+e+" set to "+t[e]+"px")):S("undefined","messageData id not set")}(n),e(n)}var o=t.iframe.id;h[o]&&(h[o].sizeHeight&&n("height"),h[o].sizeWidth&&n("width"))}function L(t,e,n){n!==e.type&&u&&!window.jasmine?(S(e.id,"Requesting animation frame"),u(t)):t()}function z(t,e,n,o,i){var r,a=!1;o=o||n.id,h[o]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(r=h[o]&&h[o].targetOrigin,S(o,"["+t+"] Sending msg to iframe["+o+"] ("+e+") targetOrigin: "+r),n.contentWindow.postMessage(s+e,r)):E(o,"["+t+"] IFrame("+o+") not found"),i&&h[o]&&h[o].warningTimeout&&(h[o].msgTimeout=setTimeout((function(){!h[o]||h[o].loaded||a||(a=!0,E(o,"IFrame has not responded within "+h[o].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}),h[o].warningTimeout)))}function P(t){return t+":"+h[t].bodyMarginV1+":"+h[t].sizeWidth+":"+h[t].log+":"+h[t].interval+":"+h[t].enablePublicMethods+":"+h[t].autoResize+":"+h[t].bodyMargin+":"+h[t].heightCalculationMethod+":"+h[t].bodyBackground+":"+h[t].bodyPadding+":"+h[t].tolerance+":"+h[t].inPageLinks+":"+h[t].resizeFrom+":"+h[t].widthCalculationMethod+":"+h[t].mouseEvents}function B(n,r){function a(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],E(m,"Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}var s,c,l,u,m=function(t){if("string"!=typeof t)throw new TypeError("Invaild id for iFrame. Expected String");var e;return""===t&&(n.id=(e=r&&r.id||p.id+o++,null!==document.getElementById(e)&&(e+=o++),t=e),i=(r||{}).log,S(t,"Added missing iframe ID: "+t+" ("+n.src+")")),t}(n.id);m in h&&"iFrameResizer"in n?E(m,"Ignored iFrame, already setup."):(l=(l=r)||{},h[m]=Object.create(null),h[m].iframe=n,h[m].firstRun=!0,h[m].remoteHost=n.src&&n.src.split("/").slice(0,3).join("/"),function(t){if("object"!=typeof t)throw new TypeError("Options is not an object")}(l),Object.keys(l).forEach(a,l),function(t){for(var e in p)Object.prototype.hasOwnProperty.call(p,e)&&(h[m][e]=Object.prototype.hasOwnProperty.call(t,e)?t[e]:p[e])}(l),h[m]&&(h[m].targetOrigin=!0===h[m].checkOrigin?""===(u=h[m].remoteHost)||null!==u.match(/^(about:blank|javascript:|file:\/\/)/)?"*":u:"*"),function(){switch(S(m,"IFrame scrolling "+(h[m]&&h[m].scrolling?"enabled":"disabled")+" for "+m),n.style.overflow=!1===(h[m]&&h[m].scrolling)?"hidden":"auto",h[m]&&h[m].scrolling){case"omit":break;case!0:n.scrolling="yes";break;case!1:n.scrolling="no";break;default:n.scrolling=h[m]?h[m].scrolling:"no"}}(),function(){function t(t){var e=h[m][t];1/0!==e&&0!==e&&(n.style[t]="number"==typeof e?e+"px":e,S(m,"Set "+t+" = "+n.style[t]))}function e(t){if(h[m]["min"+t]>h[m]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}e("Height"),e("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),"number"!=typeof(h[m]&&h[m].bodyMargin)&&"0"!==(h[m]&&h[m].bodyMargin)||(h[m].bodyMarginV1=h[m].bodyMargin,h[m].bodyMargin=h[m].bodyMargin+"px"),s=P(m),(c=b())&&(e=function(t){if(!n.parentNode)return null;var e=new t((function(t){t.forEach((function(t){Array.prototype.slice.call(t.removedNodes).forEach((function(t){t===n&&O(n)}))}))}));return e.observe(n.parentNode,{childList:!0}),e}(c)),v(n,"load",(function(){var e,o;z("iFrame.onload",s,n,t,!0),e=h[m]&&h[m].firstRun,o=h[m]&&h[m].heightCalculationMethod in d,!e&&o&&R({iframe:n,height:0,width:0,type:"init"})})),z("init",s,n,t,!0),h[m]&&(h[m].iframe.iFrameResizer={close:O.bind(null,h[m].iframe),removeListeners:C.bind(null,h[m].iframe),resize:z.bind(null,"Window resize","resize",h[m].iframe),moveToAnchor:function(t){z("Move to anchor","moveToAnchor:"+t,h[m].iframe,m)},sendMessage:function(t){z("Send Message","message:"+(t=JSON.stringify(t)),h[m].iframe,m)}}))}function D(t,e){null===m&&(m=setTimeout((function(){m=null,t()}),e))}function F(){"hidden"!==document.visibilityState&&(S("document","Trigger event: Visibility change"),D((function(){H("Tab Visible","resize")}),16))}function H(t,e){Object.keys(h).forEach((function(n){(function(t){return h[t]&&"parent"===h[t].resizeFrom&&h[t].autoResize&&!h[t].firstRun})(n)&&z(t,e,h[n].iframe,n)}))}function q(){v(window,"message",j),v(window,"resize",(function(){var t;S("window","Trigger event: "+(t="resize")),D((function(){H("Window "+t,"resize")}),16)})),v(document,"visibilitychange",F),v(document,"-webkit-visibilitychange",F)}function U(){function e(t,e){e&&(function(){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">")}(),B(e,t),n.push(e))}var n;return function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!u;t+=1)u=window[e[t]+"RequestAnimationFrame"];u?u=u.bind(window):S("setup","RequestAnimationFrame not supported")}(),q(),function(o,i){switch(n=[],function(t){t&&t.enablePublicMethods&&E("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(o),typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),e.bind(t,o));break;case"object":e(o,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+")")}return n}}}();var O={};!function(t){!function(e){if("undefined"!=typeof window){var n=!0,o=10,i="",r=0,a="",s=null,c="",l=!1,u={resize:1,click:1},d=128,h=!0,m=1,p="bodyOffset",f=p,g=!0,b="",v={},y=32,w=null,k=!1,S=!1,_="[iFrameSizer]",E=_.length,T="",j={max:1,min:1,bodyScroll:1,documentElementScroll:1},x="child",C=window.parent,O="*",A=0,I=!1,M=null,R=16,N=1,L="scroll",z=L,P=window,B=function(){at("onMessage function not defined")},D=function(){},F=function(){},H={height:function(){return at("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return at("Custom width calculation function not defined"),document.body.scrollWidth}},q={},U=!1;try{var W=Object.create({},{passive:{get:function(){U=!0}}});window.addEventListener("test",et,W),window.removeEventListener("test",et,W)}catch(At){}var $,V,G,Y,J,X,K,Q={bodyOffset:function(){return document.body.offsetHeight+bt("marginTop")+bt("marginBottom")},offset:function(){return Q.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return H.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,yt(Q))},min:function(){return Math.min.apply(null,yt(Q))},grow:function(){return Q.max()},lowestElement:function(){return Math.max(Q.bodyOffset()||Q.documentElementOffset(),vt("bottom",kt()))},taggedElement:function(){return wt("bottom","data-iframe-height")}},Z={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return H.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Z.bodyScroll(),Z.documentElementScroll())},max:function(){return Math.max.apply(null,yt(Z))},min:function(){return Math.min.apply(null,yt(Z))},rightMostElement:function(){return vt("right",kt())},taggedElement:function(){return wt("right","data-iframe-width")}},tt=($=St,J=null,X=0,K=function(){X=Date.now(),J=null,Y=$.apply(V,G),J||(V=G=null)},function(){var t=Date.now();X||(X=t);var e=R-(t-X);return V=this,G=arguments,e<=0||e>R?(J&&(clearTimeout(J),J=null),X=t,Y=$.apply(V,G),J||(V=G=null)):J||(J=setTimeout(K,e)),Y});"iframeResizer"in window||(window.iframeChildListener=function(t){Ct({data:t,sameDomian:!0})},nt(window,"message",Ct),nt(window,"readystatechange",Ot),Ot())}function et(){}function nt(t,e,n,o){t.addEventListener(e,n,!!U&&(o||{}))}function ot(t){return t.charAt(0).toUpperCase()+t.slice(1)}function it(t){return _+"["+T+"] "+t}function rt(t){k&&"object"==typeof window.console&&console.log(it(t))}function at(t){"object"==typeof window.console&&console.warn(it(t))}function st(){var t;!function(){function t(t){return"true"===t}var o=b.slice(E).split(":");T=o[0],r=e===o[1]?r:Number(o[1]),l=e===o[2]?l:t(o[2]),k=e===o[3]?k:t(o[3]),y=e===o[4]?y:Number(o[4]),n=e===o[6]?n:t(o[6]),a=o[7],f=e===o[8]?f:o[8],i=o[9],c=o[10],A=e===o[11]?A:Number(o[11]),v.enable=e!==o[12]&&t(o[12]),x=e===o[13]?x:o[13],z=e===o[14]?z:o[14],S=e===o[15]?S:t(o[15])}(),rt("Initialising iFrame ("+window.location.href+")"),function(){function t(){var t=window.iFrameResizer;rt("Reading data from page: "+JSON.stringify(t)),Object.keys(t).forEach(ct,t),B="onMessage"in t?t.onMessage:B,D="onReady"in t?t.onReady:D,O="targetOrigin"in t?t.targetOrigin:O,f="heightCalculationMethod"in t?t.heightCalculationMethod:f,z="widthCalculationMethod"in t?t.widthCalculationMethod:z}function e(t,e){return"function"==typeof t&&(rt("Setup custom "+e+"CalcMethod"),H[e]=t,t="custom"),t}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(t(),f=e(f,"height"),z=e(z,"width"));rt("TargetOrigin for parent set to: "+O)}(),function(){e===a&&(a=r+"px");lt("margin",function(t,e){-1!==e.indexOf("-")&&(at("Negative CSS value ignored for "+t),e="");return e}("margin",a))}(),lt("background",i),lt("padding",c),(t=document.createElement("div")).style.clear="both",t.style.display="block",t.style.height="0",document.body.appendChild(t),mt(),pt(),document.documentElement.style.height="",document.body.style.height="",rt('HTML & body height set to "auto"'),rt("Enable public methods"),P.parentIFrame={autoResize:function(t){return!0===t&&!1===n?(n=!0,ft()):!1===t&&!0===n&&(n=!1,dt("remove"),null!==s&&s.disconnect(),clearInterval(w)),xt(0,0,"autoResize",JSON.stringify(n)),n},close:function(){xt(0,0,"close")},getId:function(){return T},getPageInfo:function(t){"function"==typeof t?(F=t,xt(0,0,"pageInfo")):(F=function(){},xt(0,0,"pageInfoStop"))},moveToAnchor:function(t){v.findTarget(t)},reset:function(){jt("parentIFrame.reset")},scrollTo:function(t,e){xt(e,t,"scrollTo")},scrollToOffset:function(t,e){xt(e,t,"scrollToOffset")},sendMessage:function(t,e){xt(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){f=t,mt()},setWidthCalculationMethod:function(t){z=t,pt()},setTargetOrigin:function(t){rt("Set targetOrigin: "+t),O=t},size:function(t,e){_t("size","parentIFrame.size("+(t||"")+(e?","+e:"")+")",t,e)}},function(){if(!0!==S)return;function t(t){xt(0,0,t.type,t.screenY+":"+t.screenX)}function e(e,n){rt("Add event listener: "+n),nt(window.document,e,t)}e("mouseenter","Mouse Enter"),e("mouseleave","Mouse Leave")}(),ft(),v=function(){function t(){return{x:window.pageXOffset===e?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===e?document.documentElement.scrollTop:window.pageYOffset}}function n(e){var n=e.getBoundingClientRect(),o=t();return{x:parseInt(n.left,10)+parseInt(o.x,10),y:parseInt(n.top,10)+parseInt(o.y,10)}}function o(t){function o(t){var e=n(t);rt("Moving to in page link (#"+i+") at x: "+e.x+" y: "+e.y),xt(e.y,e.x,"scrollToOffset")}var i=t.split("#")[1]||t,r=decodeURIComponent(i),a=document.getElementById(r)||document.getElementsByName(r)[0];e===a?(rt("In page link (#"+i+") not found in iFrame, so sending to parent"),xt(0,0,"inPageLink","#"+i)):o(a)}function i(){var t=window.location.hash,e=window.location.href;""!==t&&"#"!==t&&o(e)}function r(){function t(t){function e(t){t.preventDefault(),o(this.getAttribute("href"))}"#"!==t.getAttribute("href")&&nt(t,"click",e)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),t)}function a(){nt(window,"hashchange",i)}function s(){setTimeout(i,d)}function c(){Array.prototype.forEach&&document.querySelectorAll?(rt("Setting up location.hash handlers"),r(),a(),s()):at("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}v.enable?c():rt("In page linking not enabled");return{findTarget:o}}(),_t("init","Init message from host page"),D()}function ct(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],at("Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}function lt(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,rt("Body "+t+' set to "'+n+'"'))}function ut(t){var e={add:function(e){function n(){_t(t.eventName,t.eventType)}q[e]=n,nt(window,e,n,{passive:!0})},remove:function(t){var e,n,o,i=q[t];delete q[t],e=window,n=t,o=i,e.removeEventListener(n,o,!1)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(e[t.method])):e[t.method](t.eventName),rt(ot(t.method)+" event listener: "+t.eventType)}function dt(t){ut({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),ut({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),ut({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),ut({method:t,eventType:"Input",eventName:"input"}),ut({method:t,eventType:"Mouse Up",eventName:"mouseup"}),ut({method:t,eventType:"Mouse Down",eventName:"mousedown"}),ut({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),ut({method:t,eventType:"Print",eventNames:["afterprint","beforeprint"]}),ut({method:t,eventType:"Ready State Change",eventName:"readystatechange"}),ut({method:t,eventType:"Touch Start",eventName:"touchstart"}),ut({method:t,eventType:"Touch End",eventName:"touchend"}),ut({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),ut({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),ut({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),ut({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===x&&ut({method:t,eventType:"IFrame Resized",eventName:"resize"})}function ht(t,e,n,o){return e!==t&&(t in n||(at(t+" is not a valid option for "+o+"CalculationMethod."),t=e),rt(o+' calculation method set to "'+t+'"')),t}function mt(){f=ht(f,p,Q,"height")}function pt(){z=ht(z,L,Z,"width")}function ft(){var t;!0===n?(dt("add"),t=0>y,window.MutationObserver||window.WebKitMutationObserver?t?gt():s=function(){function t(t){function e(t){!1===t.complete&&(rt("Attach listeners to "+t.src),t.addEventListener("load",i,!1),t.addEventListener("error",r,!1),c.push(t))}"attributes"===t.type&&"src"===t.attributeName?e(t.target):"childList"===t.type&&Array.prototype.forEach.call(t.target.querySelectorAll("img"),e)}function e(t){c.splice(c.indexOf(t),1)}function n(t){rt("Remove listeners from "+t.src),t.removeEventListener("load",i,!1),t.removeEventListener("error",r,!1),e(t)}function o(t,e,o){n(t.target),_t(e,o+": "+t.target.src)}function i(t){o(t,"imageLoad","Image loaded")}function r(t){o(t,"imageLoadFailed","Image load failed")}function a(e){_t("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}function s(){var t=document.querySelector("body"),e={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return u=new l(a),rt("Create body MutationObserver"),u.observe(t,e),u}var c=[],l=window.MutationObserver||window.WebKitMutationObserver,u=s();return{disconnect:function(){"disconnect"in u&&(rt("Disconnect body MutationObserver"),u.disconnect(),c.forEach(n))}}}():(rt("MutationObserver not supported in this browser!"),gt())):rt("Auto Resize disabled")}function gt(){0!==y&&(rt("setInterval: "+y+"ms"),w=setInterval((function(){_t("interval","setInterval: "+y)}),Math.abs(y)))}function bt(t,e){var n=0;return e=e||document.body,n=null===(n=document.defaultView.getComputedStyle(e,null))?0:n[t],parseInt(n,o)}function vt(t,e){for(var n=e.length,o=0,i=0,r=ot(t),a=Date.now(),s=0;s<n;s++)(o=e[s].getBoundingClientRect()[t]+bt("margin"+r,e[s]))>i&&(i=o);return a=Date.now()-a,rt("Parsed "+n+" HTML elements"),rt("Element position calculated in "+a+"ms"),function(t){t>R/2&&rt("Event throttle increased to "+(R=2*t)+"ms")}(a),i}function yt(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function wt(t,e){var n=document.querySelectorAll("["+e+"]");return 0===n.length&&(at("No tagged elements ("+e+") found on page"),document.querySelectorAll("body *")),vt(t,n)}function kt(){return document.querySelectorAll("body *")}function St(t,n,o,i){var r,a;!function(){function t(t,e){return!(Math.abs(t-e)<=A)}return r=e===o?Q[f]():o,a=e===i?Z[z]():i,t(m,r)||l&&t(N,a)}()&&"init"!==t?!(t in{init:1,interval:1,size:1})&&(f in j||l&&z in j)?jt(n):t in{interval:1}||rt("No change in size detected"):(Et(),xt(m=r,N=a,t))}function _t(t,e,n,o){I&&t in u?rt("Trigger event cancelled: "+t):(t in{reset:1,resetPage:1,init:1}||rt("Trigger event: "+e),"init"===t?St(t,e,n,o):tt(t,e,n,o))}function Et(){I||(I=!0,rt("Trigger event lock on")),clearTimeout(M),M=setTimeout((function(){I=!1,rt("Trigger event lock off"),rt("--")}),d)}function Tt(t){m=Q[f](),N=Z[z](),xt(m,N,t)}function jt(t){var e=f;f=p,rt("Reset trigger event: "+t),Et(),Tt("reset"),f=e}function xt(t,n,o,i,r){var a;e===r?r=O:rt("Message targetOrigin: "+r),rt("Sending message to host page ("+(a=T+":"+t+":"+n+":"+o+(e===i?"":":"+i))+")"),C.postMessage(_+a,r)}function Ct(n){var o={init:function(){b=n.data,C=n.source,st(),h=!1,setTimeout((function(){g=!1}),d)},reset:function(){g?rt("Page reset ignored by init"):(rt("Page size reset by host page"),Tt("resetPage"))},resize:function(){_t("resizeParent","Parent window requested size check")},moveToAnchor:function(){v.findTarget(r())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var t=r();rt("PageInfoFromParent called from parent: "+t),F(JSON.parse(t)),rt(" --")},message:function(){var t=r();rt("onMessage called from parent: "+t),B(JSON.parse(t)),rt(" --")}};function i(){return n.data.split("]")[1].split(":")[0]}function r(){return n.data.slice(n.data.indexOf(":")+1)}function a(){return n.data.split(":")[2]in{true:1,false:1}}function s(){var r=i();r in o?o[r]():!t.exports&&"iFrameResize"in window||window.jQuery!==e&&"iFrameResize"in window.jQuery.prototype||a()||at("Unexpected message ("+n.data+")")}_===(""+n.data).slice(0,E)&&(!1===h?s():a()?o.init():rt('Ignored message of type "'+i()+'". Received before initialization.'))}function Ot(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()}({get exports(){return O},set exports(t){O=t}});var A={iframeResize:C,iframeResizer:C,contentWindow:O};function I(t){const e=function(t){const e=document.createElement("a");return e.href=t,{protocol:e.protocol,href:e.href,path:e.pathname,search:e.search,hash:e.hash}}(t),n=e.href.substr(0,e.href.length-e.hash.length),o=window.location.href.replace(/#.*$/,"");return e.hash&&n===o}function M(t,e){const n=JSON.stringify(e);let o=0;if(0===n.length)return o;for(let i=0;i<n.length;i++){o=(o<<5)-o+n.charCodeAt(i),o&=o}return`${t}-${o}`}function R(t,e,n,o,i){const r=document.createElement("toujou-modal"),a=document.createElement("iframe"),s=M("iframe",e);if(r.id=t,a.name=s,document.body.appendChild(r),I(n)){const t=document.querySelector(n),e=t instanceof HTMLTemplateElement?document.importNode(t.content,!0).children:t.childNodes;t.title&&(r.title=t.title);for(let n=0;n<e.length;n++)r.appendChild(e[n])}else if(i&&"POST"===o){const t=function(t,e,n){const o=document.createElement("form"),i=document.createElement("input");return o.action=t,o.method="POST",o.target=n,e.forEach((([t,e])=>{i.name=t,i.value=e.toString(),o.appendChild(i.cloneNode())})),o.style.visibility="hidden",o}(n,i,s);r.appendChild(t),r.appendChild(a),t.submit(),t.remove()}else"GET"===o&&(a.src=n,r.appendChild(a));return r}const N=n`
  * {
    box-sizing: border-box;
  }

  :host {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: 100%;
    z-index: var(--toujou-modal-z-index, 15);
    background: var(--toujou-modal-backdrop-color, rgba(0,0,0,.6));
    visibility: hidden;
  }

  :host([allow-outside-scroll]) {
    position: absolute;
    height: 100%;
    min-height: 100vh;
  }

  :host([no-backdrop]) {
    background: transparent;
  }

  :host([visible]) {
    visibility: visible;
  }

  #scroller {
    overflow-y: auto;
    height: 100vh;
  }

  :host([allow-outside-scroll]) #scroller {
    height: 100%;
  }

  #content {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: var(--toujou-modal-container-justify-content, center);
    min-height: var(--toujou-modal-container-min-height, 100%);
    height: var(--toujou-modal-container-height, 100vh);
    width: var(--toujou-modal-container-width, 100vw);
  }

  #modal-content {
    margin: var(--toujou-modal-content-margin, 2rem auto);
    width: var(--toujou-modal-content-width, 100%);
    max-width: var(--toujou-modal-content-max-width, calc(100vw - 1rem));
    background: var(--toujou-modal-content-background, #fff);
    box-shadow: var(--toujou-modal-content-shadow, 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4));
    border: var(--toujou-modal-content-border, none);
    border-radius: var(--toujou-modal-content-border-radius, 0px 0px 0px 0px);
    max-height: var(--toujou-modal-content-max-height, 100vh);
    overflow: var(--toujou-modal-content-overflow, auto);
    scroll-behavior: var(--toujou-modal-scroll-behavior, smooth);
  }

  @media only screen and (min-width: 51rem) {
    #modal-content {
      min-width: var(--toujou-modal-content-min-width, 42.5rem);
      max-width: var(--toujou-modal-content-max-width, 50rem);
    }
  }

  #modal-header {
    position: var(--toujou-modal-header-position, relative);
    padding: var(--toujou-modal-header-padding, .5rem);
    background: var(--toujou-modal-header-background, var(--neutral-color--050));
    border-bottom: var(--toujou-modal-header-border-bottom, 1px solid var(--neutral-color--200));
    user-select: none;
    display: var(--toujou-modal-header-display, flex);
    justify-content: var(--toujou-modal-header-justify, space-between);
    width: var(--toujou-modal-header-width, 100%);
    top: var(--toujou-modal-header-top, unset);
    box-shadow: var(--toujou-modal-header-box-shadow, none);
  }

  :host([no-header]) #modal-header {
    padding: 0;
    border-bottom: none;
  }

  #modal-header h3 {
    color: var(--toujou-modal-title-color, var(--secondary-color));
    display: var(--toujou-modal-title-display, flex);
    align-items: center;
    justify-content: var(--toujou-modal-title-align, flex-start);
    font-family: var(--toujou-modal-title-font-family, var(--headline__family));
    font-weight: var(--toujou-modal-title-font-weight, 500);
    font-size: var(--toujou-modal-title-font-size, 1.21875rem);
    line-height: 1.1;
    margin: 0;
    padding: var(--toujou-modal-title-padding, 0 .5rem);
    text-align: left;
    width: 100%;
  }

  #modal-header-close {
    display: var(--toujou-modal-close-display, block);
    position: var(--toujou-modal-close-position, relative);
    font-weight: bold;
    line-height: 1;
    font-family: var(--toujou-modal-close-font-family, var(--headline__family));
    font-size: var(--toujou-modal-close-font-size, 2em);
    padding: var(--toujou-modal-close-padding, .25rem .675rem);
    background: var(--toujou-modal-close-background, var(--primary-color));
    background-size: var(--toujou-modal-close-background-size, contain);
    background-position: var(--toujou-modal-close-background-position, center);
    background-repeat: var(--toujou-modal-close-background-repeat, no-repeat);
    border: var(--toujou-modal-close-border, 1px solid var(--primary-color));
    border-radius: var(--toujou-modal-close-border-radius, 2px);
    color: var(--toujou-modal-close-color, #fff);
    cursor: pointer;
    margin: var(--toujou-modal-close-margin, 0 0 0 1.5rem);
    outline: none;
    text-align: center;
    transition: all .1s ease-in-out;
    user-select: none;
    vertical-align: middle;
    width: auto;
    top: var(--toujou-modal-close-top, 0);
    bottom: var(--toujou-modal-close-bottom, 0);
    left: var(--toujou-modal-close-left, 0);
    right: var(--toujou-modal-close-right, 0);
  }

  #modal-header-close:hover, #modal-header-close:focus {
    background: var(--toujou-modal-close-hover-background, var(--primary-color--dark));
    background-size: var(--toujou-modal-close-hover-background-size, contain);
    background-position: var(--toujou-modal-close-hover-background-position, center);
    background-repeat: var(--toujou-modal-close-hover-background-repeat, no-repeat);
    border: var(--toujou-modal-close-hover-border, 1px solid var(--primary-color--dark));
    color: var(--toujou-modal-close-hover-color, #fff);
  }

  #dog-ear-close {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 2;
    width: 0;
    height: 0;
    border: none;
    border-top: 3rem solid var(--primary-color);
    border-left: 3rem solid transparent;
    padding: 0;
    cursor: pointer;
    outline: none;
    user-select: none;
  }

  #dog-ear-close:before,
  #dog-ear-close:after {
    content: '';
    background: white;
    position: absolute;
    display: block;
    height: 2px;
    width: .75rem;
    right: .375rem;
    top: -2.25rem;
  }

  #dog-ear-close:before {
    transform: rotate(45deg);
  }

  #dog-ear-close:after {
    transform: rotate(-45deg);
  }

  #progress-bar {
    display: none;
    position: absolute;
    bottom: -2px;
    left: 0;
    height: var(--toujou-modal-progressbar-height, 4px);
    width: 100%;
    opacity: 0;
    transition: opacity .3s ease-in-out;
  }

  :host([loading]) #progress-bar {
    display: block;
    opacity: 1;
  }

  #progress-bar:before {
    content: '';
    display: block;
    height: 4px;
    width: 50%;
    background: var(--toujou-modal-progressbar-color, var(--primary-color));
    animation: var(--toujou-modal-progressbar-animation, progress 6s linear infinite);
  }

  @keyframes progress {
    0%   { width: 0; }
    18% { width: 3%; }
    20% { width: 20%; }
    38% { width: 23%; }
    40% { width: 40%; }
    58% { width: 43%; }
    60% { width: 60%; }
    78% { width: 63%; }
    80% { width: 80%; }
    98% { width: 83%; }
    100% { width: 100%; }
  }

  @media only screen and (min-width: 42.5rem) {
    #modal-header h3 {
      font-size: var(--toujou-modal-title-font-size, 1.625rem);
    }
  }

  #modal-content ::slotted(iframe) {
    border: none;
    width: 100%;
  }

`,L={reserveScrollBarGap:!0},z=[];class P extends o{static get is(){return"toujou-modal"}render(){return i`
      <div id="scroller" @click="${this.onClick}">
        <div id="content">
          <div id="modal-content">
            <div id="modal-header">
              ${this.noHeader?i`
                    <button id="dog-ear-close" dialog-dismiss></button>`:i`
                    <h3>${this.title}</h3>
                    <button id="modal-header-close" dialog-dismiss>×</button>
                `}
              <div id="progress-bar"></div>
            </div>
            <slot id="slot" @slotchange="${this.onSlotchange}"></slot>
          </div>
        </div>
      </div>
`}static get properties(){return{opened:{type:Boolean,reflect:!0},title:{type:String},noHeader:{type:Boolean,attribute:"no-header",reflect:!0},allowOutsideScroll:{type:Boolean,attribute:"allow-outside-scroll",reflect:!0},noBackdrop:{type:Boolean,attribute:"no-backdrop",reflect:!0},loading:{type:Boolean,reflect:!0}}}open(){this.opened=!0}close(){this.opened=!1}constructor(t){super(t),this.opened=!1,this.loading=!1,this.intersectionObserver=new IntersectionObserver((t=>{t[0]&&this.onPosition(t[0])})),this.iframeResizerMap=new Map}disconnectedCallback(){g&&(b.forEach((function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null})),v&&(document.removeEventListener("touchmove",E,m?{passive:!1}:void 0),v=!1),y=-1),g?j():T(),b=[]}toggle(){this.opened=!this.opened}firstUpdated(){this.$={scroller:this.shadowRoot.querySelector("#scroller"),content:this.shadowRoot.querySelector("#content"),modalContent:this.shadowRoot.querySelector("#modal-content"),slot:this.shadowRoot.querySelector("#slot")}}updated(t){t.has("opened")&&(this.opened?this.onOpen():this.onClose(),this.hidden=!this.opened)}onOpen(){var t;this.intersectionObserver.observe(this),this.allowOutsideScroll?document.body.styleposition="relative":x(this.$.scroller,L),t=this,z.forEach((t=>t.close())),z.push(t),setTimeout((()=>{this.setAttribute("visible",""),this.dispatchModalEvent("toujou-modal-opened")}))}onClose(){var t;this.removeAttribute("visible"),function(t){if(t===z[z.length-1]){z.pop();const t=z.pop();t&&t.open()}}(this),this.allowOutsideScroll?document.body.style.position="":(t=this.$.scroller)?(b=b.filter((function(e){return e.targetElement!==t})),g&&(t.ontouchstart=null,t.ontouchmove=null,v&&0===b.length&&(document.removeEventListener("touchmove",E,m?{passive:!1}:void 0),v=!1)),g?j():T()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."),this.intersectionObserver.unobserve(this),this.dispatchModalEvent("toujou-modal-closed")}onLoad(t){this.loading=t}onClick(t){if(!t.composed)return;const e=t.composedPath();e.includes(this.$.modalContent)&&!e.some((t=>t instanceof HTMLElement&&t.hasAttribute("dialog-dismiss")))||this.close()}onPosition(t){const e=Math.max(t.intersectionRect.y,Math.abs(t.boundingClientRect.y));this.$.content.style["min-height"]=`${t.intersectionRect.height}px`,this.$.content.style.top=e?`${e}px`:""}onSlotchange(){const t=this.$.slot.assignedNodes().filter((t=>t instanceof HTMLIFrameElement));this.iframeResizerMap.forEach(((e,n)=>{t.includes(n)||this.iframeResizerMap.delete(n)})),t.forEach((t=>{this.loading=!0,t.addEventListener("load",(()=>{this.iframeResizerMap.has(t)||this.listenToIframeReadyState(t)}))}))}listenToIframeReadyState(t){this.loading=!0,this.iframeResizerMap.set(t,this.createIframeResizer(t)),t.contentWindow.addEventListener("beforeunload",(()=>{this.loading=!0}));try{this.title=t.contentWindow.document.title||this.title}catch(e){this.title=""}this.loading=!1,this.dispatchModalEvent("toujou-modal-loaded")}createIframeResizer(t){let e={};try{e=JSON.parse(t.getAttribute("toujou-iframe"))||{}}catch(n){(console.error||console.log).call(console,n.stack||n)}return e.initCallback=()=>{this.loading=!1},e.closedCallback=()=>{this.close()},A.iframeResizer(e,t)}dispatchModalEvent(t){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0}))}}var B,D,F,H,q;((e,n,o)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o})(P,"symbol"!=typeof(B="styles")?B+"":B,[N]),customElements.define(P.is,P),document.addEventListener("click",(t=>{if(t.metaKey||t.ctrlKey)return;const e=function(t){const e=t.composedPath();for(let n=0;n<e.indexOf(document.body);n++){const t=e[n];if(t.hasAttribute&&t.hasAttribute("target")&&t!==document.body)return t}}(t);if((e instanceof HTMLElement||e instanceof SVGElement)&&!(e instanceof HTMLFormElement)&&"toujou-modal"===e.getAttribute("target")){const n=e.getAttribute("href"),o=-1!==n.indexOf("?")?n.split("?")[0]+"?toujou-ajax-modal=1&"+n.split("?")[1]:-1!==n.indexOf("#")?n.split("#")[0]+"?toujou-ajax-modal=1#"+n.split("#")[1]:n+"?toujou-ajax-modal=1",[i,r]=function(t,e){if(t.hasAttribute("data-modal-post")){const n=t.getAttribute("data-modal-post");e.method="POST",e.body=n;const o=[];return new URL(`http://localhost/?${n}`).searchParams.forEach(((t,e)=>{o.push([e,t])})),[o,e]}return[null,e]}(e,{src:o});!function(t,e,n,o){const i=M("toujou-modal",t),r=document.getElementById(i)||R(i,t,e,n,o);setTimeout((()=>{r.open()}))}(r,o,i?"POST":"GET",i),t.preventDefault(),t.stopPropagation()}})),(q=D||(D={})).PRIMARY="primary",q.SECONDARY="secondary",q.FONT="font",function(t){t.DEFAULT="default",t.BORDER="border",t.GHOST="ghost"}(F||(F={})),function(t){t.TINY="tiny",t.SMALL="small",t.NORMAL="normal",t.LARGE="large"}(H||(H={}));let U=class extends HTMLButtonElement{constructor(){super(),this.defaultButtonVariant=D.PRIMARY,this.defaultButtonType=F.DEFAULT,this.defaultButtonSize=H.NORMAL}connectedCallback(){this._checkRequiredAttributes()}_checkRequiredAttributes(){const t=this.getAttribute("button-variant");t?Object.values(D).includes(t)||(console.warn(`TOUJOU: Invalid button-variant value, falling back to default: "${this.defaultButtonVariant}"`),this.setAttribute("button-variant",this.defaultButtonVariant)):this.setAttribute("button-variant",this.defaultButtonVariant);const e=this.getAttribute("button-size");e?Object.values(H).includes(e)||(console.warn(`TOUJOU: Invalid button-size value, falling back to default: "${this.defaultButtonSize}"`),this.setAttribute("button-size",this.defaultButtonSize)):this.setAttribute("button-size",this.defaultButtonSize);const n=this.getAttribute("button-type");n?Object.values(F).includes(n)||(console.warn(`TOUJOU: Invalid button-type value, falling back to default: "${this.defaultButtonType}"`),this.setAttribute("button-type",this.defaultButtonType)):this.setAttribute("button-type",this.defaultButtonType)}};var W,$,V;customElements.define("toujou-button",U,{extends:"button"});let G=class extends o{get result(){const t=Math.round(this.duration);return 0===t?`${this.lessThanText} 1 ${this.minutesSingularText}`:1===t?`1 ${this.minutesSingularText}`:`${t} ${this.minutesPluralText}`}render(){return i`
      <slot name="label" class="label"></slot>
      ${this.result}
    `}constructor(){super(),W.add(this),this.wordCount=0,this.duration=0,this.targetSelector="body",this.minutesSingularText="minute",this.minutesPluralText="minutes",this.lessThanText="under",this.readingSpeed=250,$.set(this,(()=>{this.targetEl=document.querySelector(`${this.targetSelector}`),this.targetEl&&(this.wordCount+=s(this,W,"m",V).call(this,this.targetEl))})),"complete"===document.readyState||"interactive"===document.readyState?setTimeout(s(this,$,"f")):document.addEventListener("DOMContentLoaded",s(this,$,"f"))}updated(t){t.has("wordCount")&&(this.duration=Math.ceil(this.wordCount/this.readingSpeed))}};$=new WeakMap,W=new WeakSet,V=function(t){const e=t.textContent,n=null==e?void 0:e.replace(/[\n\r]+|[\s]{2,}/g," "),o=null==n?void 0:n.trim(),i=null==o?void 0:o.split(" ");return(null==i?void 0:i.length)||0},a([l({type:Number})],G.prototype,"wordCount",void 0),a([l({type:Number})],G.prototype,"duration",void 0),a([l({type:String,attribute:"target-selector"})],G.prototype,"targetSelector",void 0),a([l({type:String,attribute:"minutes-singular-text"})],G.prototype,"minutesSingularText",void 0),a([l({type:String,attribute:"minutes-plural-text"})],G.prototype,"minutesPluralText",void 0),a([l({type:String,attribute:"less-than-text"})],G.prototype,"lessThanText",void 0),a([l({type:Number,attribute:"reading-speed"})],G.prototype,"readingSpeed",void 0),G=a([c("toujou-estimated-reading-time")],G),console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");var Y,J,X,K=n(Y||(J=[".exit-warning__message {\n    background-color: var(--toujou-exist-warning-message-bg-color, var(--bg-color));\n    overflow: var(--toujou-exist-warning-message-overflow, hidden);\n    padding: var(--toujou-exist-warning-message-padding, var(--spacing-normal) var(--spacing-normal) var(--spacing-l));\n}\n"],X||(X=J.slice(0)),Y=Object.freeze(Object.defineProperties(J,{raw:{value:Object.freeze(X)}}))));let Q=class extends o{static get properties(){return{title:{type:String},targetUrl:{type:String},redirectDelay:{type:Number},secondsRemaining:{type:Number},opened:{type:Boolean},_messageTemplate:{type:Object}}}constructor(){super(),this.targetUrl="http://www.dfau.de",this.redirectDelay=50,this.onIntervalTick=this.onIntervalTick.bind(this),this.onModalOpenedChanged=this.onModalOpenedChanged.bind(this),this._secondsRemainingInterval=null,this._messageTemplate=null,this._modal=null,this._modalOpenedObserver=new MutationObserver(this.onModalOpenedChanged)}render(){return i`
      <toujou-modal title="${this.title}" is-exit-warning>
        <div class="exit-warning__message">
          <slot></slot>
        </div>
      </toujou-modal>
    `}connectedCallback(){const t=this.querySelector("template");t&&(this._messageTemplate=new Function("html","targetUrl","secondsRemaining","return html`"+t.innerHTML+"`")),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._modalOpenedObserver.disconnect()}updated(t){this._messageTemplate&&r(this._messageTemplate(i,this.targetUrl,this.secondsRemaining),this)}firstUpdated(t){this._modal=this.shadowRoot.querySelector("toujou-modal"),this._modal&&this._modalOpenedObserver.observe(this._modal,{attributeFilter:["opened"]})}onModalOpenedChanged(){this._modal.opened?(this.secondsRemaining=this.redirectDelay,this._secondsRemainingInterval=window.setInterval(this.onIntervalTick,1e3)):(this._secondsRemainingInterval&&window.clearInterval(this._secondsRemainingInterval),this._secondsRemainingInterval=null)}onIntervalTick(){this.secondsRemaining--,this.secondsRemaining<=0&&(window.location.href=this.targetUrl,this.close())}open(){this._modal&&this._modal.open()}close(){this._modal&&this._modal.close()}};function Z(t){console.log("11111");const e=document.querySelector("exit-warning");return!!e&&(window.location.href.match(/toujou-ajax-modal=/)&&window.self!==window.parent?(window.parent.postMessage({action:"toujou-exit-warning",targetUrl:t},window.location.origin),!0):(new URL(t).hostname===window.location.hostname?window.location.href=t:(e.targetUrl=t,e.open()),!0))}Q.styles=[K],Q=a([c("exit-warning")],Q),document.addEventListener("click",(function(t){if(t.metaKey||t.ctrlKey)return;const e=function(t){const e=t.composedPath();for(let n=0;n<e.indexOf(document.body);n++){const t=e[n];if(t.hasAttribute&&t.hasAttribute("target")&&t!==document.body)return t}}(t);e instanceof HTMLElement&&!(e instanceof HTMLFormElement)&&"toujou-exit-warning"===e.getAttribute("target")&&Z(e.getAttribute("href"))&&(t.preventDefault(),t.stopPropagation())})),window.addEventListener("message",(function(t){t.origin===window.location.origin&&void 0!==t.data.action&&"toujou-exit-warning"===t.data.action&&t.data.targetUrl&&Z(t.data.targetUrl)}));let tt=class extends o{static get is(){return"toujou-lazy-render"}get templates(){return this.shadowRoot.querySelector("#slot").assignedNodes({flatten:!0}).filter((t=>"TEMPLATE"===t.tagName))}render(){return i`
      <slot id="slot"></slot>`}connectedCallback(){super.connectedCallback(),this.intersectionObserver=new IntersectionObserver((t=>{t.some((t=>t.isIntersecting))&&(this.renderTemplates(),this.intersectionObserver.disconnect())})),this.intersectionObserver.observe(this)}disconnectedCallback(){this.intersectionObserver&&this.intersectionObserver.disconnect(),super.disconnectedCallback()}renderTemplates(){this.templates.forEach((t=>{const e=document.importNode(t.content,!0);t.parentNode.insertBefore(e,t)}))}};customElements.define(tt.is,tt);var et,nt,ot,it=n(et||(nt=[":host {\n    background-color: var(--toujou-snackbar-bg-color, #2c2c2c);\n    border: var(--toujou-snackbar-border, 1px solid var(--bg-color));\n    display: var(--toujou-snackbar-display, flex);\n    width: var(--toujou-snackbar-width, calc(100% - 2rem));\n    max-width: var(--toujou-snackbar-max-width, 640px);\n    position: var(--toujou-snackbar-position, fixed);\n    bottom: var(--toujou-snackbar-bottom, 1rem);\n    left: var(--toujou-snackbar-left, 1rem);\n    padding: var(--toujou-snackbar-padding, 1rem);\n    border-radius: var(--toujou-snackbar-border-radius, .25rem);\n    z-index: var(--toujou-snackbar-z-index, 100);\n    -webkit-transform: var(--toujou-snackbar-transform, translateY(calc(100% + 1rem)));\n            transform: var(--toujou-snackbar-transform, translateY(calc(100% + 1rem)));\n    opacity: var(--toujou-snackbar-opacity, 0);\n    -webkit-transition: var(--toujou-snackbar-transition, all .25s ease-out);\n    transition: var(--toujou-snackbar-transition, all .25s ease-out);\n}\n\n:host([visible]) {\n    -webkit-transform: var(--toujou-snackbar-visible-transform, translateY(0));\n            transform: var(--toujou-snackbar-visible-transform, translateY(0));\n    opacity: var(--toujou-snackbar-visible-opacity, 1);\n}\n\n:host(:focus-visible) {\n    outline: var(--toujou-snackbar-focus-outline);\n    outline-offset: var(--toujou-snackbar-focus-outline-offset);\n}\n\n.snackbar__message {\n    -webkit-box-flex: var(--toujou-snackbar-message-grow, 1);\n        -ms-flex-positive: var(--toujou-snackbar-message-grow, 1);\n            flex-grow: var(--toujou-snackbar-message-grow, 1);\n    color: var(--toujou-snackbar-message-color, white);\n    margin: var(--toujou-snackbar-message-margin, 0);\n    padding: var(--toujou-snackbar-message-padding, 0 1rem 0 0);\n}\n\n.snackbar__button {\n    border: var(--toujou-snackbar-button-border, none);\n    background: var(--toujou-snackbar-button-bg, none);\n    font-size: var(--toujou-snackbar-button-font-size, .875rem);\n    font-family: var(--toujou-snackbar-button-font-family, var(--paragraph__family));\n    text-transform: var(--toujou-snackbar-button--text-transform, uppercase);\n    color: var(--toujou-snackbar-button-color, var(--primary-color));\n    margin: var(--toujou-snackbar-button-margin, 0);\n    outline: var(--toujou-snackbar-button-outline, none);\n}\n\n.snackbar__button:hover {\n    cursor: var(--toujou-snackbar-button-hover-cursor, pointer);\n    opacity: var(--toujou-snackbar-button-hover-opacity, .75);\n}\n\n:host([snackbartype='auto']) .snackbar__button {\n    display: none;\n}\n\n/* VARIANT SUCCESS */\n\n:host([success]) {\n    border: var(--toujou-snackbar-success-border, 1px solid var(--success-color));\n}\n\n:host([success]) .snackbar__message {\n    color: var(--toujou-snackbar-success-message-color, var(--success-color));\n}\n\n:host([success]) .snackbar__button {\n    color: var(--toujou-snackbar-success-button-color, white);\n}\n\n/* VARIANT WARNING */\n\n:host([warning]) {\n    border: var(--toujou-snackbar-warning-border, 1px solid var(--warning-color));\n}\n\n:host([warning]) .snackbar__message {\n    color: var(--toujou-snackbar-warning-message-color, var(--warning-color));\n}\n\n:host([warning]) .snackbar__button {\n    color: var(--toujou-snackbar-warning-button-color, white);\n}\n\n/* VARIANT ERROR */\n\n:host([error]) {\n    border: var(--toujou-snackbar-error-border, 1px solid var(--error-color));\n}\n\n:host([error]) .snackbar__message {\n    color: var(--toujou-snackbar-error-message-color, var(--error-color));\n}\n\n:host([error]) .snackbar__button {\n    color: var(--toujou-snackbar-error-button-color, white);\n}\n\n/* VARIANT INFO */\n\n:host([info]) {\n    border: var(--toujou-snackbar-info-border, 1px solid #81d4fa);\n}\n\n:host([info]) .snackbar__message {\n    color: var(--toujou-snackbar-info-message-color, #81d4fa);\n}\n\n:host([info]) .snackbar__button {\n    color: var(--toujou-snackbar-info-button-color, white);\n}\n"],ot||(ot=nt.slice(0)),et=Object.freeze(Object.defineProperties(nt,{raw:{value:Object.freeze(ot)}}))));let rt=class extends o{static get is(){return"toujou-snackbar"}render(){return i`
      <p class="snackbar__message">${this.message}</p>
      <button
        class="snackbar__button"
        @click="${this._handleButtonClick}"
        aria-label="${this.buttonAriaLabel}"
      >${this.buttonText}</button>
    `}static get styles(){return[it]}static get properties(){return{showing:{type:Boolean},cue:{type:Array},message:{type:String},buttonText:{type:String},snackbarType:{type:String},buttonAriaLabel:{type:String,attribute:"button-aria-label"}}}set showing(t){t?(this.setAttribute("visible",""),this.setAttribute("tabindex","0"),this.focus()):(this.removeAttribute("visible"),this.setAttribute("tabindex","-1"),this.blur())}set snackbarType(t){this.setAttribute("snackbarType",t)}set variant(t){this.setAttribute(t,"")}constructor(){super(),this.keyCodes={escape:27,enter:13},this.cue=[],this._animationStart=null,this._possibleVariants=["success","warning","error","info"],this.buttonAriaLabel="Close the snackbar",window.addEventListener("toujou-add-snackbar",(()=>{this._removeHiddenState()}),{once:!0}),window.addEventListener("toujou-add-snackbar",(t=>{this._handleAddSnackbar(t)}))}connectedCallback(){super.connectedCallback(),this.showing=!1,this._timer=this._timer.bind(this),this.addEventListener("keydown",this._handleKeyDown.bind(this))}updated(t){t.has("cue")&&this.cue.length>0?this._showSnackbar():t.has("cue")&&this.cue.length>1&&"auto"===this.cue[0].type?this._checkAutoReplacement():t.has("cue")&&0===this.cue.length&&this._resetVisibleValues()}_handleAddSnackbar(t){this.cue=[...this.cue,t.detail]}_checkAutoReplacement(){this.cue.length>1&&"auto"===this.cue[0].type&&(this._wasReplaced=!0)}_handleButtonClick(){this._hideSnackbar()}_hideSnackbar(){this.showing=!1,this.addEventListener("transitionend",this._afterHide)}_afterHide(){this._removeSnackbarFromCue(),this._removeSnackbarVariantAttribute(),this.removeEventListener("transitionend",this._afterHide)}_removeSnackbarFromCue(){this.cue=this.cue.slice(1)}_removeSnackbarVariantAttribute(){this._possibleVariants.forEach((t=>{this.hasAttribute(t)&&this.removeAttribute(t)}))}_resetVisibleValues(){this.message=null,this.buttonText=null}_showSnackbar(){setTimeout((()=>{this._setSnackbarValues(this.cue[0]),"auto"===this.cue[0].type&&(this._animationStart=Date.now(),this._timer()),this.showing=!0,this.snackbarType=this.cue[0].type}))}_removeHiddenState(){this.removeAttribute("hidden")}_timer(){const t=Date.now();if(this._wasReplaced)return this._removeSnackbarFromCue(),this._wasReplaced=!1,void cancelAnimationFrame(this._animationRequest);t-this._animationStart>=this._duration?(this._hideSnackbar(),cancelAnimationFrame(this._animationRequest)):this._animationRequest=requestAnimationFrame(this._timer)}_setSnackbarValues(t){t.message&&(this.message=t.message),t.variant&&this._possibleVariants.includes(t.variant)&&(this.variant=t.variant),this.buttonText=t.buttonText||"OK",this._duration=t.duration||2500}_handleKeyDown(t){"auto"!==this.getAttribute("snackbartype")&&("Escape"!==t.key&&t.keyCode!==this.keyCodes.escape&&"Enter"!==t.key&&t.keyCode!==this.keyCodes.enter||(this._hideSnackbar(),this._afterHide()))}};customElements.define(rt.is,rt);var at,st,ct,lt=n(at||(st=["* {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n\n:host {\n    --toujou-spinner-size: 5rem;\n    --toujou-spinner-thickness: 4;\n    --toujou-spinner-start-color: var(--primary-color--light);\n    --toujou-spinner-end-color: var(--primary-color--dark);\n    --toujou-spinner-animation-duration: 2s;\n    --toujou-spinner-dash-animation-duration: 1.4s;\n    --toujou-spinner-display: inline-flex;\n\n    width: var(--toujou-spinner-size);\n    height: var(--toujou-spinner-size);\n    position: relative;\n    display: var(--toujou-spinner-display);\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n\n:host([centered-on-page]) {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    z-index: 100;\n}\n\n.toujou-spinner__spinner::before {\n    content: '';\n    display: block;\n    padding-top: 100%;\n}\n\n.toujou-spinner__svg {\n    -webkit-animation: rotationAnimation var(--toujou-spinner-animation-duration) linear infinite;\n            animation: rotationAnimation var(--toujou-spinner-animation-duration) linear infinite;\n    height: 100%;\n    -webkit-transform-origin: center center;\n            transform-origin: center center;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n}\n\n.toujou-spinner__circle {\n    stroke-dasharray: 1, 200;\n    stroke-dashoffset: 0;\n    -webkit-animation: dashAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite,\n               colorAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite;\n            animation: dashAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite,\n               colorAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite;\n    stroke-linecap: round;\n    stroke-width: var(--toujou-spinner-thickness);\n    fill: none;\n}\n\n@-webkit-keyframes rotationAnimation {\n    100% {\n        -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n    }\n}\n\n@keyframes rotationAnimation {\n    100% {\n        -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n    }\n}\n\n@-webkit-keyframes dashAnimation {\n    0% {\n        stroke-dasharray: 1, 200;\n        stroke-dashoffset: 0;\n    }\n    50% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -35px;\n    }\n    100% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -124px;\n    }\n}\n\n@keyframes dashAnimation {\n    0% {\n        stroke-dasharray: 1, 200;\n        stroke-dashoffset: 0;\n    }\n    50% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -35px;\n    }\n    100% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -124px;\n    }\n}\n\n@-webkit-keyframes colorAnimation {\n    0%, 20% {\n        stroke: var(--toujou-spinner-start-color);\n    }\n    80%, 100% {\n        stroke: var(--toujou-spinner-end-color);\n    }\n}\n\n@keyframes colorAnimation {\n    0%, 20% {\n        stroke: var(--toujou-spinner-start-color);\n    }\n    80%, 100% {\n        stroke: var(--toujou-spinner-end-color);\n    }\n}\n"],ct||(ct=st.slice(0)),at=Object.freeze(Object.defineProperties(st,{raw:{value:Object.freeze(ct)}}))));class ut extends o{static get is(){return"toujou-spinner"}static get styles(){return lt}render(){return i`
      <svg class="toujou-spinner__svg" viewBox="25 25 50 50">
        <circle class="toujou-spinner__circle" cx="50" cy="50" r="20" stroke-miterlimit="10"/>
      </svg>
    `}}customElements.define(ut.is,ut);var dt,ht,mt,pt=n(dt||(ht=[" .open-button {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n  }\n\n  :host([open]) .open-button {\n    display: none;\n  }\n\n  .close-button {\n    display: none;\n  }\n\n  :host([open]) .close-button {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n  }\n"],mt||(mt=ht.slice(0)),dt=Object.freeze(Object.defineProperties(ht,{raw:{value:Object.freeze(mt)}}))));let ft=class extends o{constructor(){super(...arguments),this.isOpen=!1,this.isOpenParentAttribute="media-info-child-is-open",this._handleClick=t=>{t.preventDefault(),t.stopPropagation()},this.handleToggleClick=()=>{this.isOpen=!this.isOpen}}render(){return i`
            <slot name="open-button" class="open-button"  @click="${this.handleToggleClick}"></slot>
            <slot name="close-button" class="close-button" @click="${this.handleToggleClick}"></slot>
            <slot name="figcaption"></slot>
            <slot name="copyright"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this._handleClick)}updated(t){var e,n;t.has("isOpen")&&(this.isOpen?null===(e=this.parentElement)||void 0===e||e.setAttribute(this.isOpenParentAttribute,""):null===(n=this.parentElement)||void 0===n||n.removeAttribute(this.isOpenParentAttribute))}};ft.styles=[pt],a([l({type:Boolean,reflect:!0,attribute:"open"})],ft.prototype,"isOpen",void 0),ft=a([c("toujou-media-info")],ft);const gt=decodeURIComponent,bt=/; */;function vt(t,e){try{return"boolean"==typeof e?decodeURIComponent(t):e(t)}catch(n){return t}}var yt,wt;(wt=yt||(yt={})).strict="strict",wt.lax="lax",wt.none="none";class kt extends Event{constructor(t,e={changed:[],deleted:[]}){super(t,e),this.changed=e.changed||[],this.deleted=e.deleted||[]}}class St extends EventTarget{constructor(){throw super(),new TypeError("Illegal Constructor")}get[Symbol.toStringTag](){return"CookieStore"}async get(t){if(null==t)throw new TypeError("CookieStoreGetOptions must not be empty");if(t instanceof Object&&!Object.keys(t).length)throw new TypeError("CookieStoreGetOptions must not be empty");return(await this.getAll(t))[0]}async set(t,e){var n,o,i;const r={name:"",value:"",path:"/",secure:!1,sameSite:yt.strict,expires:null,domain:null};if("string"==typeof t)r.name=t,r.value=e;else{if(Object.assign(r,t),r.path&&!r.path.startsWith("/"))throw new TypeError('Cookie path must start with "/"');if(null===(n=r.domain)||void 0===n?void 0:n.startsWith("."))throw new TypeError('Cookie domain cannot start with "."');if(r.domain&&r.domain!==window.location.hostname)throw new TypeError("Cookie domain must domain-match current host");if((null===(o=r.name)||void 0===o?void 0:o.startsWith("__Host"))&&r.domain)throw new TypeError("Cookie domain must not be specified for host cookies");if((null===(i=r.name)||void 0===i?void 0:i.startsWith("__Host"))&&"/"!=r.path)throw new TypeError("Cookie path must not be specified for host cookies");r.path&&r.path.endsWith("/")&&(r.path=r.path.slice(0,-1)),""===r.path&&(r.path="/")}if(""===r.name&&r.value&&r.value.includes("="))throw new TypeError("Cookie value cannot contain '=' if the name is empty");r.name&&r.name.startsWith("__Host")&&(r.secure=!0);let a=`${r.name}=${encodeURIComponent(r.value)}`;switch(r.domain&&(a+="; Domain="+r.domain),r.path&&(a+="; Path="+r.path),"number"==typeof r.expires?a+="; Expires="+new Date(r.expires).toUTCString():r.expires instanceof Date&&(a+="; Expires="+r.expires.toUTCString()),(r.name&&r.name.startsWith("__Secure")||r.secure)&&(r.sameSite=yt.lax,a+="; Secure"),r.sameSite){case yt.lax:a+="; SameSite=Lax";break;case yt.strict:a+="; SameSite=Strict";break;case yt.none:a+="; SameSite=None"}const s=this.get(r);if(document.cookie=a,this.onchange){const t=[],e=[];s&&!(await this.get(r))?e.push({...r,value:void 0}):t.push(r);const n=new kt("change",{changed:t,deleted:e});this.onchange(n)}}async getAll(t){const e=function(t,e={}){if("string"!=typeof t)throw new TypeError("argument str must be a string");const n=[],o=e||{},i=t.split(bt),r=o.decode||gt;for(let a=0;a<i.length;a++){const t=i[a];let e=t.indexOf("=");if(e<0)continue;const o=t.substr(0,e).trim();let s=t.substr(++e,t.length).trim();'"'==s[0]&&(s=s.slice(1,-1)),null==n[o]&&n.push({name:o,value:vt(s,r)})}return n}(document.cookie);if(null==t||0===Object.keys(t).length)return e;let n,o;if("string"==typeof t?n=t:(n=t.name,o=t.url),o){const t=new URL(o,window.location.origin);if(window.location.href!==t.href||window.location.origin!==t.origin)throw new TypeError("URL must match the document URL");return e.slice(0,1)}return e.filter((t=>t.name===n))}async delete(t){const e={name:"",value:"",path:"/",secure:!1,sameSite:yt.strict,expires:null,domain:null};"string"==typeof t?e.name=t:Object.assign(e,t),e.expires=0,await this.set(e)}}const _t=new WeakMap,Et=new WeakMap;class Tt{get[Symbol.toStringTag](){return"CookieStoreManager"}constructor(){throw new TypeError("Illegal Constructor")}async subscribe(t){const e=_t.get(this)||[],n=Et.get(this);if(!n)throw new TypeError("Illegal invocation");for(const o of t){const t=o.name,i=new URL(o.url||"",n.scope).toString();e.some((e=>e.name===t&&e.url===i))||e.push({name:o.name,url:i})}_t.set(this,e)}async getSubscriptions(){return(_t.get(this)||[]).map((({name:t,url:e})=>({name:t,url:e})))}async unsubscribe(t){let e=_t.get(this)||[];const n=Et.get(this);if(!n)throw new TypeError("Illegal invocation");for(const o of t){const t=o.name,i=new URL(o.url||"",n.scope).toString();e=e.filter((e=>e.name!==t||e.url!==i))}_t.set(this,e)}}"cookies"in ServiceWorkerRegistration.prototype||Object.defineProperty(ServiceWorkerRegistration.prototype,"cookies",{configurable:!0,enumerable:!0,get(){const t=Object.create(Tt.prototype);return Et.set(t,this),Object.defineProperty(this,"cookies",{value:t}),t}});const jt=Object.create(St.prototype);function xt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Ct,Ot,At=n(Ct||(Ct=xt([":host {\n    display: var(--toujou-consent-display, block);\n}"])));class It extends o{static get is(){return"toujou-consent"}render(){return i`
      <slot id="content"></slot>
    `}static get styles(){return At}static get properties(){return{consentState:{type:Boolean},listenTo:{type:String},listenOn:{type:String}}}set consentState(t){"checkbox"===this.consentInputType&&(this.querySelector(".consent__checkbox").checked=t)}set listenTo(t){t.split(/\s+/).forEach((t=>{this.addEventListener(t,this._handleEvent)}))}constructor(){super(),this._handleEvent=this._handleEvent.bind(this),this.listenOn="*",this._consentType=this.getAttribute("consenttype"),this._getConsentInputType(),this.consentState=null}connectedCallback(){super.connectedCallback()}_handleEvent(t){"click"===t.type?this._dispatchClickEvent():"change"===t.type&&this._dispatchChangeEvent()}firstUpdated(){this._dispatchReadyEvent()}_dispatchChangeEvent(){const t=new CustomEvent("toujou-consent-checkbox-changed",{bubbles:!0,composed:!0,detail:{consentElement:this}});this.dispatchEvent(t)}_dispatchClickEvent(){const t=new CustomEvent("toujou-consent-button-clicked",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_dispatchReadyEvent(){const t=new CustomEvent("toujou-consent-connected",{bubbles:!0,composed:!0,detail:{consentType:this._consentType}});this.dispatchEvent(t)}_getConsentInputType(){const t=this.querySelectorAll(".consent__checkbox"),e=this.querySelectorAll(".consent__button");t.length>0?this.consentInputType="checkbox":e.length>0&&(this.consentInputType="button")}}customElements.define(It.is,It);var Mt=n(Ot||(Ot=xt([":host {\n    display: var(--toujou-consent-widget-display, block);\n}\n\n"])));const Rt={setItem(t,e){document.cookie=`${t}=${e};path=/;`},getItem(t){const e=`${t}=`,n=document.cookie.split(";");for(let o=0,i=n.length;o<i;o++){let t=n[o];for(;" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(e))return t.substring(e.length,t.length)}return null}},Nt=(t,e,n)=>{try{const o=JSON.stringify(t);return void e.setItem(n,o)}catch(o){console.error(`There was an error while saving the consents data to storage: Error: ${o}`)}},Lt=(t,e)=>{try{const n=t.getItem(e);return null===n?{}:JSON.parse(n)}catch(n){return console.error(`There was a problem loading the consents data from storage. Error: ${n}`),{}}},zt=t=>{const e={},n={};for(const o in t)"consentBoxDismissed"===o?n[o]=t[o]:"tracking"===o&&0===t[o].consentLifetime?e[o]=t[o]:"tracking"===o&&t[o].consentLifetime>0?n[o]=t[o]:0===t[o].consentLifetime?e[o]=t[o]:t[o].consentLifetime>0&&(n[o]=t[o]);Nt({consents:e},Rt,"consentsState"),Nt({consents:n},localStorage,"consentsState")},Pt="CLEAR_CONSENT_TYPE_DATA",Bt="SAVE_ALL_CONSENTS",Dt="SAVE_SINGLE_CONSENT",Ft="DISMISS_CONSENT_BOX",Ht="UNDISMISS_CONSENT_BOX",qt={consents:{consentBoxDismissed:!1}};let Ut=!1;function Wt(t=qt,e){const n=function(t,e){switch(e.type){case Pt:{const n={...t.consents};return delete n[e.payload],{...t,consents:n}}case Bt:{const n={...t.consents,...e.payload};return{...t,consents:n}}case Dt:{const n={...t.consents};return n[e.payload.consentType]={...e.payload.consentData},{...t,consents:n}}case Ft:{const e={...t.consents};return e.consentBoxDismissed=!0,{...t,consents:e}}case Ht:{const e={...t.consents};return e.consentBoxDismissed=!1,{...t,consents:e}}}return t}(t,e);return(t=>{for(const e in t){if("consents"!==e)return void console.error('Unknown data "key" found while saving to session / local Storage');zt(t.consents)}})(n),"object"==typeof window.dataLayer&&(!Ut||void 0!==n.consents.consentBoxDismissed&&n.consents.consentBoxDismissed)&&(window.dataLayer.push({event:"consent-changed",...n.consents}),Ut=!0),n}const $t=function(){const t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}):u)(),e=(()=>{const t=Lt(Rt,"consentsState"),e=Lt(localStorage,"consentsState");return{consents:{...t.consents,...e.consents}}})();return d(Wt,e,t)}();class Vt extends o{static get is(){return"toujou-consent-widget"}render(){return i`
      <slot name="consentWidgetHeader"></slot>
      <slot id="consentElements"></slot>
      <slot name="consentWarning" id="consentWarning"></slot>
    `}static get styles(){return Mt}set _warningVisible(t){this.setAttribute("warningvisible",t)}static get properties(){return{inPage:{type:Boolean},listenTo:{type:String},listenOn:{type:String},_warningVisible:{type:Boolean},deactivated:{type:Boolean}}}set listenTo(t){t.split(/\s+/).forEach((t=>{this.addEventListener(t,this._handleEvent)}))}set _dismissedBox(t){this.inPage||(t?this.setAttribute("hidden",""):this.removeAttribute("hidden")),this._warningVisible=this.inPage&&!t}constructor(){super(),this.inPage=!1,this.deactivated=!1,this.consentTypeNames=["tracking","html","maps","video"],this.listenOn="*",this.onStateChange=this.onStateChange.bind(this),this._handleEvent=this._handleEvent.bind(this),this.store=$t,this.store.subscribe(this.onStateChange),this.consentTypeNames=["tracking","html","maps","video"],this._state=this.store.getState(),this._warningVisible=this.inPage,"#aaa"===window.location.hash&&(this.deactivated=!0),this.addEventListener("toujou-consent-connected",this._handleConsentConnected),this.addEventListener("toujou-consent-checkbox-changed",this._handleConsentCheckboxChanged)}connectedCallback(){super.connectedCallback(),this._dismissedBox=!!this._state.consents&&this._state.consents.consentBoxDismissed,this.deactivated?setTimeout((()=>{this._prepareToSaveConsents(),this._dismissConsentBox(),this._dispatchConsentDeactivated()})):setTimeout((()=>{const t=this.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length>0&&t[0].focus()}))}firstUpdated(){this.consentTypeNames.forEach((t=>{const e=this.querySelector(`toujou-consent[consenttype="${t}"]`);this._state.consents.consentBoxDismissed&&!this._state.consents[t]&&e&&this._undismissConsentBox()}))}onStateChange(){this._state=this.store.getState(),this._dismissedBox=this._state.consents.consentBoxDismissed,this._updateAllConsentElementsStates()}_handleEvent(t){t.stopPropagation(),"click"===t.type&&!this.inPage&&t.target.matches(this.listenOn)&&this._handleConsentBoxSaveButtonClick(t.target)}_handleConsentCheckboxChanged(t){this.inPage&&!0===this._state.consents.consentBoxDismissed&&(this._prepareToSaveConsents(),this._dispatchAddSnackbar(t.target.getAttribute("snackbarmessage")))}_handleConsentBoxSaveButtonClick(t){t.hasAttribute("accept-all")?this._prepareToSaveConsents(!0):t.hasAttribute("deny-all")?this._prepareToSaveConsents(!1):this._prepareToSaveConsents(null),this._dismissConsentBox()}_prepareToSaveConsents(t=null){const e=this._getAllConsents(t);this._saveAllConsents(e)}_getAllConsents(t=null){const e={},n=this.querySelectorAll("toujou-consent");return n&&n.forEach((n=>{const o=n.getAttribute("consenttype");e[o]=this._createNewConsentData(n,t)})),e}_createNewConsentData(t,e=null){const n=t.querySelector(".consent__checkbox");null!==e&&(n.checked=e);const o=this._createConsentLifeInMillis(t.getAttribute("consenttype"),t.getAttribute("consentlifetime"));return{consentGiven:n.checked,consentCreationDate:Date.now(),consentExpirationDate:Date.now()+o,consentLifetime:o}}_createConsentLifeInMillis(t,e){return"tracking"===t?"0"===e?63072e6:0:24*e*60*60}_dismissConsentBox(){this.store.dispatch({type:Ft}),this._dispatchConsentWidgetDismissedEvent()}_undismissConsentBox(){this.store.dispatch({type:Ht})}_saveAllConsents(t){this.store.dispatch({type:Bt,payload:t})}_handleConsentConnected(t){this._setConsentElementState(t.target)}_setConsentElementState(t){if("TOUJOU-CONSENT"===t.tagName){const e=t.getAttribute("consenttype"),n="1"===t.getAttribute("prechecked");t.consentState=this._getConsentTypeState(this._state,e,n)}}_updateAllConsentElementsStates(){this.querySelectorAll("toujou-consent").forEach((t=>{this._setConsentElementState(t)}))}_getConsentTypeState(t,e,n){let o=null;return o=t&&t.consents&&t.consents[e]?t.consents[e]:null,o?o&&this._isConsentExpired(o)?(this.store.dispatch({type:Pt,payload:e}),this._dispatchConsentExpiredEvent(e),this._undismissConsentBox(),n):o&&!this._isConsentExpired(o)?o.consentGiven:o:n}_isConsentExpired(t){return t.consentCreationDate+t.consentLifetime>t.consentExpirationDate}_dispatchConsentExpiredEvent(t){const e=new CustomEvent("toujou-consent-expired",{bubbles:!0,composed:!0,detail:{consentType:t}});this.dispatchEvent(e)}_dispatchAddSnackbar(t){const e=new CustomEvent("toujou-add-snackbar",{bubbles:!0,composed:!0,detail:{message:t,type:"auto",duration:2500,variant:"success"}});this.dispatchEvent(e)}_dispatchConsentWidgetDismissedEvent(){const t=new CustomEvent("toujou-consent-widget-dismissed",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_dispatchConsentDeactivated(){const t=new CustomEvent("toujou-consent-widget-deactivated",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}customElements.define(Vt.is,Vt);class Gt extends HTMLElement{get analyticsid(){return this.getAttribute("analyticsid")}constructor(){super(),this.hidden=!0,this.style.display="contents",this.onStateChange=this.onStateChange.bind(this),this.store=$t,this.store.subscribe(this.onStateChange),this.consentState=this.store.getState().consents.tracking}connectedCallback(){this._handleConsentState(this.consentState),this._storeUnsubscribe=this.store.subscribe(this.onStateChange)}disconnectedCallback(){this._storeUnsubscribe&&this._storeUnsubscribe()}onStateChange(){this.consentState=this.store.getState().consents.tracking||null,this._handleConsentState(this.consentState)}_handleConsentState(t){"object"==typeof t&&null!==t&&t.consentGiven?this._instantiateGoogleAnalytics(t):this._removeGoogleAnalyticsCookies()}_instantiateGoogleAnalytics(t){if(this.gaIsInstantiated)return;const e=this.analyticsid;window[`ga-disable-${e}`]=!1;const n={cookie_expires:t.consentExpirationDate,anonymize_ip:!0};function o(...t){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],window.gtag=o,this._ga||(this._ga=this._addAnalyticsScriptTag(e),o("js",new Date)),o("config",e,n),this.gaIsInstantiated=!0,this._dispatchGtagLoadedEvent()}_addAnalyticsScriptTag(t){const e=`https://www.googletagmanager.com/gtag/js?id=${t}`,n=document.createElement("script"),o=document.getElementsByTagName("script")[0];return n.async=!0,n.src=e,o.parentNode.insertBefore(n,o),!0}_removeGoogleAnalyticsCookies(){["_ga","_gid","_gat"].forEach((t=>{jt.delete(t)})),window[`ga-disable-${this.analyticsid}`]=!0,this.gaIsInstantiated=!1}_dispatchGtagLoadedEvent(){const t=new CustomEvent("toujou-gtag-loaded",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}customElements.define("toujou-tracking-google-analytics",Gt);class Yt extends HTMLElement{get url(){return this.getAttribute("url").replace(/^\/\//,`${window.location.protocol}//`)}get siteid(){return this.getAttribute("siteid")}constructor(){super(),this.hidden=!0,this.style.display="contents",this.onStateChange=this.onStateChange.bind(this),this.store=$t,this.store.subscribe(this.onStateChange),this.consentState=this.store.getState().consents.tracking}connectedCallback(){this._handleConsentState(this.consentState),this._storeUnsubscribe=this.store.subscribe(this.onStateChange)}disconnectedCallback(){this._storeUnsubscribe&&this._storeUnsubscribe()}onStateChange(){this.consentState=this.store.getState().consents.tracking||null,this._handleConsentState(this.consentState)}_handleConsentState(t){"object"==typeof t&&null!==t&&t.consentGiven?this._instantiateMatomo(t):this._disableMatomoTracking()}_instantiateMatomo(t){if(this.matomoIsInstantiated)return;const e=new URL(this.url),n=new URL(e);n.pathname="/matomo.php";const o=new URL(e);o.pathname="/matomo.js",window._paq=window._paq||[];const{_paq:i}=window;i.push(["requireConsent"]),i.push(["trackPageView"]),i.push(["enableLinkTracking"]),i.push(["setTrackerUrl",n.toString()]),i.push(["setSiteId",this.siteid]),0===t.consentLifetime?i.push(["setConsentGiven"]):i.push(["rememberConsentGiven",t.consentLifetime/1e3/60/60]),this._matomo||(this._matomo=this._addMatomoScriptTag(o)),this.matomoIsInstantiated=!0,this._dispatchMatomoLoadedEvent()}_addMatomoScriptTag(t){const e=document.createElement("script"),n=document.getElementsByTagName("script")[0];return e.async=!0,e.src=t.toString(),n.parentNode.insertBefore(e,n),!0}_disableMatomoTracking(){if(this.matomoIsInstantiated){window._paq=window._paq||[];const{_paq:t}=window;t.push(["forgetConsentGiven"])}jt.getAll().then((t=>t.forEach((t=>{t.name.match(/^_pk.*$/)&&jt.delete(t.name)})))),this.matomoIsInstantiated=!1}_dispatchMatomoLoadedEvent(){const t=new CustomEvent("toujou-matomo-loaded",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}var Jt;customElements.define("toujou-tracking-matomo",Yt);var Xt=n(Jt||(Jt=xt([":host {\n    display: var(--toujou-third-party-content-display, flex);\n    -webkit-box-align: var(--toujou-third-party-content-align-items, stretch);\n        -ms-flex-align: var(--toujou-third-party-content-align-items, stretch);\n            align-items: var(--toujou-third-party-content-align-items, stretch);\n    -webkit-box-pack: var(--toujou-third-party-content-justify-content, center);\n        -ms-flex-pack: var(--toujou-third-party-content-justify-content, center);\n            justify-content: var(--toujou-third-party-content-justify-content, center);\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: var(--toujou-third-party-content-flex-direction, column);\n            flex-direction: var(--toujou-third-party-content-flex-direction, column);\n    position: var(--toujou-third-party-content-position, relative);\n    top: var(--toujou-third-party-content-top, 0);\n    left: var(--toujou-third-party-content-left, 0);\n    height: var(--toujou-third-party-content-height, 100%);\n    width: var(--toujou-third-party-content-width, 100%);\n}\n\n:host([contenttype='maps']) {\n    position: var(--toujou-third-party-content-maps-position, absolute);\n}\n\niframe {\n    border: var(--toujou-third-party-content-iframe-border, none);\n    position: var(--toujou-third-party-content-iframe-position, absolute);\n    height: var(--toujou-third-party-content-iframe-height, 100%);\n    width: var(--toujou-third-party-content-iframe-width, 100%);\n}\n\n:host([contenttype='html']) iframe {\n    position: var(--toujou-third-party-content-html-iframe-position, relative);\n}\n"])));class Kt extends o{static get is(){return"toujou-third-party-content"}static get styles(){return Xt}render(){return i`
      <slot id="templatedContent" @slotchange="${this._handleSlotChange}"></slot>
      <div @click="${this._handlePlaceholderClick}">
        <slot name="placeholder" id="placeholderContainer" class="placeholder-slot"></slot>
      </div>
    `}static get properties(){return{contentType:{type:String},contentTypeAllowed:{type:Boolean},contentID:{type:String},isIntersecting:{type:Boolean},show:{type:Boolean}}}constructor(){super(),this.contentTypeAllowed=!1,this.isIntersecting=!1,this.show=!1,this.onStateChange=this.onStateChange.bind(this),this._handleConsentButtonClick=this._handleConsentButtonClick.bind(this),this.store=$t,this.store.subscribe(this.onStateChange),this._state=this.store.getState()}connectedCallback(){super.connectedCallback(),this._isContentTypeAllowed(),this._checkIfShouldShow(),this._addEventListeners(),this._addIntersectionObserver()}updated(t){t.forEach(((t,e)=>{"isIntersecting"===e&&this.isIntersecting&&!this.show&&(this.show=!0,this._checkIfShouldShow())}))}onStateChange(){this._state=this.store.getState(),this._isContentTypeAllowed(),this._checkIfShouldShow()}_addEventListeners(){window.addEventListener("toujou-consent-widget-dismissed",(()=>{this._isContentTypeAllowed(),this._checkIfShouldShow()})),window.addEventListener("toujou-consent-button-clicked",this._handleConsentButtonClick)}_handleConsentButtonClick(t){const e=t.target;this.querySelectorAll(".consent").forEach((n=>{n===e&&(this._saveSingleConsent(t.target.getAttribute("consenttype"),this._createNewConsentData(t.target)),this._dispatchAddSnackbar(t.target.getAttribute("snackbarmessage")))}))}_createNewConsentData(t){const e=24*t.getAttribute("consentLifetime")*60*60;return{consentGiven:!0,consentCreationDate:Date.now(),consentExpirationDate:Date.now()+e,consentLifetime:e}}_saveSingleConsent(t,e){this.store.dispatch({type:Dt,payload:{consentType:t,consentData:e}})}_dispatchAddSnackbar(t){const e=new CustomEvent("toujou-add-snackbar",{bubbles:!0,composed:!0,detail:{message:t,type:"auto",duration:2500,variant:"success"}});this.dispatchEvent(e)}_handlePlaceholderClick(t){t.target.hasAttribute("ttpc-showcontentonce")&&this._handleShowContentOnceClick()}_handleShowContentOnceClick(){this._showContent()}_addIntersectionObserver(){new IntersectionObserver(((t,e)=>{this.isIntersecting=t[0].isIntersecting,this.isIntersecting&&e.unobserve(this)})).observe(this)}_appendNonScriptTag(t){this.querySelector(".toujou-third-party-content__templated-content").appendChild(t)}_appendScriptTag(t){const e=document.createElement("script"),n=this._copyScriptAttributesAndContent(t,e);return this.querySelector(".toujou-third-party-content__templated-content").appendChild(n),!n.hasAttribute("src")||n.hasAttribute("async")||n.hasAttribute("defer")?new Promise((t=>{t()})):new Promise((t=>{n.addEventListener("load",t)}))}async _appendTags(t){for(let e=0;e<t.length;e++)await new Promise((n=>{"SCRIPT"!==t[e].tagName?n(this._appendNonScriptTag(t[e])):n(this._appendScriptTag(t[e]))}))}_checkIfShouldShow(){this.contentTypeAllowed&&this.show&&this._showContent()}_clearRenderedContent(){this.querySelector(".toujou-third-party-content__templated-content").innerHTML=""}_copyScriptAttributesAndContent(t,e){for(let n=0;n<t.attributes.length;n++){const o=t.attributes[n];e.setAttribute(o.name,o.value)}return e.innerHTML=t.innerHTML,e}_getTemplateTags(t){const e=[],n=document.createElement("div");n.innerHTML=t;for(const o in n.childNodes)3!==n.childNodes[o].nodeType&&n.childNodes[o].parentElement===n&&e.push(n.childNodes[o]);return e}_handleSlotChange(){this._checkIfShouldShow()}_isCommentedTemplate(t){return t.startsWith("\x3c!--")&&t.endsWith("--\x3e")}_isContentTypeAllowed(){this._state.consents[this.contentType]?this.contentTypeAllowed=this._state.consents[this.contentType].consentGiven||!1:this.contentTypeAllowed=!1,"#aaa"===window.location.hash&&(this.contentTypeAllowed=!0)}_showContent(){this._clearRenderedContent(),this.shadowRoot.querySelector("#templatedContent").assignedNodes({flatten:!0}).filter((t=>"TEMPLATE"===t.tagName)).forEach((t=>{if("html"===this.contentType){const e=this._uncommentTemplate(t),n=this._getTemplateTags(e);this._appendTags(n)}else{const e=document.importNode(t.content,!0);this.querySelector(".toujou-third-party-content__templated-content").appendChild(e)}})),this.setAttribute("showingcontent","")}_uncommentTemplate(t){return this._isCommentedTemplate(t.innerHTML)?t.innerHTML.substr(4,t.innerHTML.length-7):null}}customElements.define(Kt.is,Kt);class Qt extends o{static get is(){return"toujou-iframe-resizer"}render(){return i`
      <slot @slotchange="${this.handleSlotChange}"></slot>`}handleSlotChange(t){t.target.assignedNodes({flatten:!0}).filter((t=>t instanceof HTMLIFrameElement)).forEach((t=>{let e={};try{e=JSON.parse(t.getAttribute("toujou-iframe"))||{}}catch(n){(console.error||console.log).call(console,n.stack||n)}A.iframeResizer(e,t)}))}}customElements.define(Qt.is,Qt);
//# sourceMappingURL=base.js.map
