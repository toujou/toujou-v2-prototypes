var t=Object.defineProperty;import{i as e}from"./main-nav.js";import{i as n,s as o,x as i}from"./lit-element-CHDbfp5U.js";import{_ as r,a as s}from"./tslib.es6-Br7-PHSQ.js";import{e as a}from"./custom-element-DPYutfhb.js";import{n as c}from"./property-BjK_DIN0.js";import"./query-assigned-elements-DqqHV3QO.js";import{a as l,d,b as u}from"./redux-CCeFiJMx.js";import{t as h}from"./state-CplovN88.js";function m(){e()}!function(){var t=function(t,e){var n=function(t){for(var e=0,n=t.length;e<n;e++)o(t[e])},o=function(t){var e=t.target,n=t.attributeName,o=t.oldValue;e.attributeChangedCallback(n,o,e.getAttribute(n))};return function(i,r){var s=i.constructor.observedAttributes;return s&&t(r).then((function(){new e(n).observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:s});for(var t=0,r=s.length;t<r;t++)i.hasAttribute(s[t])&&o({target:i,attributeName:s[t],oldValue:null})})),i}};function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function n(t,n){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n){o&&(t=o);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return a=t.done,t},e:function(t){c=!0,s=t},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw s}}}}var o=!0,i=!1,r="querySelectorAll",s="querySelectorAll",a=self,c=a.document,l=a.Element,d=a.MutationObserver,u=a.Set,h=a.WeakMap,m=function(t){return s in t},p=[].filter,f=function(t){var e=new h,a=function(n,o){var i;if(o)for(var r,s=function(t){return t.matches||t.webkitMatchesSelector||t.msMatchesSelector}(n),a=0,c=g.length;a<c;a++)s.call(n,r=g[a])&&(e.has(n)||e.set(n,new u),(i=e.get(n)).has(r)||(i.add(r),t.handle(n,o,r)));else e.has(n)&&(i=e.get(n),e.delete(n),i.forEach((function(e){t.handle(n,o,e)})))},f=function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,o=t.length;n<o;n++)a(t[n],e)},g=t.query,v=t.root||c,b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MutationObserver,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["*"],c=function e(i,s,a,c,l,d){var u,h=n(i);try{for(h.s();!(u=h.n()).done;){var m=u.value;(d||r in m)&&(l?a.has(m)||(a.add(m),c.delete(m),t(m,l)):c.has(m)||(c.add(m),a.delete(m),t(m,l)),d||e(m[r](s),s,a,c,l,o))}}catch(p){h.e(p)}finally{h.f()}},l=new s((function(t){if(a.length){var e,r=a.join(","),s=new Set,l=new Set,d=n(t);try{for(d.s();!(e=d.n()).done;){var u=e.value,h=u.addedNodes,m=u.removedNodes;c(m,r,s,l,i,i),c(h,r,s,l,o,i)}}catch(p){d.e(p)}finally{d.f()}}})),d=l.observe;return(l.observe=function(t){return d.call(l,t,{subtree:o,childList:o})})(e),l}(a,v,d,g),y=l.prototype.attachShadow;return y&&(l.prototype.attachShadow=function(t){var e=y.call(this,t);return b.observe(e),e}),g.length&&f(v[s](g)),{drop:function(t){for(var n=0,o=t.length;n<o;n++)e.delete(t[n])},flush:function(){for(var t=b.takeRecords(),e=0,n=t.length;e<n;e++)f(p.call(t[e].removedNodes,m),!1),f(p.call(t[e].addedNodes,m),!0)},observer:b,parse:f}},g=self,v=g.document,b=g.Map,y=g.MutationObserver,w=g.Object,_=g.Set,k=g.WeakMap,S=g.Element,E=g.HTMLElement,C=g.Node,x=g.Error,A=g.TypeError,j=g.Reflect,T=w.defineProperty,O=w.keys,I=w.getOwnPropertyNames,M=w.setPrototypeOf,$=!self.customElements,N=function(t){for(var e=O(t),n=[],o=new _,i=e.length,r=0;r<i;r++){n[r]=t[e[r]];try{delete t[e[r]]}catch(s){o.add(r)}}return function(){for(var r=0;r<i;r++)o.has(r)||(t[e[r]]=n[r])}};if($){var R=function(){var t=this.constructor;if(!z.has(t))throw new A("Illegal constructor");var e=z.get(t);if(F)return q(F,e);var n=L.call(v,e);return q(M(n,t.prototype),e)},L=v.createElement,z=new b,P=new b,D=new b,B=new b,H=[],U=f({query:H,handle:function(t,e,n){var o=D.get(n);if(e&&!o.isPrototypeOf(t)){var i=N(t);F=M(t,o);try{new o.constructor}finally{F=null,i()}}var r="".concat(e?"":"dis","connectedCallback");r in o&&t[r]()}}).parse,F=null,W=function(t){if(!P.has(t)){var e,n=new Promise((function(t){e=t}));P.set(t,{$:n,_:e})}return P.get(t).$},q=t(W,y);self.customElements={define:function(t,e){if(B.has(t))throw new x('the name "'.concat(t,'" has already been used with this registry'));z.set(e,t),D.set(t,e.prototype),B.set(t,e),H.push(t),W(t).then((function(){U(v.querySelectorAll(t))})),P.get(t)._(e)},get:function(t){return B.get(t)},whenDefined:W},T(R.prototype=E.prototype,"constructor",{value:R}),self.HTMLElement=R,v.createElement=function(t,e){var n=e&&e.is,o=n?B.get(n):B.get(t);return o?new o:L.call(v,t)},"isConnected"in C.prototype||T(C.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if($=!self.customElements.get("extends-br"))try{var V=function t(){return self.Reflect.construct(HTMLBRElement,[],t)};V.prototype=HTMLLIElement.prototype;var G="extends-br";self.customElements.define("extends-br",V,{extends:"br"}),$=v.createElement("br",{is:G}).outerHTML.indexOf(G)<0;var J=self.customElements,Y=J.get,X=J.whenDefined;self.customElements.whenDefined=function(t){var e=this;return X.call(this,t).then((function(n){return n||Y.call(e,t)}))}}catch(yt){}if($){var K=function(t){var e=it.get(t);mt(e.querySelectorAll(this),t.isConnected)},Q=self.customElements,Z=v.createElement,tt=Q.define,et=Q.get,nt=Q.upgrade,ot=(j||{construct:function(t){return t.call(this)}}).construct,it=new k,rt=new _,st=new b,at=new b,ct=new b,lt=new b,dt=[],ut=[],ht=function(t){return lt.get(t)||et.call(Q,t)},mt=f({query:ut,handle:function(t,e,n){var o=ct.get(n);if(e&&!o.isPrototypeOf(t)){var i=N(t);bt=M(t,o);try{new o.constructor}finally{bt=null,i()}}var r="".concat(e?"":"dis","connectedCallback");r in o&&t[r]()}}).parse,pt=f({query:dt,handle:function(t,e){it.has(t)&&(e?rt.add(t):rt.delete(t),ut.length&&K.call(ut,t))}}).parse,ft=S.prototype.attachShadow;ft&&(S.prototype.attachShadow=function(t){var e=ft.call(this,t);return it.set(this,e),e});var gt=function(t){if(!at.has(t)){var e,n=new Promise((function(t){e=t}));at.set(t,{$:n,_:e})}return at.get(t).$},vt=t(gt,y),bt=null;I(self).filter((function(t){return/^HTML.*Element$/.test(t)})).forEach((function(t){var e=self[t];function n(){var t=this.constructor;if(!st.has(t))throw new A("Illegal constructor");var n=st.get(t),o=n.is,i=n.tag;if(o){if(bt)return vt(bt,o);var r=Z.call(v,i);return r.setAttribute("is",o),vt(M(r,t.prototype),o)}return ot.call(this,e,[],t)}T(n.prototype=e.prototype,"constructor",{value:n}),T(self,t,{value:n})})),v.createElement=function(t,e){var n=e&&e.is;if(n){var o=lt.get(n);if(o&&st.get(o).tag===t)return new o}var i=Z.call(v,t);return n&&i.setAttribute("is",n),i},Q.get=ht,Q.whenDefined=gt,Q.upgrade=function(t){var e=t.getAttribute("is");if(e){var n=lt.get(e);if(n)return void vt(M(t,n.prototype),e)}nt.call(Q,t)},Q.define=function(t,e,n){if(ht(t))throw new x("'".concat(t,"' has already been defined as a custom element"));var o,i=n&&n.extends;st.set(e,i?{is:t,tag:i}:{is:"",tag:t}),i?(o="".concat(i,'[is="').concat(t,'"]'),ct.set(o,e.prototype),lt.set(t,e),ut.push(o)):(tt.apply(Q,arguments),dt.push(o=t)),gt(t).then((function(){i?(mt(v.querySelectorAll(o)),rt.forEach(K,[o])):pt(v.querySelectorAll(o))})),at.get(t)._(e)}}}(),"loading"!==document.readyState?setTimeout((()=>{m()})):document.addEventListener("DOMContentLoaded",(()=>{m()}));class p{constructor(t){this.dialogEl=t,this.closeButton=this.dialogEl.querySelector(".contact-dialog__close"),this._onDialogClick=this._onDialogClick.bind(this),this._onOpenContactDialog=this._onOpenContactDialog.bind(this),this._closeDialog=this._closeDialog.bind(this),this._addEventListeners()}_addEventListeners(){var t;window.addEventListener("open-contact-dialog",this._onOpenContactDialog),null==(t=this.closeButton)||t.addEventListener("click",this._closeDialog),this.dialogEl.addEventListener("click",this._onDialogClick)}_onOpenContactDialog(){this.dialogEl.showModal()}_closeDialog(){this.dialogEl.close()}_onDialogClick(t){const e=this.dialogEl.getBoundingClientRect();t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom||this._closeDialog()}}window.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector('input[name="contact-state"]');if(!t)return;const e=document.querySelector("#contact-dialog");e&&(new p(e),t.addEventListener("change",(()=>{t.dispatchEvent(new CustomEvent("open-contact-dialog",{bubbles:!0,composed:!0}))})))}));var f=!1;if("undefined"!=typeof window){var g={get passive(){f=!0}};window.addEventListener("testPassive",null,g),window.removeEventListener("testPassive",null,g)}var v,b="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),y=[],w=!1,_=-1,k=void 0,S=void 0,E=void 0,C=function(t){return y.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},x=function(t){var e=t||window.event;return!!C(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},A=function(){void 0!==E&&(document.body.style.paddingRight=E,E=void 0),void 0!==k&&(document.body.style.overflow=k,k=void 0)},j=function(){if(void 0!==S){var t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10);document.body.style.position=S.position,document.body.style.top=S.top,document.body.style.left=S.left,window.scrollTo(e,t),S=void 0}},T=function(t,e){if(t){if(!y.some((function(e){return e.targetElement===t}))){var n={targetElement:t,options:e||{}};y=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(y),[n]),b?window.requestAnimationFrame((function(){if(void 0===S){S={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,e=t.scrollY,n=t.scrollX,o=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-e,document.body.style.left=-n,setTimeout((function(){return window.requestAnimationFrame((function(){var t=o-window.innerHeight;t&&e>=o&&(document.body.style.top=-(e+t))}))}),300)}})):function(t){if(void 0===E){var e=!!t&&!0===t.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;if(e&&n>0){var o=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);E=document.body.style.paddingRight,document.body.style.paddingRight=o+n+"px"}}void 0===k&&(k=document.body.style.overflow,document.body.style.overflow="hidden")}(e),b&&(t.ontouchstart=function(t){1===t.targetTouches.length&&(_=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var n=t.targetTouches[0].clientY-_;!C(t.target)&&(e&&0===e.scrollTop&&n>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&n<0?x(t):t.stopPropagation())}(e,t)},w||(document.addEventListener("touchmove",x,f?{passive:!1}:void 0),w=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},O={exports:{}};v=O,console.info("\nIFRAME-RESIZER\n\nIframe-Resizer 5 is now available via the following two packages:\n\n * @iframe-resizer/parent\n * @iframe-resizer/child\n\nAdditionally their are also new versions of iframe-resizer for React, Vue, and jQuery.\n\nVersion 5 of iframe-resizer has been extensively rewritten to use modern browser APIs, which has enabled significantly better performance and greater accuracy in the detection of content resizing events.\n\nPlease see https://iframe-resizer.com/upgrade for more details.\n"),function(t){if("undefined"!=typeof window){var e,n,o=0,i=!1,r=!1,s="[iFrameSizer]",a=null,c=window.requestAnimationFrame,l=Object.freeze({max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),d={},u=null,h=Object.freeze({autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,license:"1jqr0si6pnt",log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){k("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}}),m={};window.jQuery!==t&&((n=window.jQuery).fn?n.fn.iFrameResize||(n.fn.iFrameResize=function(t){return this.filter("iframe").each((function(e,n){L(n,t)})).end()}):_("","Unable to bind to jQuery, it is not fully loaded.")),v.exports=H(),window.iFrameResize=window.iFrameResize||H()}function p(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function f(t,e,n){t.addEventListener(e,n,!1)}function g(t,e,n){t.removeEventListener(e,n,!1)}function b(t){return s+"["+function(t){var e="Host page: "+t;return window.top!==window.self&&(e=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+t:"Nested host page: "+t),e}(t)+"]"}function y(t){return d[t]?d[t].log:i}function w(t,e){S("log",t,e,y(t))}function _(t,e){S("info",t,e,y(t))}function k(t,e){S("warn",t,e,!0)}function S(t,e,n,o){!0===o&&"object"==typeof window.console&&console[t](b(e),n)}function E(t){function e(){i("Height"),i("Width"),$((function(){M(D),T(B),v("onResized",D)}),D,"init")}function n(t){return"border-box"!==t.boxSizing?0:(t.paddingTop?parseInt(t.paddingTop,10):0)+(t.paddingBottom?parseInt(t.paddingBottom,10):0)}function o(t){return"border-box"!==t.boxSizing?0:(t.borderTopWidth?parseInt(t.borderTopWidth,10):0)+(t.borderBottomWidth?parseInt(t.borderBottomWidth,10):0)}function i(t){var e=Number(d[B]["max"+t]),n=Number(d[B]["min"+t]),o=t.toLowerCase(),i=Number(D[o]);w(B,"Checking "+o+" is in range "+n+"-"+e),i<n&&(i=n,w(B,"Set "+o+" to min value")),i>e&&(i=e,w(B,"Set "+o+" to max value")),D[o]=""+i}function r(t){return P.slice(P.indexOf(":")+7+t)}function c(t,e){var n,o,i;n=function(){var n,o;N("Send Page Info","pageInfo:"+(n=document.body.getBoundingClientRect(),o=D.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:o.height,iframeWidth:o.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(o.top-n.top,10),offsetLeft:parseInt(o.left-n.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),t,e)},o=32,m[i=e]||(m[i]=setTimeout((function(){m[i]=null,n()}),o))}function l(t){var e=t.getBoundingClientRect();return j(B),{x:Math.floor(Number(e.left)+Number(a.x)),y:Math.floor(Number(e.top)+Number(a.y))}}function u(t){var e=t?l(D.iframe):{x:0,y:0},n={x:Number(D.width)+e.x,y:Number(D.height)+e.y};w(B,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top===window.self?(a=n,h(),w(B,"--")):window.parentIFrame?window.parentIFrame["scrollTo"+(t?"Offset":"")](n.x,n.y):k(B,"Unable to scroll to requested position, window.parentIFrame not found")}function h(){!1===v("onScroll",a)?O():T(B)}function p(t){var e={};if(0===Number(D.width)&&0===Number(D.height)){var n=r(9).split(":");e={x:n[1],y:n[0]}}else e={x:D.width,y:D.height};v(t,{iframe:D.iframe,screenX:Number(e.x),screenY:Number(e.y),type:D.type})}function v(t,e){return C(B,t,e)}var b,y,S,E,x,L,z,P=t.data,D={},B=null;"[iFrameResizerChild]Ready"===P?function(){for(var t in d)N("iFrame requested init",R(t),d[t].iframe,t)}():s===(""+P).slice(0,13)&&P.slice(13).split(":")[0]in d?(E=P.slice(13).split(":"),x=E[1]?parseInt(E[1],10):0,L=d[E[0]]&&d[E[0]].iframe,z=getComputedStyle(L),D={iframe:L,id:E[0],height:x+n(z)+o(z),width:E[2],type:E[3]},B=D.id,d[B]&&(d[B].loaded=!0),(S=D.type in{true:1,false:1,undefined:1})&&w(B,"Ignoring init message from meta parent page"),!S&&(y=!0,d[b=B]||(y=!1,k(D.type+" No settings for "+b+". Message was: "+P)),y)&&(w(B,"Received: "+P),function(){var t=!0;return null===D.iframe&&(k(B,"IFrame ("+D.id+") not found"),t=!1),t}()&&function(){var e,n=t.origin,o=d[B]&&d[B].checkOrigin;if(o&&""+n!="null"&&!(o.constructor===Array?function(){var t=0,e=!1;for(w(B,"Checking connection is from allowed list of origins: "+o);t<o.length;t++)if(o[t]===n){e=!0;break}return e}():(e=d[B]&&d[B].remoteHost,w(B,"Checking connection is from: "+e),n===e)))throw new Error("Unexpected message received from: "+n+" for "+D.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(d[B]&&d[B].firstRun&&d[B]&&(d[B].firstRun=!1),D.type){case"close":A(D.iframe);break;case"message":s=r(6),w(B,"onMessage passed: {iframe: "+D.iframe.id+", message: "+s+"}"),v("onMessage",{iframe:D.iframe,message:JSON.parse(s)}),w(B,"--");break;case"mouseenter":p("onMouseEnter");break;case"mouseleave":p("onMouseLeave");break;case"autoResize":d[B].autoResize=JSON.parse(r(9));break;case"scrollTo":u(!1);break;case"scrollToOffset":u(!0);break;case"pageInfo":c(d[B]&&d[B].iframe,B),function(){function t(t,o){function i(){d[n]?c(d[n].iframe,n):e()}["scroll","resize"].forEach((function(e){w(n,t+e+" listener for sendPageInfo"),o(window,e,i)}))}function e(){t("Remove ",g)}var n=B;t("Add ",f),d[n]&&(d[n].stopPageInfo=e)}();break;case"pageInfoStop":d[B]&&d[B].stopPageInfo&&(d[B].stopPageInfo(),delete d[B].stopPageInfo);break;case"inPageLink":n=r(9).split("#")[1]||"",o=decodeURIComponent(n),(i=document.getElementById(o)||document.getElementsByName(o)[0])?(t=l(i),w(B,"Moving to in page link (#"+n+") at x: "+t.x+" y: "+t.y),a={x:t.x,y:t.y},h(),w(B,"--")):window.top===window.self?w(B,"In page link #"+n+" not found"):window.parentIFrame?window.parentIFrame.moveToAnchor(n):w(B,"In page link #"+n+" not found and window.parentIFrame not found");break;case"reset":I(D);break;case"init":e(),v("onInit",D.iframe);break;default:0===Number(D.width)&&0===Number(D.height)?k("Unsupported message received ("+D.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):e()}var t,n,o,i,s}())):_(B,"Ignored: "+P)}function C(t,e,n){var o=null,i=null;if(d[t]){if("function"!=typeof(o=d[t][e]))throw new TypeError(e+" on iFrame["+t+"] is not a function");i=o(n)}return i}function x(t){var e=t.id;delete d[e]}function A(t){var n=t.id;if(!1!==C(n,"onClose",n)){w(n,"Removing iFrame: "+n);try{t.parentNode&&t.parentNode.removeChild(t)}catch(o){k(o)}C(n,"onClosed",n),w(n,"--"),x(t),e&&(e.disconnect(),e=null)}else w(n,"Close iframe cancelled by onClose event")}function j(e){null===a&&w(e,"Get page position: "+(a={x:window.pageXOffset===t?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===t?document.documentElement.scrollTop:window.pageYOffset}).x+","+a.y)}function T(t){null!==a&&(window.scrollTo(a.x,a.y),w(t,"Set page position: "+a.x+","+a.y),O())}function O(){a=null}function I(t){w(t.id,"Size reset requested by "+("init"===t.type?"host page":"iFrame")),j(t.id),$((function(){M(t),N("reset","reset",t.iframe,t.id)}),t,"reset")}function M(t){function e(e){r||"0"!==t[e]||(r=!0,w(o,"Hidden iFrame detected, creating visibility listener"),function(){function t(){function t(t){function e(e){return"0px"===(d[t]&&d[t].iframe.style[e])}function n(t){return null!==t.offsetParent}d[t]&&n(d[t].iframe)&&(e("height")||e("width"))&&N("Visibility change","resize",d[t].iframe,t)}Object.keys(d).forEach((function(e){t(e)}))}function e(e){w("window","Mutation observed: "+e[0].target+" "+e[0].type),z(t,16)}function n(){var t=document.querySelector("body"),n={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};new o(e).observe(t,n)}var o=p();o&&n()}())}function n(n){!function(e){t.id?(t.iframe.style[e]=t[e]+"px",w(t.id,"IFrame ("+o+") "+e+" set to "+t[e]+"px")):w("undefined","messageData id not set")}(n),e(n)}var o=t.iframe.id;d[o]&&(d[o].sizeHeight&&n("height"),d[o].sizeWidth&&n("width"))}function $(t,e,n){n!==e.type&&c&&!window.jasmine?(w(e.id,"Requesting animation frame"),c(t)):t()}function N(t,e,n,o,i){var r,a=!1;o=o||n.id,d[o]&&(n&&"contentWindow"in n&&null!==n.contentWindow?(r=d[o]&&d[o].targetOrigin,w(o,"["+t+"] Sending msg to iframe["+o+"] ("+e+") targetOrigin: "+r),n.contentWindow.postMessage(s+e,r)):k(o,"["+t+"] IFrame("+o+") not found"),i&&d[o]&&d[o].warningTimeout&&(d[o].msgTimeout=setTimeout((function(){!d[o]||d[o].loaded||a||(a=!0,k(o,"IFrame has not responded within "+d[o].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}),d[o].warningTimeout)))}function R(t){return t+":"+d[t].bodyMarginV1+":"+d[t].sizeWidth+":"+d[t].log+":"+d[t].interval+":"+d[t].enablePublicMethods+":"+d[t].autoResize+":"+d[t].bodyMargin+":"+d[t].heightCalculationMethod+":"+d[t].bodyBackground+":"+d[t].bodyPadding+":"+d[t].tolerance+":"+d[t].inPageLinks+":"+d[t].resizeFrom+":"+d[t].widthCalculationMethod+":"+d[t].mouseEvents}function L(n,r){function s(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],k(g,"Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}var a,c,u,m,g=function(t){if("string"!=typeof t)throw new TypeError("Invaild id for iFrame. Expected String");var e;return""===t&&(n.id=(e=r&&r.id||h.id+o++,null!==document.getElementById(e)&&(e+=o++),t=e),i=(r||{}).log,w(t,"Added missing iframe ID: "+t+" ("+n.src+")")),t}(n.id);g in d&&"iFrameResizer"in n?k(g,"Ignored iFrame, already setup."):(u=(u=r)||{},d[g]=Object.create(null),d[g].iframe=n,d[g].firstRun=!0,d[g].remoteHost=n.src&&n.src.split("/").slice(0,3).join("/"),function(t){if("object"!=typeof t)throw new TypeError("Options is not an object")}(u),Object.keys(u).forEach(s,u),function(t){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(d[g][e]=Object.prototype.hasOwnProperty.call(t,e)?t[e]:h[e])}(u),d[g]&&(d[g].targetOrigin=!0===d[g].checkOrigin?""===(m=d[g].remoteHost)||null!==m.match(/^(about:blank|javascript:|file:\/\/)/)?"*":m:"*"),function(){switch(w(g,"IFrame scrolling "+(d[g]&&d[g].scrolling?"enabled":"disabled")+" for "+g),n.style.overflow=!1===(d[g]&&d[g].scrolling)?"hidden":"auto",d[g]&&d[g].scrolling){case"omit":break;case!0:n.scrolling="yes";break;case!1:n.scrolling="no";break;default:n.scrolling=d[g]?d[g].scrolling:"no"}}(),function(){function t(t){var e=d[g][t];1/0!==e&&0!==e&&(n.style[t]="number"==typeof e?e+"px":e,w(g,"Set "+t+" = "+n.style[t]))}function e(t){if(d[g]["min"+t]>d[g]["max"+t])throw new Error("Value for min"+t+" can not be greater than max"+t)}e("Height"),e("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}(),"number"!=typeof(d[g]&&d[g].bodyMargin)&&"0"!==(d[g]&&d[g].bodyMargin)||(d[g].bodyMarginV1=d[g].bodyMargin,d[g].bodyMargin=d[g].bodyMargin+"px"),a=R(g),(c=p())&&(e=function(t){if(!n.parentNode)return null;var e=new t((function(t){t.forEach((function(t){Array.prototype.slice.call(t.removedNodes).forEach((function(t){t===n&&A(n)}))}))}));return e.observe(n.parentNode,{childList:!0}),e}(c)),f(n,"load",(function(){var e,o;N("iFrame.onload",a,n,t,!0),e=d[g]&&d[g].firstRun,o=d[g]&&d[g].heightCalculationMethod in l,!e&&o&&I({iframe:n,height:0,width:0,type:"init"})})),N("init",a,n,t,!0),d[g]&&(d[g].iframe.iFrameResizer={close:A.bind(null,d[g].iframe),removeListeners:x.bind(null,d[g].iframe),resize:N.bind(null,"Window resize","resize",d[g].iframe),moveToAnchor:function(t){N("Move to anchor","moveToAnchor:"+t,d[g].iframe,g)},sendMessage:function(t){N("Send Message","message:"+(t=JSON.stringify(t)),d[g].iframe,g)}}))}function z(t,e){null===u&&(u=setTimeout((function(){u=null,t()}),e))}function P(){"hidden"!==document.visibilityState&&(w("document","Trigger event: Visibility change"),z((function(){D("Tab Visible","resize")}),16))}function D(t,e){Object.keys(d).forEach((function(n){(function(t){return d[t]&&"parent"===d[t].resizeFrom&&d[t].autoResize&&!d[t].firstRun})(n)&&N(t,e,d[n].iframe,n)}))}function B(){f(window,"message",E),f(window,"resize",(function(){var t;w("window","Trigger event: "+(t="resize")),z((function(){D("Window "+t,"resize")}),16)})),f(document,"visibilitychange",P),f(document,"-webkit-visibilitychange",P)}function H(){function e(t,e){e&&(function(){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">")}(),L(e,t),n.push(e))}var n;return function(){var t,e=["moz","webkit","o","ms"];for(t=0;t<e.length&&!c;t+=1)c=window[e[t]+"RequestAnimationFrame"];c?c=c.bind(window):w("setup","RequestAnimationFrame not supported")}(),B(),function(o,i){switch(n=[],function(t){t&&t.enablePublicMethods&&k("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(o),typeof i){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(i||"iframe"),e.bind(t,o));break;case"object":e(o,i);break;default:throw new TypeError("Unexpected data type ("+typeof i+")")}return n}}}();var I=O.exports,M={exports:{}};!function(t){!function(e){if("undefined"!=typeof window){var n=!0,o="",i=0,r="",s=null,a="",c=!1,l={resize:1,click:1},d=128,u=!0,h=1,m="bodyOffset",p=m,f=!0,g="",v={},b=32,y=null,w=!1,_=!1,k="[iFrameSizer]",S="",E={max:1,min:1,bodyScroll:1,documentElementScroll:1},C="child",x=window.parent,A="*",j=0,T=!1,O=null,I=16,M=1,$="scroll",N=$,R=window,L=function(){it("onMessage function not defined")},z=function(){},P=function(){},D={height:function(){return it("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return it("Custom width calculation function not defined"),document.body.scrollWidth}},B={},H=!1;try{var U=Object.create({},{passive:{get:function(){H=!0}}});window.addEventListener("test",Z,U),window.removeEventListener("test",Z,U)}catch(jt){}var F,W,q,V,G,J,Y,X={bodyOffset:function(){return document.body.offsetHeight+ft("marginTop")+ft("marginBottom")},offset:function(){return X.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return D.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,vt(X))},min:function(){return Math.min.apply(null,vt(X))},grow:function(){return X.max()},lowestElement:function(){return Math.max(X.bodyOffset()||X.documentElementOffset(),gt("bottom",yt()))},taggedElement:function(){return bt("bottom","data-iframe-height")}},K={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return D.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(K.bodyScroll(),K.documentElementScroll())},max:function(){return Math.max.apply(null,vt(K))},min:function(){return Math.min.apply(null,vt(K))},rightMostElement:function(){return gt("right",yt())},taggedElement:function(){return bt("right","data-iframe-width")}},Q=(F=wt,G=null,J=0,Y=function(){J=Date.now(),G=null,V=F.apply(W,q),G||(W=q=null)},function(){var t=Date.now();J||(J=t);var e=I-(t-J);return W=this,q=arguments,e<=0||e>I?(G&&(clearTimeout(G),G=null),J=t,V=F.apply(W,q),G||(W=q=null)):G||(G=setTimeout(Y,e)),V});"iframeResizer"in window||(window.iframeChildListener=function(t){xt({data:t})},tt(window,"message",xt),tt(window,"readystatechange",At),At())}function Z(){}function tt(t,e,n,o){t.addEventListener(e,n,!!H&&(o||{}))}function et(t){return t.charAt(0).toUpperCase()+t.slice(1)}function nt(t){return k+"["+S+"] "+t}function ot(t){w&&"object"==typeof window.console&&console.log(nt(t))}function it(t){"object"==typeof window.console&&console.warn(nt(t))}function rt(){var t;!function(){function t(t){return"true"===t}var s=g.slice(13).split(":");S=s[0],i=e===s[1]?i:Number(s[1]),c=e===s[2]?c:t(s[2]),w=e===s[3]?w:t(s[3]),b=e===s[4]?b:Number(s[4]),n=e===s[6]?n:t(s[6]),r=s[7],p=e===s[8]?p:s[8],o=s[9],a=s[10],j=e===s[11]?j:Number(s[11]),v.enable=e!==s[12]&&t(s[12]),C=e===s[13]?C:s[13],N=e===s[14]?N:s[14],_=e===s[15]?_:t(s[15])}(),ot("Initialising iFrame ("+window.location.href+")"),function(){function t(){var t=window.iFrameResizer;ot("Reading data from page: "+JSON.stringify(t)),Object.keys(t).forEach(st,t),L="onMessage"in t?t.onMessage:L,z="onReady"in t?t.onReady:z,A="targetOrigin"in t?t.targetOrigin:A,p="heightCalculationMethod"in t?t.heightCalculationMethod:p,N="widthCalculationMethod"in t?t.widthCalculationMethod:N}function e(t,e){return"function"==typeof t&&(ot("Setup custom "+e+"CalcMethod"),D[e]=t,t="custom"),t}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(t(),p=e(p,"height"),N=e(N,"width"));ot("TargetOrigin for parent set to: "+A)}(),function(){e===r&&(r=i+"px");at("margin",function(t,e){-1!==e.indexOf("-")&&(it("Negative CSS value ignored for "+t),e="");return e}("margin",r))}(),at("background",o),at("padding",a),(t=document.createElement("div")).style.clear="both",t.style.display="block",t.style.height="0",document.body.appendChild(t),ut(),ht(),document.documentElement.style.height="",document.body.style.height="",ot('HTML & body height set to "auto"'),ot("Enable public methods"),R.parentIFrame={autoResize:function(t){return!0===t&&!1===n?(n=!0,mt()):!1===t&&!0===n&&(n=!1,lt("remove"),null!==s&&s.disconnect(),clearInterval(y)),Ct(0,0,"autoResize",JSON.stringify(n)),n},close:function(){Ct(0,0,"close")},getId:function(){return S},getPageInfo:function(t){"function"==typeof t?(P=t,Ct(0,0,"pageInfo")):(P=function(){},Ct(0,0,"pageInfoStop"))},moveToAnchor:function(t){v.findTarget(t)},reset:function(){Et("parentIFrame.reset")},scrollTo:function(t,e){Ct(e,t,"scrollTo")},scrollToOffset:function(t,e){Ct(e,t,"scrollToOffset")},sendMessage:function(t,e){Ct(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){p=t,ut()},setWidthCalculationMethod:function(t){N=t,ht()},setTargetOrigin:function(t){ot("Set targetOrigin: "+t),A=t},size:function(t,e){_t("size","parentIFrame.size("+(t||"")+(e?","+e:"")+")",t,e)}},function(){if(!0!==_)return;function t(t){Ct(0,0,t.type,t.screenY+":"+t.screenX)}function e(e,n){ot("Add event listener: "+n),tt(window.document,e,t)}e("mouseenter","Mouse Enter"),e("mouseleave","Mouse Leave")}(),mt(),v=function(){function t(){return{x:window.pageXOffset===e?document.documentElement.scrollLeft:window.pageXOffset,y:window.pageYOffset===e?document.documentElement.scrollTop:window.pageYOffset}}function n(e){var n=e.getBoundingClientRect(),o=t();return{x:parseInt(n.left,10)+parseInt(o.x,10),y:parseInt(n.top,10)+parseInt(o.y,10)}}function o(t){function o(t){var e=n(t);ot("Moving to in page link (#"+i+") at x: "+e.x+" y: "+e.y),Ct(e.y,e.x,"scrollToOffset")}var i=t.split("#")[1]||t,r=decodeURIComponent(i),s=document.getElementById(r)||document.getElementsByName(r)[0];e===s?(ot("In page link (#"+i+") not found in iFrame, so sending to parent"),Ct(0,0,"inPageLink","#"+i)):o(s)}function i(){var t=window.location.hash,e=window.location.href;""!==t&&"#"!==t&&o(e)}function r(){function t(t){function e(t){t.preventDefault(),o(this.getAttribute("href"))}"#"!==t.getAttribute("href")&&tt(t,"click",e)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),t)}function s(){tt(window,"hashchange",i)}function a(){setTimeout(i,d)}function c(){Array.prototype.forEach&&document.querySelectorAll?(ot("Setting up location.hash handlers"),r(),s(),a()):it("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}v.enable?c():ot("In page linking not enabled");return{findTarget:o}}(),_t("init","Init message from host page"),z()}function st(t){var e=t.split("Callback");if(2===e.length){var n="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[n]=this[t],delete this[t],it("Deprecated: '"+t+"' has been renamed '"+n+"'. The old method will be removed in the next major version.")}}function at(t,n){e!==n&&""!==n&&"null"!==n&&(document.body.style[t]=n,ot("Body "+t+' set to "'+n+'"'))}function ct(t){var e={add:function(e){function n(){_t(t.eventName,t.eventType)}B[e]=n,tt(window,e,n,{passive:!0})},remove:function(t){var e,n,o,i=B[t];delete B[t],e=window,n=t,o=i,e.removeEventListener(n,o,!1)}};t.eventNames&&Array.prototype.map?(t.eventName=t.eventNames[0],t.eventNames.map(e[t.method])):e[t.method](t.eventName),ot(et(t.method)+" event listener: "+t.eventType)}function lt(t){ct({method:t,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),ct({method:t,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),ct({method:t,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),ct({method:t,eventType:"Input",eventName:"input"}),ct({method:t,eventType:"Mouse Up",eventName:"mouseup"}),ct({method:t,eventType:"Mouse Down",eventName:"mousedown"}),ct({method:t,eventType:"Orientation Change",eventName:"orientationchange"}),ct({method:t,eventType:"Print",eventNames:["afterprint","beforeprint"]}),ct({method:t,eventType:"Ready State Change",eventName:"readystatechange"}),ct({method:t,eventType:"Touch Start",eventName:"touchstart"}),ct({method:t,eventType:"Touch End",eventName:"touchend"}),ct({method:t,eventType:"Touch Cancel",eventName:"touchcancel"}),ct({method:t,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),ct({method:t,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),ct({method:t,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===C&&ct({method:t,eventType:"IFrame Resized",eventName:"resize"})}function dt(t,e,n,o){return e!==t&&(t in n||(it(t+" is not a valid option for "+o+"CalculationMethod."),t=e),ot(o+' calculation method set to "'+t+'"')),t}function ut(){p=dt(p,m,X,"height")}function ht(){N=dt(N,$,K,"width")}function mt(){var t;!0===n?(lt("add"),t=0>b,window.MutationObserver||window.WebKitMutationObserver?t?pt():s=function(){function t(t){function e(t){!1===t.complete&&(ot("Attach listeners to "+t.src),t.addEventListener("load",i,!1),t.addEventListener("error",r,!1),c.push(t))}"attributes"===t.type&&"src"===t.attributeName?e(t.target):"childList"===t.type&&Array.prototype.forEach.call(t.target.querySelectorAll("img"),e)}function e(t){c.splice(c.indexOf(t),1)}function n(t){ot("Remove listeners from "+t.src),t.removeEventListener("load",i,!1),t.removeEventListener("error",r,!1),e(t)}function o(t,e,o){n(t.target),_t(e,o+": "+t.target.src)}function i(t){o(t,"imageLoad","Image loaded")}function r(t){o(t,"imageLoadFailed","Image load failed")}function s(e){_t("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}function a(){var t=document.querySelector("body"),e={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return d=new l(s),ot("Create body MutationObserver"),d.observe(t,e),d}var c=[],l=window.MutationObserver||window.WebKitMutationObserver,d=a();return{disconnect:function(){"disconnect"in d&&(ot("Disconnect body MutationObserver"),d.disconnect(),c.forEach(n))}}}():(ot("MutationObserver not supported in this browser!"),pt())):ot("Auto Resize disabled")}function pt(){0!==b&&(ot("setInterval: "+b+"ms"),y=setInterval((function(){_t("interval","setInterval: "+b)}),Math.abs(b)))}function ft(t,e){var n=0;return e=e||document.body,n=null===(n=document.defaultView.getComputedStyle(e,null))?0:n[t],parseInt(n,10)}function gt(t,e){for(var n=e.length,o=0,i=0,r=et(t),s=Date.now(),a=0;a<n;a++)(o=e[a].getBoundingClientRect()[t]+ft("margin"+r,e[a]))>i&&(i=o);return s=Date.now()-s,ot("Parsed "+n+" HTML elements"),ot("Element position calculated in "+s+"ms"),function(t){t>I/2&&ot("Event throttle increased to "+(I=2*t)+"ms")}(s),i}function vt(t){return[t.bodyOffset(),t.bodyScroll(),t.documentElementOffset(),t.documentElementScroll()]}function bt(t,e){var n=document.querySelectorAll("["+e+"]");return 0===n.length&&(it("No tagged elements ("+e+") found on page"),document.querySelectorAll("body *")),gt(t,n)}function yt(){return document.querySelectorAll("body *")}function wt(t,n,o,i){var r,s;!function(){function t(t,e){return!(Math.abs(t-e)<=j)}return r=e===o?X[p]():o,s=e===i?K[N]():i,t(h,r)||c&&t(M,s)}()&&"init"!==t?!(t in{init:1,interval:1,size:1})&&(p in E||c&&N in E)?Et(n):t in{interval:1}||ot("No change in size detected"):(kt(),Ct(h=r,M=s,t))}function _t(t,e,n,o){T&&t in l?ot("Trigger event cancelled: "+t):(t in{reset:1,resetPage:1,init:1}||ot("Trigger event: "+e),"init"===t?wt(t,e,n,o):Q(t,e,n,o))}function kt(){T||(T=!0,ot("Trigger event lock on")),clearTimeout(O),O=setTimeout((function(){T=!1,ot("Trigger event lock off"),ot("--")}),d)}function St(t){h=X[p](),M=K[N](),Ct(h,M,t)}function Et(t){var e=p;p=m,ot("Reset trigger event: "+t),kt(),St("reset"),p=e}function Ct(t,n,o,i,r){var s;e===r?r=A:ot("Message targetOrigin: "+r),ot("Sending message to host page ("+(s=S+":"+t+":"+n+":"+o+(e===i?"":":"+i))+")"),x.postMessage(k+s,r)}function xt(n){var o={init:function(){g=n.data,x=n.source,rt(),u=!1,setTimeout((function(){f=!1}),d)},reset:function(){f?ot("Page reset ignored by init"):(ot("Page size reset by host page"),St("resetPage"))},resize:function(){_t("resizeParent","Parent window requested size check")},moveToAnchor:function(){v.findTarget(r())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var t=r();ot("PageInfoFromParent called from parent: "+t),P(JSON.parse(t)),ot(" --")},message:function(){var t=r();ot("onMessage called from parent: "+t),L(JSON.parse(t)),ot(" --")}};function i(){return n.data.split("]")[1].split(":")[0]}function r(){return n.data.slice(n.data.indexOf(":")+1)}function s(){return n.data.split(":")[2]in{true:1,false:1}}function a(){var r=i();r in o?o[r]():!t.exports&&"iFrameResize"in window||window.jQuery!==e&&"iFrameResize"in window.jQuery.prototype||s()||it("Unexpected message ("+n.data+")")}k===(""+n.data).slice(0,13)&&(!1===u?a():s()?o.init():ot('Ignored message of type "'+i()+'". Received before initialization.'))}function At(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()}(M);var $={iframeResize:I,iframeResizer:I,contentWindow:M.exports};function N(t){const e=function(t){const e=document.createElement("a");return e.href=t,{protocol:e.protocol,href:e.href,path:e.pathname,search:e.search,hash:e.hash}}(t),n=e.href.substr(0,e.href.length-e.hash.length),o=window.location.href.replace(/#.*$/,"");return e.hash&&n===o}function R(t,e){const n=JSON.stringify(e);let o=0;if(0===n.length)return o;for(let i=0;i<n.length;i++){o=(o<<5)-o+n.charCodeAt(i),o&=o}return`${t}-${o}`}function L(t,e,n,o,i){const r=document.createElement("toujou-modal"),s=document.createElement("iframe"),a=R("iframe",e);if(r.id=t,s.name=a,document.body.appendChild(r),N(n)){const t=document.querySelector(n),e=t instanceof HTMLTemplateElement?document.importNode(t.content,!0).children:t.childNodes;t.title&&(r.title=t.title);for(let n=0;n<e.length;n++)r.appendChild(e[n])}else if(i&&"POST"===o){const t=function(t,e,n){const o=document.createElement("form"),i=document.createElement("input");return o.action=t,o.method="POST",o.target=n,e.forEach((([t,e])=>{i.name=t,i.value=e.toString(),o.appendChild(i.cloneNode())})),o.style.visibility="hidden",o}(n,i,a);r.appendChild(t),r.appendChild(s),t.submit(),t.remove()}else"GET"===o&&(s.src=n,r.appendChild(s));return r}const z=n`
  * {
    box-sizing: border-box;
  }

  :host {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: 100%;
    z-index: var(--toujou-modal-z-index, 15);
    background: var(--toujou-modal-backdrop-color, rgba(0,0,0,.6));
    visibility: hidden;
  }

  :host([allow-outside-scroll]) {
    position: absolute;
    height: 100%;
    min-height: 100vh;
  }

  :host([no-backdrop]) {
    background: transparent;
  }

  :host([visible]) {
    visibility: visible;
  }

  #scroller {
    overflow-y: auto;
    height: 100vh;
  }

  :host([allow-outside-scroll]) #scroller {
    height: 100%;
  }

  #content {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: var(--toujou-modal-container-justify-content, center);
    min-height: var(--toujou-modal-container-min-height, 100%);
    height: var(--toujou-modal-container-height, 100vh);
    width: var(--toujou-modal-container-width, 100vw);
  }

  #modal-content {
    margin: var(--toujou-modal-content-margin, 2rem auto);
    width: var(--toujou-modal-content-width, 100%);
    max-width: var(--toujou-modal-content-max-width, calc(100vw - 1rem));
    background: var(--toujou-modal-content-background, #fff);
    box-shadow: var(--toujou-modal-content-shadow, 0 16px 24px 2px rgba(0,0,0,0.14), 0 6px 30px 5px rgba(0,0,0,0.12), 0 8px 10px -5px rgba(0,0,0,0.4));
    border: var(--toujou-modal-content-border, none);
    border-radius: var(--toujou-modal-content-border-radius, 0px 0px 0px 0px);
    max-height: var(--toujou-modal-content-max-height, 100vh);
    overflow: var(--toujou-modal-content-overflow, auto);
    scroll-behavior: var(--toujou-modal-scroll-behavior, smooth);
  }

  @media only screen and (min-width: 51rem) {
    #modal-content {
      min-width: var(--toujou-modal-content-min-width, 42.5rem);
      max-width: var(--toujou-modal-content-max-width, 50rem);
    }
  }

  #modal-header {
    position: var(--toujou-modal-header-position, relative);
    padding: var(--toujou-modal-header-padding, .5rem);
    background: var(--toujou-modal-header-background, var(--neutral-color--050));
    border-bottom: var(--toujou-modal-header-border-bottom, 1px solid var(--neutral-color--200));
    user-select: none;
    display: var(--toujou-modal-header-display, flex);
    justify-content: var(--toujou-modal-header-justify, space-between);
    width: var(--toujou-modal-header-width, 100%);
    top: var(--toujou-modal-header-top, unset);
    box-shadow: var(--toujou-modal-header-box-shadow, none);
  }

  :host([no-header]) #modal-header {
    padding: 0;
    border-bottom: none;
  }

  #modal-header h3 {
    color: var(--toujou-modal-title-color, var(--secondary-color));
    display: var(--toujou-modal-title-display, flex);
    align-items: center;
    justify-content: var(--toujou-modal-title-align, flex-start);
    font-family: var(--toujou-modal-title-font-family, var(--headline__family));
    font-weight: var(--toujou-modal-title-font-weight, 500);
    font-size: var(--toujou-modal-title-font-size, 1.21875rem);
    line-height: 1.1;
    margin: 0;
    padding: var(--toujou-modal-title-padding, 0 .5rem);
    text-align: left;
    width: 100%;
  }

  #modal-header-close {
    display: var(--toujou-modal-close-display, block);
    position: var(--toujou-modal-close-position, relative);
    font-weight: bold;
    line-height: 1;
    font-family: var(--toujou-modal-close-font-family, var(--headline__family));
    font-size: var(--toujou-modal-close-font-size, 2em);
    padding: var(--toujou-modal-close-padding, .25rem .675rem);
    background: var(--toujou-modal-close-background, var(--primary-color));
    background-size: var(--toujou-modal-close-background-size, contain);
    background-position: var(--toujou-modal-close-background-position, center);
    background-repeat: var(--toujou-modal-close-background-repeat, no-repeat);
    border: var(--toujou-modal-close-border, 1px solid var(--primary-color));
    border-radius: var(--toujou-modal-close-border-radius, 2px);
    color: var(--toujou-modal-close-color, #fff);
    cursor: pointer;
    margin: var(--toujou-modal-close-margin, 0 0 0 1.5rem);
    outline: none;
    text-align: center;
    transition: all .1s ease-in-out;
    user-select: none;
    vertical-align: middle;
    width: auto;
    top: var(--toujou-modal-close-top, 0);
    bottom: var(--toujou-modal-close-bottom, 0);
    left: var(--toujou-modal-close-left, 0);
    right: var(--toujou-modal-close-right, 0);
  }

  #modal-header-close:hover, #modal-header-close:focus {
    background: var(--toujou-modal-close-hover-background, var(--primary-color--dark));
    background-size: var(--toujou-modal-close-hover-background-size, contain);
    background-position: var(--toujou-modal-close-hover-background-position, center);
    background-repeat: var(--toujou-modal-close-hover-background-repeat, no-repeat);
    border: var(--toujou-modal-close-hover-border, 1px solid var(--primary-color--dark));
    color: var(--toujou-modal-close-hover-color, #fff);
  }

  #dog-ear-close {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 2;
    width: 0;
    height: 0;
    border: none;
    border-top: 3rem solid var(--primary-color);
    border-left: 3rem solid transparent;
    padding: 0;
    cursor: pointer;
    outline: none;
    user-select: none;
  }

  #dog-ear-close:before,
  #dog-ear-close:after {
    content: '';
    background: white;
    position: absolute;
    display: block;
    height: 2px;
    width: .75rem;
    right: .375rem;
    top: -2.25rem;
  }

  #dog-ear-close:before {
    transform: rotate(45deg);
  }

  #dog-ear-close:after {
    transform: rotate(-45deg);
  }

  #progress-bar {
    display: none;
    position: absolute;
    bottom: -2px;
    left: 0;
    height: var(--toujou-modal-progressbar-height, 4px);
    width: 100%;
    opacity: 0;
    transition: opacity .3s ease-in-out;
  }

  :host([loading]) #progress-bar {
    display: block;
    opacity: 1;
  }

  #progress-bar:before {
    content: '';
    display: block;
    height: 4px;
    width: 50%;
    background: var(--toujou-modal-progressbar-color, var(--primary-color));
    animation: var(--toujou-modal-progressbar-animation, progress 6s linear infinite);
  }

  @keyframes progress {
    0%   { width: 0; }
    18% { width: 3%; }
    20% { width: 20%; }
    38% { width: 23%; }
    40% { width: 40%; }
    58% { width: 43%; }
    60% { width: 60%; }
    78% { width: 63%; }
    80% { width: 80%; }
    98% { width: 83%; }
    100% { width: 100%; }
  }

  @media only screen and (min-width: 42.5rem) {
    #modal-header h3 {
      font-size: var(--toujou-modal-title-font-size, 1.625rem);
    }
  }

  #modal-content ::slotted(iframe) {
    border: none;
    width: 100%;
  }

`,P={reserveScrollBarGap:!0},D=[];class B extends o{static get is(){return"toujou-modal"}render(){return i`
            <div id="scroller" @click="${this.onClick}" part="scroller">
                <div id="content" part="content">
                    <div id="modal-content" part="modal-content">
                        <div id="modal-header" part="modal-header">
                            ${this.noHeader?i`
                                    <button id="dog-ear-close" dialog-dismiss part="dog-ear-close"></button>`:i`
                                    <h3 part="headline">${this.title}</h3>
                                    <button id="modal-header-close" dialog-dismiss part="modal-header-close">×</button>
                                `}
                            <div id="progress-bar" part="progress-bar"></div>
                        </div>
                        <slot id="slot" @slotchange="${this.onSlotchange}"></slot>
                    </div>
                </div>
            </div>
        `}static get properties(){return{opened:{type:Boolean,reflect:!0},title:{type:String},noHeader:{type:Boolean,attribute:"no-header",reflect:!0},allowOutsideScroll:{type:Boolean,attribute:"allow-outside-scroll",reflect:!0},noBackdrop:{type:Boolean,attribute:"no-backdrop",reflect:!0},loading:{type:Boolean,reflect:!0}}}open(){this.opened=!0}close(){this.opened=!1}constructor(t){super(t),this.opened=!1,this.loading=!1,this.intersectionObserver=new IntersectionObserver((t=>{t[0]&&this.onPosition(t[0])})),this.iframeResizerMap=new Map}disconnectedCallback(){b&&(y.forEach((function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null})),w&&(document.removeEventListener("touchmove",x,f?{passive:!1}:void 0),w=!1),_=-1),b?j():A(),y=[]}toggle(){this.opened=!this.opened}firstUpdated(){this.$={scroller:this.shadowRoot.querySelector("#scroller"),content:this.shadowRoot.querySelector("#content"),modalContent:this.shadowRoot.querySelector("#modal-content"),slot:this.shadowRoot.querySelector("#slot")}}updated(t){t.has("opened")&&(this.opened?this.onOpen():this.onClose(),this.hidden=!this.opened)}onOpen(){var t;this.intersectionObserver.observe(this),this.allowOutsideScroll?document.body.styleposition="relative":T(this.$.scroller,P),t=this,D.forEach((t=>t.close())),D.push(t),setTimeout((()=>{this.setAttribute("visible",""),this.dispatchModalEvent("toujou-modal-opened")}))}onClose(){var t;this.removeAttribute("visible"),function(t){if(t===D[D.length-1]){D.pop();const t=D.pop();t&&t.open()}}(this),this.allowOutsideScroll?document.body.style.position="":(t=this.$.scroller)?(y=y.filter((function(e){return e.targetElement!==t})),b&&(t.ontouchstart=null,t.ontouchmove=null,w&&0===y.length&&(document.removeEventListener("touchmove",x,f?{passive:!1}:void 0),w=!1)),b?j():A()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."),this.intersectionObserver.unobserve(this),this.dispatchModalEvent("toujou-modal-closed")}onLoad(t){this.loading=t}onClick(t){if(!t.composed)return;const e=t.composedPath();e.includes(this.$.modalContent)&&!e.some((t=>t instanceof HTMLElement&&t.hasAttribute("dialog-dismiss")))||this.close()}onPosition(t){const e=Math.max(t.intersectionRect.y,Math.abs(t.boundingClientRect.y));this.$.content.style["min-height"]=`${t.intersectionRect.height}px`,this.$.content.style.top=e?`${e}px`:""}onSlotchange(){const t=this.$.slot.assignedNodes().filter((t=>t instanceof HTMLIFrameElement));this.iframeResizerMap.forEach(((e,n)=>{t.includes(n)||this.iframeResizerMap.delete(n)})),t.forEach((t=>{this.loading=!0,t.addEventListener("load",(()=>{this.iframeResizerMap.has(t)||this.listenToIframeReadyState(t)}))}))}listenToIframeReadyState(t){this.loading=!0,this.iframeResizerMap.set(t,this.createIframeResizer(t)),t.contentWindow.addEventListener("beforeunload",(()=>{this.loading=!0}));try{this.title=t.contentWindow.document.title||this.title}catch(e){this.title=""}this.loading=!1,this.dispatchModalEvent("toujou-modal-loaded")}createIframeResizer(t){let e={};try{e=JSON.parse(t.getAttribute("toujou-iframe"))||{}}catch(n){(console.error||console.log).call(console,n.stack||n)}return e.initCallback=()=>{this.loading=!1},e.closedCallback=()=>{this.close()},$.iframeResizer(e,t)}dispatchModalEvent(t){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0}))}}var H,U,F,W,q;((e,n,o)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o})(B,"symbol"!=typeof(H="styles")?H+"":H,[z]),customElements.define(B.is,B),document.addEventListener("click",(t=>{if(t.metaKey||t.ctrlKey)return;const e=function(t){const e=t.composedPath();for(let n=0;n<e.indexOf(document.body);n++){const t=e[n];if(t.hasAttribute&&t.hasAttribute("target")&&t!==document.body)return t}}(t);if((e instanceof HTMLElement||e instanceof SVGElement)&&!(e instanceof HTMLFormElement)&&"toujou-modal"===e.getAttribute("target")){const n=e.getAttribute("href"),o=-1!==n.indexOf("?")?n.split("?")[0]+"?toujou-ajax-modal=1&"+n.split("?")[1]:-1!==n.indexOf("#")?n.split("#")[0]+"?toujou-ajax-modal=1#"+n.split("#")[1]:n+"?toujou-ajax-modal=1",[i,r]=function(t,e){if(t.hasAttribute("data-modal-post")){const n=t.getAttribute("data-modal-post");e.method="POST",e.body=n;const o=[];return new URL(`http://localhost/?${n}`).searchParams.forEach(((t,e)=>{o.push([e,t])})),[o,e]}return[null,e]}(e,{src:o});!function(t,e,n,o){const i=R("toujou-modal",t),r=document.getElementById(i)||L(i,t,e,n,o);setTimeout((()=>{r.open()}))}(r,o,i?"POST":"GET",i),t.preventDefault(),t.stopPropagation()}})),(q=U||(U={})).PRIMARY="primary",q.SECONDARY="secondary",q.FONT="font",function(t){t.DEFAULT="default",t.BORDER="border",t.GHOST="ghost"}(F||(F={})),function(t){t.TINY="tiny",t.SMALL="small",t.NORMAL="normal",t.LARGE="large"}(W||(W={}));let V=class extends HTMLButtonElement{constructor(){super(),this.defaultButtonVariant=U.PRIMARY,this.defaultButtonType=F.DEFAULT,this.defaultButtonSize=W.NORMAL}connectedCallback(){this._checkRequiredAttributes()}_checkRequiredAttributes(){const t=this.getAttribute("button-variant");t?Object.values(U).includes(t)||(console.warn(`TOUJOU: Invalid button-variant value, falling back to default: "${this.defaultButtonVariant}"`),this.setAttribute("button-variant",this.defaultButtonVariant)):this.setAttribute("button-variant",this.defaultButtonVariant);const e=this.getAttribute("button-size");e?Object.values(W).includes(e)||(console.warn(`TOUJOU: Invalid button-size value, falling back to default: "${this.defaultButtonSize}"`),this.setAttribute("button-size",this.defaultButtonSize)):this.setAttribute("button-size",this.defaultButtonSize);const n=this.getAttribute("button-type");n?Object.values(F).includes(n)||(console.warn(`TOUJOU: Invalid button-type value, falling back to default: "${this.defaultButtonType}"`),this.setAttribute("button-type",this.defaultButtonType)):this.setAttribute("button-type",this.defaultButtonType)}};var G,J,Y;customElements.define("toujou-button",V,{extends:"button"});let X=class extends o{get result(){const t=Math.round(this.duration);return 0===t?`${this.lessThanText} 1 ${this.minutesSingularText}`:1===t?`1 ${this.minutesSingularText}`:`${t} ${this.minutesPluralText}`}render(){return i`
      <slot name="label" class="label"></slot>
      ${this.result}
    `}constructor(){super(),G.add(this),this.wordCount=0,this.duration=0,this.targetSelector="body",this.minutesSingularText="minute",this.minutesPluralText="minutes",this.lessThanText="under",this.readingSpeed=250,J.set(this,(()=>{this.targetEl=document.querySelector(`${this.targetSelector}`),this.targetEl&&(this.wordCount+=s(this,G,"m",Y).call(this,this.targetEl))})),"complete"===document.readyState||"interactive"===document.readyState?setTimeout(s(this,J,"f")):document.addEventListener("DOMContentLoaded",s(this,J,"f"))}updated(t){t.has("wordCount")&&(this.duration=Math.ceil(this.wordCount/this.readingSpeed))}};J=new WeakMap,G=new WeakSet,Y=function(t){const e=t.textContent,n=null==e?void 0:e.replace(/[\n\r]+|[\s]{2,}/g," "),o=null==n?void 0:n.trim(),i=null==o?void 0:o.split(" ");return(null==i?void 0:i.length)||0},r([c({type:Number})],X.prototype,"wordCount",void 0),r([c({type:Number})],X.prototype,"duration",void 0),r([c({type:String,attribute:"target-selector"})],X.prototype,"targetSelector",void 0),r([c({type:String,attribute:"minutes-singular-text"})],X.prototype,"minutesSingularText",void 0),r([c({type:String,attribute:"minutes-plural-text"})],X.prototype,"minutesPluralText",void 0),r([c({type:String,attribute:"less-than-text"})],X.prototype,"lessThanText",void 0),r([c({type:Number,attribute:"reading-speed"})],X.prototype,"readingSpeed",void 0),X=r([a("toujou-estimated-reading-time")],X),console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");const K=globalThis,Q=K.trustedTypes,Z=Q?Q.createPolicy("lit-html",{createHTML:t=>t}):void 0,tt="$lit$",et=`lit$${Math.random().toFixed(9).slice(2)}$`,nt="?"+et,ot=`<${nt}>`,it=document,rt=()=>it.createComment(""),st=t=>null===t||"object"!=typeof t&&"function"!=typeof t,at=Array.isArray,ct="[ \t\n\f\r]",lt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dt=/-->/g,ut=/>/g,ht=RegExp(`>|${ct}(?:([^\\s"'>=/]+)(${ct}*=${ct}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),mt=/'/g,pt=/"/g,ft=/^(?:script|style|textarea|title)$/i,gt=Symbol.for("lit-noChange"),vt=Symbol.for("lit-nothing"),bt=new WeakMap,yt=it.createTreeWalker(it,129);function wt(t,e){if(!at(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Z?Z.createHTML(e):e}let _t=class t{constructor({strings:e,_$litType$:n},o){let i;this.parts=[];let r=0,s=0;const a=e.length-1,c=this.parts,[l,d]=((t,e)=>{const n=t.length-1,o=[];let i,r=2===e?"<svg>":3===e?"<math>":"",s=lt;for(let a=0;a<n;a++){const e=t[a];let n,c,l=-1,d=0;for(;d<e.length&&(s.lastIndex=d,c=s.exec(e),null!==c);)d=s.lastIndex,s===lt?"!--"===c[1]?s=dt:void 0!==c[1]?s=ut:void 0!==c[2]?(ft.test(c[2])&&(i=RegExp("</"+c[2],"g")),s=ht):void 0!==c[3]&&(s=ht):s===ht?">"===c[0]?(s=i??lt,l=-1):void 0===c[1]?l=-2:(l=s.lastIndex-c[2].length,n=c[1],s=void 0===c[3]?ht:'"'===c[3]?pt:mt):s===pt||s===mt?s=ht:s===dt||s===ut?s=lt:(s=ht,i=void 0);const u=s===ht&&t[a+1].startsWith("/>")?" ":"";r+=s===lt?e+ot:l>=0?(o.push(n),e.slice(0,l)+tt+e.slice(l)+et+u):e+et+(-2===l?a:u)}return[wt(t,r+(t[n]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),o]})(e,n);if(this.el=t.createElement(l,o),yt.currentNode=this.el.content,2===n||3===n){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(i=yt.nextNode())&&c.length<a;){if(1===i.nodeType){if(i.hasAttributes())for(const t of i.getAttributeNames())if(t.endsWith(tt)){const e=d[s++],n=i.getAttribute(t).split(et),o=/([.?@])?(.*)/.exec(e);c.push({type:1,index:r,name:o[2],strings:n,ctor:"."===o[1]?xt:"?"===o[1]?At:"@"===o[1]?jt:Ct}),i.removeAttribute(t)}else t.startsWith(et)&&(c.push({type:6,index:r}),i.removeAttribute(t));if(ft.test(i.tagName)){const t=i.textContent.split(et),e=t.length-1;if(e>0){i.textContent=Q?Q.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],rt()),yt.nextNode(),c.push({type:2,index:++r});i.append(t[e],rt())}}}else if(8===i.nodeType)if(i.data===nt)c.push({type:2,index:r});else{let t=-1;for(;-1!==(t=i.data.indexOf(et,t+1));)c.push({type:7,index:r}),t+=et.length-1}r++}}static createElement(t,e){const n=it.createElement("template");return n.innerHTML=t,n}};function kt(t,e,n=t,o){var i,r;if(e===gt)return e;let s=void 0!==o?null==(i=n._$Co)?void 0:i[o]:n._$Cl;const a=st(e)?void 0:e._$litDirective$;return(null==s?void 0:s.constructor)!==a&&(null==(r=null==s?void 0:s._$AO)||r.call(s,!1),void 0===a?s=void 0:(s=new a(t),s._$AT(t,n,o)),void 0!==o?(n._$Co??(n._$Co=[]))[o]=s:n._$Cl=s),void 0!==s&&(e=kt(t,s._$AS(t,e.values),s,o)),e}let St=class{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,o=((null==t?void 0:t.creationScope)??it).importNode(e,!0);yt.currentNode=o;let i=yt.nextNode(),r=0,s=0,a=n[0];for(;void 0!==a;){if(r===a.index){let e;2===a.type?e=new Et(i,i.nextSibling,this,t):1===a.type?e=new a.ctor(i,a.name,a.strings,this,t):6===a.type&&(e=new Tt(i,this,t)),this._$AV.push(e),a=n[++s]}r!==(null==a?void 0:a.index)&&(i=yt.nextNode(),r++)}return yt.currentNode=it,o}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}},Et=class t{get _$AU(){var t;return(null==(t=this._$AM)?void 0:t._$AU)??this._$Cv}constructor(t,e,n,o){this.type=2,this._$AH=vt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=o,this._$Cv=(null==o?void 0:o.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=kt(this,t,e),st(t)?t===vt||null==t||""===t?(this._$AH!==vt&&this._$AR(),this._$AH=vt):t!==this._$AH&&t!==gt&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>at(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==vt&&st(this._$AH)?this._$AA.nextSibling.data=t:this.T(it.createTextNode(t)),this._$AH=t}$(t){var e;const{values:n,_$litType$:o}=t,i="number"==typeof o?this._$AC(t):(void 0===o.el&&(o.el=_t.createElement(wt(o.h,o.h[0]),this.options)),o);if((null==(e=this._$AH)?void 0:e._$AD)===i)this._$AH.p(n);else{const t=new St(i,this),e=t.u(this.options);t.p(n),this.T(e),this._$AH=t}}_$AC(t){let e=bt.get(t.strings);return void 0===e&&bt.set(t.strings,e=new _t(t)),e}k(e){at(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let o,i=0;for(const r of e)i===n.length?n.push(o=new t(this.O(rt()),this.O(rt()),this,this.options)):o=n[i],o._$AI(r),i++;i<n.length&&(this._$AR(o&&o._$AB.nextSibling,i),n.length=i)}_$AR(t=this._$AA.nextSibling,e){var n;for(null==(n=this._$AP)||n.call(this,!1,!0,e);t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cv=t,null==(e=this._$AP)||e.call(this,t))}},Ct=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,o,i){this.type=1,this._$AH=vt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=o,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=vt}_$AI(t,e=this,n,o){const i=this.strings;let r=!1;if(void 0===i)t=kt(this,t,e,0),r=!st(t)||t!==this._$AH&&t!==gt,r&&(this._$AH=t);else{const o=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=kt(this,o[n+s],e,s),a===gt&&(a=this._$AH[s]),r||(r=!st(a)||a!==this._$AH[s]),a===vt?t=vt:t!==vt&&(t+=(a??"")+i[s+1]),this._$AH[s]=a}r&&!o&&this.j(t)}j(t){t===vt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},xt=class extends Ct{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===vt?void 0:t}},At=class extends Ct{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==vt)}},jt=class extends Ct{constructor(t,e,n,o,i){super(t,e,n,o,i),this.type=5}_$AI(t,e=this){if((t=kt(this,t,e,0)??vt)===gt)return;const n=this._$AH,o=t===vt&&n!==vt||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,i=t!==vt&&(n===vt||o);o&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e;"function"==typeof this._$AH?this._$AH.call((null==(e=this.options)?void 0:e.host)??this.element,t):this._$AH.handleEvent(t)}},Tt=class{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){kt(this,t)}};const Ot=K.litHtmlPolyfillSupport;null==Ot||Ot(_t,Et),(K.litHtmlVersions??(K.litHtmlVersions=[])).push("3.3.1");var It,Mt,$t,Nt=n(It||(Mt=[".exit-warning__message {\n    background-color: var(--toujou-exist-warning-message-bg-color, var(--bg-color));\n    overflow: var(--toujou-exist-warning-message-overflow, hidden);\n    padding: var(--toujou-exist-warning-message-padding, var(--spacing-normal) var(--spacing-normal) var(--spacing-l));\n}\n"],$t||($t=Mt.slice(0)),It=Object.freeze(Object.defineProperties(Mt,{raw:{value:Object.freeze($t)}}))));let Rt=class extends o{static get properties(){return{title:{type:String},targetUrl:{type:String},redirectDelay:{type:Number},secondsRemaining:{type:Number},opened:{type:Boolean},_messageTemplate:{type:Object}}}constructor(){super(),this.targetUrl="http://www.dfau.de",this.redirectDelay=50,this.onIntervalTick=this.onIntervalTick.bind(this),this.onModalOpenedChanged=this.onModalOpenedChanged.bind(this),this._secondsRemainingInterval=null,this._messageTemplate=null,this._modal=null,this._modalOpenedObserver=new MutationObserver(this.onModalOpenedChanged)}render(){return i`
      <toujou-modal title="${this.title}" is-exit-warning>
        <div class="exit-warning__message">
          <slot></slot>
        </div>
      </toujou-modal>
    `}connectedCallback(){const t=this.querySelector("template");t&&(this._messageTemplate=new Function("html","targetUrl","secondsRemaining","return html`"+t.innerHTML+"`")),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._modalOpenedObserver.disconnect()}updated(){this._messageTemplate&&((t,e)=>{const n=e;let o=n._$litPart$;if(void 0===o){const t=null;n._$litPart$=o=new Et(e.insertBefore(rt(),t),t,void 0,{})}o._$AI(t)})(this._messageTemplate(i,this.targetUrl,this.secondsRemaining),this)}firstUpdated(){this._modal=this.shadowRoot.querySelector("toujou-modal"),this._modal&&this._modalOpenedObserver.observe(this._modal,{attributeFilter:["opened"]})}onModalOpenedChanged(){this._modal.opened?(this.secondsRemaining=this.redirectDelay,this._secondsRemainingInterval=window.setInterval(this.onIntervalTick,1e3)):(this._secondsRemainingInterval&&window.clearInterval(this._secondsRemainingInterval),this._secondsRemainingInterval=null)}onIntervalTick(){this.secondsRemaining--,this.secondsRemaining<=0&&(window.location.href=this.targetUrl,this.close())}open(){this._modal&&this._modal.open()}close(){this._modal&&this._modal.close()}};function Lt(t){const e=document.querySelector("exit-warning");return!!e&&(window.location.href.match(/toujou-ajax-modal=/)&&window.self!==window.parent?(window.parent.postMessage({action:"toujou-exit-warning",targetUrl:t},window.location.origin),!0):(new URL(t).hostname===window.location.hostname?window.location.href=t:(e.targetUrl=t,e.open()),!0))}Rt.styles=[Nt],Rt=r([a("exit-warning")],Rt),document.addEventListener("click",(function(t){if(t.metaKey||t.ctrlKey)return;const e=function(t){const e=t.composedPath();for(let n=0;n<e.indexOf(document.body);n++){const t=e[n];if(t.hasAttribute&&t.hasAttribute("target")&&t!==document.body)return t}}(t);e instanceof HTMLElement&&!(e instanceof HTMLFormElement)&&"toujou-exit-warning"===e.getAttribute("target")&&Lt(e.getAttribute("href"))&&(t.preventDefault(),t.stopPropagation())})),window.addEventListener("message",(function(t){t.origin===window.location.origin&&void 0!==t.data.action&&"toujou-exit-warning"===t.data.action&&t.data.targetUrl&&Lt(t.data.targetUrl)}));let zt=class extends o{static get is(){return"toujou-lazy-render"}get templates(){return this.shadowRoot.querySelector("#slot").assignedNodes({flatten:!0}).filter((t=>"TEMPLATE"===t.tagName))}render(){return i`
      <slot id="slot"></slot>`}connectedCallback(){super.connectedCallback(),this.intersectionObserver=new IntersectionObserver((t=>{t.some((t=>t.isIntersecting))&&(this.renderTemplates(),this.intersectionObserver.disconnect())})),this.intersectionObserver.observe(this)}disconnectedCallback(){this.intersectionObserver&&this.intersectionObserver.disconnect(),super.disconnectedCallback()}renderTemplates(){this.templates.forEach((t=>{const e=document.importNode(t.content,!0);t.parentNode.insertBefore(e,t)}))}};customElements.define(zt.is,zt);var Pt,Dt,Bt,Ht=n(Pt||(Dt=[":host {\n    background-color: var(--toujou-snackbar-bg-color, #2c2c2c);\n    border: var(--toujou-snackbar-border, 1px solid var(--bg-color));\n    display: var(--toujou-snackbar-display, flex);\n    width: var(--toujou-snackbar-width, calc(100% - 2rem));\n    max-width: var(--toujou-snackbar-max-width, 640px);\n    position: var(--toujou-snackbar-position, fixed);\n    bottom: var(--toujou-snackbar-bottom, 1rem);\n    left: var(--toujou-snackbar-left, 1rem);\n    padding: var(--toujou-snackbar-padding, 1rem);\n    border-radius: var(--toujou-snackbar-border-radius, .25rem);\n    z-index: var(--toujou-snackbar-z-index, 100);\n    -webkit-transform: var(--toujou-snackbar-transform, translateY(calc(100% + 1rem)));\n            transform: var(--toujou-snackbar-transform, translateY(calc(100% + 1rem)));\n    opacity: var(--toujou-snackbar-opacity, 0);\n    -webkit-transition: var(--toujou-snackbar-transition, all .25s ease-out);\n    transition: var(--toujou-snackbar-transition, all .25s ease-out);\n}\n\n:host([visible]) {\n    -webkit-transform: var(--toujou-snackbar-visible-transform, translateY(0));\n            transform: var(--toujou-snackbar-visible-transform, translateY(0));\n    opacity: var(--toujou-snackbar-visible-opacity, 1);\n}\n\n:host(:focus-visible) {\n    outline: var(--toujou-snackbar-focus-outline);\n    outline-offset: var(--toujou-snackbar-focus-outline-offset);\n}\n\n.snackbar__message {\n    -webkit-box-flex: var(--toujou-snackbar-message-grow, 1);\n        -ms-flex-positive: var(--toujou-snackbar-message-grow, 1);\n            flex-grow: var(--toujou-snackbar-message-grow, 1);\n    color: var(--toujou-snackbar-message-color, white);\n    margin: var(--toujou-snackbar-message-margin, 0);\n    padding: var(--toujou-snackbar-message-padding, 0 1rem 0 0);\n}\n\n.snackbar__button {\n    border: var(--toujou-snackbar-button-border, none);\n    background: var(--toujou-snackbar-button-bg, none);\n    font-size: var(--toujou-snackbar-button-font-size, .875rem);\n    font-family: var(--toujou-snackbar-button-font-family, var(--paragraph__family));\n    text-transform: var(--toujou-snackbar-button--text-transform, uppercase);\n    color: var(--toujou-snackbar-button-color, var(--primary-color));\n    margin: var(--toujou-snackbar-button-margin, 0);\n    outline: var(--toujou-snackbar-button-outline, none);\n}\n\n.snackbar__button:hover {\n    cursor: var(--toujou-snackbar-button-hover-cursor, pointer);\n    opacity: var(--toujou-snackbar-button-hover-opacity, .75);\n}\n\n:host([snackbartype='auto']) .snackbar__button {\n    display: none;\n}\n\n/* VARIANT SUCCESS */\n\n:host([success]) {\n    border: var(--toujou-snackbar-success-border, 1px solid var(--success-color));\n}\n\n:host([success]) .snackbar__message {\n    color: var(--toujou-snackbar-success-message-color, var(--success-color));\n}\n\n:host([success]) .snackbar__button {\n    color: var(--toujou-snackbar-success-button-color, white);\n}\n\n/* VARIANT WARNING */\n\n:host([warning]) {\n    border: var(--toujou-snackbar-warning-border, 1px solid var(--warning-color));\n}\n\n:host([warning]) .snackbar__message {\n    color: var(--toujou-snackbar-warning-message-color, var(--warning-color));\n}\n\n:host([warning]) .snackbar__button {\n    color: var(--toujou-snackbar-warning-button-color, white);\n}\n\n/* VARIANT ERROR */\n\n:host([error]) {\n    border: var(--toujou-snackbar-error-border, 1px solid var(--error-color));\n}\n\n:host([error]) .snackbar__message {\n    color: var(--toujou-snackbar-error-message-color, var(--error-color));\n}\n\n:host([error]) .snackbar__button {\n    color: var(--toujou-snackbar-error-button-color, white);\n}\n\n/* VARIANT INFO */\n\n:host([info]) {\n    border: var(--toujou-snackbar-info-border, 1px solid #81d4fa);\n}\n\n:host([info]) .snackbar__message {\n    color: var(--toujou-snackbar-info-message-color, #81d4fa);\n}\n\n:host([info]) .snackbar__button {\n    color: var(--toujou-snackbar-info-button-color, white);\n}\n"],Bt||(Bt=Dt.slice(0)),Pt=Object.freeze(Object.defineProperties(Dt,{raw:{value:Object.freeze(Bt)}}))));let Ut=class extends o{static get is(){return"toujou-snackbar"}render(){return i`
      <p class="snackbar__message">${this.message}</p>
      <button
        class="snackbar__button"
        @click="${this._handleButtonClick}"
        aria-label="${this.buttonAriaLabel}"
      >${this.buttonText}</button>
    `}static get styles(){return[Ht]}static get properties(){return{showing:{type:Boolean},cue:{type:Array},message:{type:String},buttonText:{type:String},snackbarType:{type:String},buttonAriaLabel:{type:String,attribute:"button-aria-label"}}}set showing(t){t?(this.setAttribute("visible",""),this.setAttribute("tabindex","0"),this.focus()):(this.removeAttribute("visible"),this.setAttribute("tabindex","-1"),this.blur())}set snackbarType(t){this.setAttribute("snackbarType",t)}set variant(t){this.setAttribute(t,"")}constructor(){super(),this.keyCodes={escape:27,enter:13},this.cue=[],this._animationStart=null,this._possibleVariants=["success","warning","error","info"],this.buttonAriaLabel="Close the snackbar",window.addEventListener("toujou-add-snackbar",(()=>{this._removeHiddenState()}),{once:!0}),window.addEventListener("toujou-add-snackbar",(t=>{this._handleAddSnackbar(t)}))}connectedCallback(){super.connectedCallback(),this.showing=!1,this._timer=this._timer.bind(this),this.addEventListener("keydown",this._handleKeyDown.bind(this))}updated(t){t.has("cue")&&this.cue.length>0?this._showSnackbar():t.has("cue")&&this.cue.length>1&&"auto"===this.cue[0].type?this._checkAutoReplacement():t.has("cue")&&0===this.cue.length&&this._resetVisibleValues()}_handleAddSnackbar(t){this.cue=[...this.cue,t.detail]}_checkAutoReplacement(){this.cue.length>1&&"auto"===this.cue[0].type&&(this._wasReplaced=!0)}_handleButtonClick(){this._hideSnackbar()}_hideSnackbar(){this.showing=!1,this.addEventListener("transitionend",this._afterHide)}_afterHide(){this._removeSnackbarFromCue(),this._removeSnackbarVariantAttribute(),this.removeEventListener("transitionend",this._afterHide)}_removeSnackbarFromCue(){this.cue=this.cue.slice(1)}_removeSnackbarVariantAttribute(){this._possibleVariants.forEach((t=>{this.hasAttribute(t)&&this.removeAttribute(t)}))}_resetVisibleValues(){this.message=null,this.buttonText=null}_showSnackbar(){setTimeout((()=>{this._setSnackbarValues(this.cue[0]),"auto"===this.cue[0].type&&(this._animationStart=Date.now(),this._timer()),this.showing=!0,this.snackbarType=this.cue[0].type}))}_removeHiddenState(){this.removeAttribute("hidden")}_timer(){const t=Date.now();if(this._wasReplaced)return this._removeSnackbarFromCue(),this._wasReplaced=!1,void cancelAnimationFrame(this._animationRequest);t-this._animationStart>=this._duration?(this._hideSnackbar(),cancelAnimationFrame(this._animationRequest)):this._animationRequest=requestAnimationFrame(this._timer)}_setSnackbarValues(t){t.message&&(this.message=t.message),t.variant&&this._possibleVariants.includes(t.variant)&&(this.variant=t.variant),this.buttonText=t.buttonText||"OK",this._duration=t.duration||2500}_handleKeyDown(t){"auto"!==this.getAttribute("snackbartype")&&("Escape"!==t.key&&t.keyCode!==this.keyCodes.escape&&"Enter"!==t.key&&t.keyCode!==this.keyCodes.enter||(this._hideSnackbar(),this._afterHide()))}};customElements.define(Ut.is,Ut);var Ft,Wt,qt,Vt=n(Ft||(Wt=["* {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n}\n\n:host {\n    --toujou-spinner-size: 5rem;\n    --toujou-spinner-thickness: 4;\n    --toujou-spinner-start-color: var(--primary-color--light);\n    --toujou-spinner-end-color: var(--primary-color--dark);\n    --toujou-spinner-animation-duration: 2s;\n    --toujou-spinner-dash-animation-duration: 1.4s;\n    --toujou-spinner-display: inline-flex;\n\n    width: var(--toujou-spinner-size);\n    height: var(--toujou-spinner-size);\n    position: relative;\n    display: var(--toujou-spinner-display);\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n\n:host([centered-on-page]) {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    z-index: 100;\n}\n\n.toujou-spinner__spinner::before {\n    content: '';\n    display: block;\n    padding-top: 100%;\n}\n\n.toujou-spinner__svg {\n    -webkit-animation: rotationAnimation var(--toujou-spinner-animation-duration) linear infinite;\n            animation: rotationAnimation var(--toujou-spinner-animation-duration) linear infinite;\n    height: 100%;\n    -webkit-transform-origin: center center;\n            transform-origin: center center;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto;\n}\n\n.toujou-spinner__circle {\n    stroke-dasharray: 1, 200;\n    stroke-dashoffset: 0;\n    -webkit-animation: dashAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite,\n               colorAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite;\n            animation: dashAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite,\n               colorAnimation var(--toujou-spinner-dash-animation-duration) ease-in-out infinite;\n    stroke-linecap: round;\n    stroke-width: var(--toujou-spinner-thickness);\n    fill: none;\n}\n\n@-webkit-keyframes rotationAnimation {\n    100% {\n        -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n    }\n}\n\n@keyframes rotationAnimation {\n    100% {\n        -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n    }\n}\n\n@-webkit-keyframes dashAnimation {\n    0% {\n        stroke-dasharray: 1, 200;\n        stroke-dashoffset: 0;\n    }\n    50% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -35px;\n    }\n    100% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -124px;\n    }\n}\n\n@keyframes dashAnimation {\n    0% {\n        stroke-dasharray: 1, 200;\n        stroke-dashoffset: 0;\n    }\n    50% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -35px;\n    }\n    100% {\n        stroke-dasharray: 89, 200;\n        stroke-dashoffset: -124px;\n    }\n}\n\n@-webkit-keyframes colorAnimation {\n    0%, 20% {\n        stroke: var(--toujou-spinner-start-color);\n    }\n    80%, 100% {\n        stroke: var(--toujou-spinner-end-color);\n    }\n}\n\n@keyframes colorAnimation {\n    0%, 20% {\n        stroke: var(--toujou-spinner-start-color);\n    }\n    80%, 100% {\n        stroke: var(--toujou-spinner-end-color);\n    }\n}\n"],qt||(qt=Wt.slice(0)),Ft=Object.freeze(Object.defineProperties(Wt,{raw:{value:Object.freeze(qt)}}))));class Gt extends o{static get is(){return"toujou-spinner"}static get styles(){return Vt}render(){return i`
      <svg class="toujou-spinner__svg" viewBox="25 25 50 50">
        <circle class="toujou-spinner__circle" cx="50" cy="50" r="20" stroke-miterlimit="10"/>
      </svg>
    `}}customElements.define(Gt.is,Gt);var Jt,Yt,Xt,Kt=n(Jt||(Yt=[" .open-button {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n  }\n\n  :host([open]) .open-button {\n    display: none;\n  }\n\n  .close-button {\n    display: none;\n  }\n\n  :host([open]) .close-button {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n  }\n"],Xt||(Xt=Yt.slice(0)),Jt=Object.freeze(Object.defineProperties(Yt,{raw:{value:Object.freeze(Xt)}}))));let Qt=class extends o{constructor(){super(...arguments),this.isOpen=!1,this.isOpenParentAttribute="media-info-child-is-open",this._handleClick=t=>{t.preventDefault(),t.stopPropagation()},this.handleToggleClick=()=>{this.isOpen=!this.isOpen}}render(){return i`
            <slot name="open-button" class="open-button"  @click="${this.handleToggleClick}"></slot>
            <slot name="close-button" class="close-button" @click="${this.handleToggleClick}"></slot>
            <slot name="figcaption"></slot>
            <slot name="copyright"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this._handleClick)}updated(t){var e,n;t.has("isOpen")&&(this.isOpen?null===(e=this.parentElement)||void 0===e||e.setAttribute(this.isOpenParentAttribute,""):null===(n=this.parentElement)||void 0===n||n.removeAttribute(this.isOpenParentAttribute))}};function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){oe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ee(t,e,n,o,i,r,s){try{var a=t[r](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(o,i)}function ne(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function s(t){ee(r,o,i,s,a,"next",t)}function a(t){ee(r,o,i,s,a,"throw",t)}s(void 0)}))}}function oe(t,e,n){return(e="symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e,"string"))?o:String(o))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t;var o}function ie(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}Qt.styles=[Kt],r([c({type:Boolean,reflect:!0,attribute:"open"})],Qt.prototype,"isOpen",void 0),Qt=r([a("toujou-media-info")],Qt);var re,se,ae=n(re||(re=ie([":host {\n    display: var(--toujou-consent-display, block);\n}"])));class ce extends o{static get is(){return"toujou-consent"}render(){return i`
      <slot id="content"></slot>
    `}static get styles(){return ae}static get properties(){return{consentState:{type:Boolean},listenTo:{type:String},listenOn:{type:String}}}set consentState(t){"checkbox"===this.consentInputType&&(this.querySelector(".consent__checkbox").checked=t)}set listenTo(t){t.split(/\s+/).forEach((t=>{this.addEventListener(t,this._handleEvent)}))}constructor(){super(),this._handleEvent=this._handleEvent.bind(this),this.listenOn="*",this._consentType=this.getAttribute("consenttype"),this._getConsentInputType(),this.consentState=null}connectedCallback(){super.connectedCallback()}_handleEvent(t){"click"===t.type?this._dispatchClickEvent():"change"===t.type&&this._dispatchChangeEvent()}firstUpdated(){this._dispatchReadyEvent()}_dispatchChangeEvent(){const t=new CustomEvent("toujou-consent-checkbox-changed",{bubbles:!0,composed:!0,detail:{consentElement:this}});this.dispatchEvent(t)}_dispatchClickEvent(){const t=new CustomEvent("toujou-consent-button-clicked",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_dispatchReadyEvent(){const t=new CustomEvent("toujou-consent-connected",{bubbles:!0,composed:!0,detail:{consentType:this._consentType}});this.dispatchEvent(t)}_getConsentInputType(){const t=this.querySelectorAll(".consent__checkbox"),e=this.querySelectorAll(".consent__button");t.length>0?this.consentInputType="checkbox":e.length>0&&(this.consentInputType="button")}}customElements.define(ce.is,ce);var le=n(se||(se=ie([":host {\n    display: var(--toujou-consent-widget-display, block);\n}\n\n"])));const de="CHECK_CONSENT_EXPIRY",ue="SAVE_ALL_CONSENTS",he="SAVE_SINGLE_CONSENT",me="DISMISS_CONSENT_BOX",pe="UNDISMISS_CONSENT_BOX",fe={consents:{consentBoxDismissed:!1}};let ge=!1;function ve(t=fe,e){const n=function(t,e){var n,o,i,r;switch(e.type){case de:{const e=Date.now(),s={...t.consents};for(const t in s)"consentBoxDismissed"!==t&&(null!==(o=null===(n=s[t])||void 0===n?void 0:n.consentLifetime)&&void 0!==o?o:0)>0&&(null!==(r=null===(i=s[t])||void 0===i?void 0:i.consentExpirationDate)&&void 0!==r?r:0)<=e&&(delete s[t],s.consentBoxDismissed=!1);return{...t,consents:s}}case"CLEAR_CONSENT_TYPE_DATA":{const n={...t.consents};return delete n[e.payload],{...t,consents:n}}case ue:{const n={...t.consents,...e.payload};return{...t,consents:n}}case he:{const n={...t.consents};return n[e.payload.consentType]={...e.payload.consentData},{...t,consents:n}}case me:{const e={...t.consents};return e.consentBoxDismissed=!0,{...t,consents:e}}case pe:{const e={...t.consents};return e.consentBoxDismissed=!1,{...t,consents:e}}}return t}(t,e);return"object"==typeof window.dataLayer&&(!ge||void 0!==n.consents.consentBoxDismissed&&n.consents.consentBoxDismissed)&&(window.dataLayer.push({event:"consent-changed",...n.consents}),ge=!0),n}const be={setItem(t,e){document.cookie=`${t}=${e};path=/;`},getItem(t){const e=`${t}=`,n=document.cookie.split(";");for(let o=0,i=n.length;o<i;o++){let t=n[o];for(;" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(e))return t.substring(e.length,t.length)}return null}},ye=(t,e,n)=>{try{const o=JSON.stringify(t);return void e.setItem(n,o)}catch(o){console.error(`There was an error while saving the consents data to storage: Error: ${o}`)}},we=(t,e)=>{try{const n=t.getItem(e);return null===n?{}:JSON.parse(n)}catch(n){return console.error(`There was a problem loading the consents data from storage. Error: ${n}`),{}}},_e=t=>{const e={},n={};for(const o in t)"consentBoxDismissed"===o?n[o]=t[o]:0===t[o].consentLifetime?e[o]=t[o]:t[o].consentLifetime>0&&(n[o]=t[o]);ye({consents:e},be,"consentsState"),ye({consents:n},localStorage,"consentsState")},ke=function(t={},e=[]){const n=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}):l)(...e),o=d(ve,t,n);return o.dispatch({type:de}),o}((()=>{const t=we(be,"consentsState"),e=we(localStorage,"consentsState");return{consents:{...t.consents,...e.consents}}})(),[u((({getState:t})=>e=>n=>{const o=e(n),i=t();for(const t in i){if("consents"!==t)return void console.error('Unknown data "key" found while saving to session / local Storage');_e(i.consents)}return o}))]),Se=["tracking","html","maps","video","ads"];class Ee{constructor(t){this.isRendered=!1,this.templateElement=t}renderInto(t){this.isRendered||(t.insertNode(this.getContent(t)),this.isRendered=!0)}getContent(t){if(!this.isCommentedTemplate(this.templateElement))return document.importNode(this.templateElement.content,!0);const e=this.uncommentTemplate(this.templateElement);return t.createContextualFragment(e)}isCommentedTemplate(t){const e=t.innerHTML.trim();return e.startsWith("\x3c!--")&&e.endsWith("--\x3e")}uncommentTemplate(t){const e=t.innerHTML.trim();return e.substring(4,e.length-3).trim()}}class Ce{constructor(t,e=Ee,n="template[data-toujou-third-party-content]"){(this.host=t).addController(this),this.selector=n,this.templateRenderer=e}hostConnected(){}hostDisconnected(){}onConsentsChanged(t){for(const[e,n]of Object.entries(t))"object"==typeof n&&n.consentGiven&&document.querySelectorAll(this.selector+'[data-content-type="'+e+'"]').forEach((t=>{const e=document.createRange();e.setStartAfter(t),e.collapse(!0),new this.templateRenderer(t).renderInto(e),t.remove()}))}}class xe extends o{static get is(){return"toujou-consent-widget"}render(){return i`
      <slot name="consentWidgetHeader"></slot>
      <slot id="consentElements"></slot>
      <slot name="consentWarning" id="consentWarning"></slot>
    `}static get styles(){return le}set _warningVisible(t){this.setAttribute("warningvisible",t)}static get properties(){return{inPage:{type:Boolean},listenTo:{type:String},listenOn:{type:String},_warningVisible:{type:Boolean},deactivated:{type:Boolean}}}set listenTo(t){t.split(/\s+/).forEach((t=>{this.addEventListener(t,this._handleEvent)}))}set _dismissedBox(t){this.inPage||(t?this.setAttribute("hidden",""):this.removeAttribute("hidden")),this._warningVisible=this.inPage&&!t}constructor(){var t;super(),this.inPage=!1,this.deactivated=!1,this.consentTypeNames=Se,this.listenOn="*",this.templateController=new Ce(this),this.onStateChange=this.onStateChange.bind(this),this._handleEvent=this._handleEvent.bind(this),this.store=ke,this.store.subscribe(this.onStateChange),this._state=this.store.getState(),this._warningVisible=this.inPage,this.templateController.onConsentsChanged(null!==(t=this._state.consents)&&void 0!==t?t:{}),"#aaa"===window.location.hash&&(this.deactivated=!0),this.addEventListener("toujou-consent-connected",this._handleConsentConnected),this.addEventListener("toujou-consent-checkbox-changed",this._handleConsentCheckboxChanged)}connectedCallback(){super.connectedCallback(),this._dismissedBox=!!this._state.consents&&this._state.consents.consentBoxDismissed,this.deactivated?setTimeout((()=>{this._prepareToSaveConsents(),this._dismissConsentBox(),this._dispatchConsentDeactivated()})):setTimeout((()=>{const t=this.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length>0&&t[0].focus()}))}firstUpdated(){this.consentTypeNames.forEach((t=>{const e=this.querySelector(`toujou-consent[consenttype="${t}"]`);this._state.consents.consentBoxDismissed&&!this._state.consents[t]&&e&&this._undismissConsentBox()}))}onStateChange(){var t;this._state=this.store.getState(),this._dismissedBox=this._state.consents.consentBoxDismissed,this.templateController.onConsentsChanged(null!==(t=this._state.consents)&&void 0!==t?t:{}),this._updateAllConsentElementsStates()}_handleEvent(t){t.stopPropagation(),"click"===t.type&&!this.inPage&&t.target.matches(this.listenOn)&&this._handleConsentBoxSaveButtonClick(t.target)}_handleConsentCheckboxChanged(t){this.inPage&&!0===this._state.consents.consentBoxDismissed&&(this._prepareToSaveConsents(),this._dispatchAddSnackbar(t.target.getAttribute("snackbarmessage")))}_handleConsentBoxSaveButtonClick(t){t.hasAttribute("accept-all")?this._prepareToSaveConsents(!0):t.hasAttribute("deny-all")?this._prepareToSaveConsents(!1):this._prepareToSaveConsents(null),this._dismissConsentBox()}_prepareToSaveConsents(t=null){const e=this._getAllConsents(t);this._saveAllConsents(e)}_getAllConsents(t=null){const e={},n=this.querySelectorAll("toujou-consent");return n&&n.forEach((n=>{const o=n.getAttribute("consenttype");e[o]=this._createNewConsentData(n,t)})),e}_createNewConsentData(t,e=null){const n=t.querySelector(".consent__checkbox");null!==e&&(n.checked=e);const o=this._createConsentLifeInMillis(t.getAttribute("consenttype"),t.getAttribute("consentlifetime")),i=n.checked,r=Date.now();return{consentGiven:i,consentCreationDate:r,consentExpirationDate:r+o,consentLifetime:o}}_createConsentLifeInMillis(t,e){return"tracking"===t?"0"===e?63072e6:0:24*e*60*60*1e3}_dismissConsentBox(){this.store.dispatch({type:me}),this._dispatchConsentWidgetDismissedEvent()}_undismissConsentBox(){this.store.dispatch({type:pe})}_saveAllConsents(t){this.store.dispatch((t=>({type:ue,payload:t}))(t))}_handleConsentConnected(t){this._setConsentElementState(t.target)}_setConsentElementState(t){if("TOUJOU-CONSENT"===t.tagName){const e=t.getAttribute("consenttype"),n="1"===t.getAttribute("prechecked");t.consentState=this._getConsentTypeState(this._state,e,n)}}_updateAllConsentElementsStates(){this.querySelectorAll("toujou-consent").forEach((t=>{this._setConsentElementState(t)}))}_getConsentTypeState(t,e,n){var o;let i=null;return null!==(o=null==t?void 0:t.consents[e])&&void 0!==o&&o&&(i=t.consents[e]),i?i.consentGiven:n}_dispatchAddSnackbar(t){const e=new CustomEvent("toujou-add-snackbar",{bubbles:!0,composed:!0,detail:{message:t,type:"auto",duration:2500,variant:"success"}});this.dispatchEvent(e)}_dispatchConsentWidgetDismissedEvent(){const t=new CustomEvent("toujou-consent-widget-dismissed",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_dispatchConsentDeactivated(){const t=new CustomEvent("toujou-consent-widget-deactivated",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}customElements.define(xe.is,xe);var Ae,je=decodeURIComponent,Te=/; */;function Oe(t,e){try{return"boolean"==typeof e?decodeURIComponent(t):e(t)}catch(n){return t}}!function(t){t.strict="strict",t.lax="lax",t.none="none"}(Ae||(Ae={}));class Ie extends Event{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{changed:[],deleted:[]};super(t,e),this.changed=e.changed||[],this.deleted=e.deleted||[]}}class Me extends EventTarget{constructor(){throw super(),new TypeError("Illegal Constructor")}get[Symbol.toStringTag](){return"CookieStore"}get(t){var e=this;return ne((function*(){if(null==t)throw new TypeError("CookieStoreGetOptions must not be empty");if(t instanceof Object&&!Object.keys(t).length)throw new TypeError("CookieStoreGetOptions must not be empty");return(yield e.getAll(t))[0]}))()}set(t,e){var n=this;return ne((function*(){var o,i,r,s={name:"",value:"",path:"/",secure:!1,sameSite:Ae.strict,expires:null,domain:null};if("string"==typeof t)s.name=t,s.value=e;else{if(Object.assign(s,t),s.path&&!s.path.startsWith("/"))throw new TypeError('Cookie path must start with "/"');if(null===(o=s.domain)||void 0===o?void 0:o.startsWith("."))throw new TypeError('Cookie domain cannot start with "."');if(s.domain&&s.domain!==window.location.hostname)throw new TypeError("Cookie domain must domain-match current host");if((null===(i=s.name)||void 0===i?void 0:i.startsWith("__Host"))&&s.domain)throw new TypeError("Cookie domain must not be specified for host cookies");if((null===(r=s.name)||void 0===r?void 0:r.startsWith("__Host"))&&"/"!=s.path)throw new TypeError("Cookie path must not be specified for host cookies");s.path&&s.path.endsWith("/")&&(s.path=s.path.slice(0,-1)),""===s.path&&(s.path="/")}if(""===s.name&&s.value&&s.value.includes("="))throw new TypeError("Cookie value cannot contain '=' if the name is empty");s.name&&s.name.startsWith("__Host")&&(s.secure=!0);var a="".concat(s.name,"=").concat(encodeURIComponent(s.value));switch(s.domain&&(a+="; Domain="+s.domain),s.path&&(a+="; Path="+s.path),"number"==typeof s.expires?a+="; Expires="+new Date(s.expires).toUTCString():s.expires instanceof Date&&(a+="; Expires="+s.expires.toUTCString()),(s.name&&s.name.startsWith("__Secure")||s.secure)&&(s.sameSite=Ae.lax,a+="; Secure"),s.sameSite){case Ae.lax:a+="; SameSite=Lax";break;case Ae.strict:a+="; SameSite=Strict";break;case Ae.none:a+="; SameSite=None"}var c=n.get(s);if(document.cookie=a,n.onchange){var l=[],d=[];c&&!(yield n.get(s))?d.push(te(te({},s),{},{value:void 0})):l.push(s);var u=new Ie("change",{changed:l,deleted:d});n.onchange(u)}}))()}getAll(t){return ne((function*(){var e,n,o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var n=[],o=e||{},i=t.split(Te),r=o.decode||je,s=0;s<i.length;s++){var a=i[s],c=a.indexOf("=");if(!(c<0)){var l=a.substr(0,c).trim(),d=a.substr(++c,a.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==n[l]&&n.push({name:l,value:Oe(d,r)})}}return n}(document.cookie);if(null==t||0===Object.keys(t).length)return o;if("string"==typeof t?e=t:(e=t.name,n=t.url),n){var i=new URL(n,window.location.origin);if(window.location.href!==i.href||window.location.origin!==i.origin)throw new TypeError("URL must match the document URL");return o.slice(0,1)}return o.filter((t=>t.name===e))}))()}delete(t){var e=this;return ne((function*(){var n={name:"",value:"",path:"/",secure:!1,sameSite:Ae.strict,expires:null,domain:null};"string"==typeof t?n.name=t:Object.assign(n,t),n.expires=0,yield e.set(n)}))()}}var $e=new WeakMap,Ne=new WeakMap;class Re{get[Symbol.toStringTag](){return"CookieStoreManager"}constructor(){throw new TypeError("Illegal Constructor")}subscribe(t){var e=this;return ne((function*(){var n=$e.get(e)||[],o=Ne.get(e);if(!o)throw new TypeError("Illegal invocation");var i=function*(){var t=r.name,e=new URL(r.url||"",o.scope).toString();if(n.some((n=>n.name===t&&n.url===e)))return"continue";n.push({name:r.name,url:e})};for(var r of t)yield*i();$e.set(e,n)}))()}getSubscriptions(){var t=this;return ne((function*(){return($e.get(t)||[]).map((t=>{var{name:e,url:n}=t;return{name:e,url:n}}))}))()}unsubscribe(t){var e=this;return ne((function*(){var n=$e.get(e)||[],o=Ne.get(e);if(!o)throw new TypeError("Illegal invocation");var i=function*(){var t=r.name,e=new URL(r.url||"",o.scope).toString();n=n.filter((n=>n.name!==t||n.url!==e))};for(var r of t)yield*i();$e.set(e,n)}))()}}"undefined"==typeof ServiceWorkerRegistration||"cookies"in ServiceWorkerRegistration.prototype||Object.defineProperty(ServiceWorkerRegistration.prototype,"cookies",{configurable:!0,enumerable:!0,get(){var t=Object.create(Re.prototype);return Ne.set(t,this),Object.defineProperty(this,"cookies",{value:t}),t}});var Le,ze=Object.create(Me.prototype);window.dataLayer=window.dataLayer||[];class Pe extends HTMLElement{get analyticsid(){return this.getAttribute("analyticsid")}constructor(){super(),this.hidden=!0,this.style.display="contents",this.onStateChange=this.onStateChange.bind(this),this.store=ke}connectedCallback(){this._storeUnsubscribe=this.store.subscribe(this.onStateChange),this.onStateChange()}disconnectedCallback(){this._storeUnsubscribe&&this._storeUnsubscribe()}onStateChange(){const t=this.store.getState().consents.tracking||null;JSON.stringify(t)!==JSON.stringify(this.consentState)&&(this.consentState=t,this._handleConsentState(this.consentState))}_handleConsentState(t){"object"==typeof t&&null!==t&&t.consentGiven?this._instantiateGoogleAnalytics(t):this._disableGoogleAnalytics()}_instantiateGoogleAnalytics(t){if(this.gaIsInstantiated)return;const e=this.analyticsid;window[`ga-disable-${e}`]=!1;const n={cookie_expires:t.consentExpirationDate,anonymize_ip:!0};function o(...t){window.dataLayer.push(t)}window.gtag=o,this._ga||(this._ga=this._addAnalyticsScriptTag(e),o("js",new Date)),o("config",e,n),this.gaIsInstantiated=!0,this._dispatchGtagLoadedEvent()}_addAnalyticsScriptTag(t){const e=`https://www.googletagmanager.com/gtag/js?id=${t}`,n=document.createElement("script"),o=document.getElementsByTagName("script")[0];return n.async=!0,n.src=e,o.parentNode.insertBefore(n,o),!0}_disableGoogleAnalytics(){["_ga","_gid","_gat"].forEach((t=>{ze.delete(t)})),window[`ga-disable-${this.analyticsid}`]=!0,this.gaIsInstantiated=!1}_dispatchGtagLoadedEvent(){const t=new CustomEvent("toujou-gtag-loaded",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}customElements.define("toujou-tracking-google-analytics",Pe),window._paq=window._paq||[];class De extends HTMLElement{get url(){return this.getAttribute("url").replace(/^\/\//,`${window.location.protocol}//`)}get siteid(){return this.getAttribute("siteid")}constructor(){super(),this.hidden=!0,this.style.display="contents",this.onStateChange=this.onStateChange.bind(this),this.store=ke}connectedCallback(){this._instantiateMatomo(),this._storeUnsubscribe=this.store.subscribe(this.onStateChange),this.onStateChange()}disconnectedCallback(){this._storeUnsubscribe&&this._storeUnsubscribe()}onStateChange(){const t=this.store.getState().consents.tracking||null;JSON.stringify(t)!==JSON.stringify(this.consentState)&&(this.consentState=t,this._handleConsentState(this.consentState))}_handleConsentState(t){const{_paq:e}=window;"object"==typeof t&&null!==t&&t.consentGiven?this._enableAnonymizedTracking(t,e):this._disableAnonymizedTracking(e)}_enableAnonymizedTracking(t,e){e.push(["setCookieConsentGiven"])}_disableAnonymizedTracking(t){t.push(["forgetCookieConsentGiven"]),ze.getAll().then((t=>t.forEach((t=>{(t.name.match(/^_pk_.*$/)||t.name.match(/^_mtm_.*$/)||t.name.match(/^MATOMO.*$/))&&ze.delete(t.name)}))))}_instantiateMatomo(){if(this.matomoIsInstantiated)return;const t=new URL(this.url),e=new URL(t);e.pathname="/matomo.php";const n=new URL(t);n.pathname="/matomo.js";const{_paq:o}=window;o.push(["requireCookieConsent"]),o.push(["trackPageView"]),o.push(["enableLinkTracking"]),o.push(["setTrackerUrl",e.toString()]),o.push(["setSiteId",this.siteid]),this._matomo||(this._matomo=this._addMatomoScriptTag(n)),this.matomoIsInstantiated=!0,this._dispatchMatomoLoadedEvent()}_addMatomoScriptTag(t){const e=document.createElement("script"),n=document.getElementsByTagName("script")[0];return e.async=!0,e.src=t.toString(),n.parentNode.insertBefore(e,n),!0}_dispatchMatomoLoadedEvent(){const t=new CustomEvent("toujou-matomo-loaded",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}customElements.define("toujou-tracking-matomo",De);var Be=n(Le||(Le=ie([":host {\n    display: var(--toujou-third-party-content-display, flex);\n    -webkit-box-align: var(--toujou-third-party-content-align-items, stretch);\n        -ms-flex-align: var(--toujou-third-party-content-align-items, stretch);\n            align-items: var(--toujou-third-party-content-align-items, stretch);\n    -webkit-box-pack: var(--toujou-third-party-content-justify-content, center);\n        -ms-flex-pack: var(--toujou-third-party-content-justify-content, center);\n            justify-content: var(--toujou-third-party-content-justify-content, center);\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: var(--toujou-third-party-content-flex-direction, column);\n            flex-direction: var(--toujou-third-party-content-flex-direction, column);\n    position: var(--toujou-third-party-content-position, relative);\n    top: var(--toujou-third-party-content-top, 0);\n    left: var(--toujou-third-party-content-left, 0);\n    height: var(--toujou-third-party-content-height, 100%);\n    width: var(--toujou-third-party-content-width, 100%);\n}\n\n:host([contenttype='maps']) {\n    position: var(--toujou-third-party-content-maps-position, absolute);\n}\n\niframe {\n    border: var(--toujou-third-party-content-iframe-border, none);\n    position: var(--toujou-third-party-content-iframe-position, absolute);\n    height: var(--toujou-third-party-content-iframe-height, 100%);\n    width: var(--toujou-third-party-content-iframe-width, 100%);\n}\n\n:host([contenttype='html']) iframe {\n    position: var(--toujou-third-party-content-html-iframe-position, relative);\n}\n"])));class He extends o{set store(t){this._storeUnsubscribe&&(this._storeUnsubscribe(),this._storeUnsubscribe=this._store=null,this.consent=null),t&&(this._storeUnsubscribe=t.subscribe(this.onStateChange),this._store=t,this.onStateChange())}get store(){return this._store}static get is(){return"toujou-third-party-content"}static get styles(){return Be}render(){return i`
      <slot id="templatedContent" @slotchange="${this._handleSlotChange}"></slot>
      <div @click="${this._handlePlaceholderClick}">
        <slot name="placeholder" id="placeholderContainer" class="placeholder-slot"></slot>
      </div>
    `}constructor(){super(),this._store=null,this._storeUnsubscribe=null,this.isIntersecting=!1,this.contentTypeAllowed=!1,this.show=!1,this.consent=null,this.onStateChange=this.onStateChange.bind(this),this._handleConsentButtonClick=this._handleConsentButtonClick.bind(this)}connectedCallback(){super.connectedCallback(),this.store||(this.store=ke),this._isContentTypeAllowed(this.consent),this._addEventListeners(),this._addIntersectionObserver()}updated(t){t.has("isIntersecting")&&this.isIntersecting&&!this.show&&(this.show=!0),(t.has("contentTypeAllowed")||t.has("show"))&&this.contentTypeAllowed&&this.show&&this._showContent()}onStateChange(){var t,e,n;this.consent=null!==(n=null===(e=null===(t=this._store.getState())||void 0===t?void 0:t.consents)||void 0===e?void 0:e[this.contentType])&&void 0!==n&&n,this._isContentTypeAllowed(this.consent)}_addEventListeners(){window.addEventListener("toujou-consent-widget-dismissed",(()=>{this._isContentTypeAllowed(this.consent)})),window.addEventListener("toujou-consent-button-clicked",this._handleConsentButtonClick)}_handleConsentButtonClick(t){const e=t.target;this.querySelectorAll(".consent").forEach((n=>{n===e&&(this._saveSingleConsent(t.target.getAttribute("consenttype"),this._createNewConsentData(t.target)),this._dispatchAddSnackbar(t.target.getAttribute("snackbarmessage")))}))}_createNewConsentData(t){const e=24*t.getAttribute("consentLifetime")*60*60*1e3;return{consentGiven:!0,consentCreationDate:Date.now(),consentExpirationDate:Date.now()+e,consentLifetime:e}}_saveSingleConsent(t,e){this.store.dispatch(((t,e)=>({type:he,payload:{consentType:t,consentData:e}}))(t,e))}_dispatchAddSnackbar(t){const e=new CustomEvent("toujou-add-snackbar",{bubbles:!0,composed:!0,detail:{message:t,type:"auto",duration:2500,variant:"success"}});this.dispatchEvent(e)}_handlePlaceholderClick(t){t.target.hasAttribute("ttpc-showcontentonce")&&this._handleShowContentOnceClick()}_handleShowContentOnceClick(){this._showContent()}_addIntersectionObserver(){new IntersectionObserver(((t,e)=>{this.isIntersecting=t[0].isIntersecting,this.isIntersecting&&e.unobserve(this)})).observe(this)}_clearRenderedContent(){this.querySelector(".toujou-third-party-content__templated-content").innerHTML=""}_handleSlotChange(){}_isContentTypeAllowed(t){this.contentTypeAllowed=null!==t&&(t.consentGiven||!1),"#aaa"===window.location.hash&&(this.contentTypeAllowed=!0)}_showContent(){this._clearRenderedContent();const t=this.shadowRoot.querySelector("#templatedContent").assignedNodes({flatten:!0}).filter((t=>"TEMPLATE"===t.tagName)),e=this.querySelector(".toujou-third-party-content__templated-content"),n=document.createRange();n.selectNodeContents(e),t.forEach((t=>{new Ee(t).renderInto(n)})),this.setAttribute("showingcontent","")}}r([c()],He.prototype,"contentType",void 0),r([c()],He.prototype,"store",null),r([c({type:Boolean})],He.prototype,"isIntersecting",void 0),r([h()],He.prototype,"contentTypeAllowed",void 0),r([h()],He.prototype,"show",void 0),r([h()],He.prototype,"consent",void 0),customElements.define(He.is,He);class Ue extends o{createRenderRoot(){return this}constructor(){super(),this.consentTypeNames=Se,this.onStateChange=this.onStateChange.bind(this),this.store=ke,this.store.subscribe(this.onStateChange),this.state=this.store.getState()}}class Fe extends Ue{static get is(){return"toujou-consent-state-emitter-gtm"}onStateChange(){if(this.state=this.store.getState(),!window.gtag)throw new Error("TOUJOU: Could not get the gtag library to set the ads consent state!");this._updateGtmTrackingState(),this._updateGtmAdsState()}_updateGtmTrackingState(){const t=this.state.consents.tracking,e={analytics_storage:!0===(null==t?void 0:t.consentGiven)?"granted":"denied"};this._sendGtagConsentUpdate(e)}_updateGtmAdsState(){const t=this.state.consents.ads,e=!0===(null==t?void 0:t.consentGiven)?"granted":"denied",n={ad_storage:e,ad_user_data:e,ad_personalization:e};this._sendGtagConsentUpdate(n)}_sendGtagConsentUpdate(t){window.gtag("consent","update",t)}}customElements.define(Fe.is,Fe);class We extends o{static get is(){return"toujou-iframe-resizer"}render(){return i`
      <slot @slotchange="${this.handleSlotChange}"></slot>`}handleSlotChange(t){t.target.assignedNodes({flatten:!0}).filter((t=>t instanceof HTMLIFrameElement)).forEach((t=>{let e={};try{e=JSON.parse(t.getAttribute("toujou-iframe"))||{}}catch(n){(console.error||console.log).call(console,n.stack||n)}$.iframeResizer(e,t)}))}}customElements.define(We.is,We);
//# sourceMappingURL=base.js.map
